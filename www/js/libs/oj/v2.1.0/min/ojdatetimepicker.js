/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojeditablevalue","ojs/ojinputtext","ojs/ojvalidation","ojs/ojpopup","ojs/ojbutton"],function(b,f){function a(a){return this.options.converter.parse(a)}function d(a,d){var c=a.translations.dateTimeRange||{},e=[{category:"hint",entries:["min","max","inRange"]},{category:"messageDetail",entries:["rangeUnderflow","rangeOverflow"]},{category:"messageSummary",entries:["rangeUnderflow","rangeOverflow"]}],g={min:a.min,max:a.max,converter:d};if(!f.isEmptyObject(c))for(var h=
0,k=e.length;h<k;h++){var l=c[e[h].category];if(l){for(var w={},t=e[h].entries,x=0,y=t.length;x<y;x++)w[t[x]]=l[t[x]];g[e[h].category]=w}}return b.ya.Xu(b.ce.VALIDATOR_TYPE_DATETIMERANGE).createValidator(g)}function c(a,b){var d=a.filter("span");b?d.addClass("oj-disabled").removeClass("oj-enabled oj-default"):d.removeClass("oj-disabled").addClass("oj-enabled oj-default")}function e(a,b,d){if(!a||b===d.length)return a;var c=b+1;return e(a[d[b]],c,d)||e(a["*"],c,d)}function g(a,b){b.setHours(a.getHours());
b.setMinutes(a.getMinutes());b.setSeconds(a.getSeconds());b.setMilliseconds(a.getMilliseconds());return b}function h(a){return a.delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a","mouseout",function(){f(this).removeClass("oj-hover")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a",
"mouseover",function(){f(this).addClass("oj-hover")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a","focus",function(){f(this).addClass("oj-focus")}).delegate(".oj-datepicker-prev-icon, .oj-datepicker-prev-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-next-icon, .oj-datepicker-next-icon .oj-clickable-icon-nocontext.oj-component-icon, .oj-datepicker-calendar td a",
"blur",function(){f(this).removeClass("oj-focus")})}function k(a){var b=f(a.element[0]).parent().parent();a.Ez(b)}var l=b.ya.Jo(b.Zl.CONVERTER_TYPE_DATETIME).createConverter({year:"numeric"});b.Ja("oj.ojInputDate",f.oj.inputBase,{version:"1.0.0",widgetEventPrefix:"oj",_CLASS_NAMES:"oj-inputdatetime-input",_WIDGET_CLASS_NAMES:"oj-inputdatetime-date-only oj-component oj-inputdatetime",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_INPUT_HELPER_KEY:"inputHelp",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],
_GET_INIT_OPTIONS_PROPS:[{Z:"disabled",jd:!0},{Z:"pattern"},{Z:"title"},{Z:"placeholder"},{Z:"value",rg:a},{Z:"required",rg:!0,jd:!0},{Z:"readonly",option:"readOnly",jd:!0},{Z:"min",rg:a},{Z:"max",rg:a}],IM:"oj-inputdatetime-input-trigger",HM:"oj-inputdatetime-calendar-icon",nY:"oj-datepicker-current-day",tY:"oj-datepicker-days-cell-over",b_:"oj-datepicker-unselectable",sY:"oj-datepicker-desc",KL:"oj-datepicker-calendar",Oga:"oj-datepicker-div",wga:"oj-datepicker-inline",YL:" oj-inputdatetime-input-container",
xga:" oj-inputdatetime-inline",options:{datePicker:{footerLayout:"",changeMonth:"select",changeYear:"select",currentMonthPos:0,daysOutsideMonth:"hidden",numberOfMonths:1,showOn:"image",stepMonths:"numberOfMonths",stepBigMonths:12,weekDisplay:"none",yearRange:"c-10:c+10"},converter:b.ya.Jo(b.Zl.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",month:"2-digit",year:"2-digit"}),max:void 0,min:void 0,pickerAttributes:null,dayFormatter:null},mE:function(){this.le=null;this.IQ=!1;this.$A=4;this.sq=
this.zm=this.$n=this.bl=this.ym=0;this.gA={};var a=this.element[0].nodeName.toLowerCase();this.jf="div"===a||"span"===a;this.Pe=h(f("\x3cdiv id\x3d'"+this.Qp(this.Oga)+"' role\x3d'region' aria-describedby\x3d'"+this.Qp(this.sY)+"' class\x3d'oj-datepicker-content'\x3e\x3c/div\x3e"));f("body").append(this.Pe);if(this.jf)this._WIDGET_CLASS_NAMES+=this.xga,this._CLASS_NAMES="";else{this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES+=this.YL;var d=this;this.tH=this.Pe.ojPopup({initialFocus:"none",modality:"modeless",
open:function(){d.Pe.find(".oj-datepicker-calendar").focus()},rootAttributes:{"class":"oj-datepicker-popup"}});(a=this.options.pickerAttributes)&&b.ae.gW(this.tH.ojPopup("widget"),a)}},_ComponentCreate:function(){this.mE();var a=this._super();this.options.dayMetaData&&(this.options.dayFormatter=function(a){return function(b){return e(a,0,[b.fullYear,b.month,b.date])}}(this.options.dayMetaData));this.LH(this.fG());this.jf?(this.element.append(this.Pe),this.element.addClass(this.wga),this.Pe.css("display",
"block")):this.YM();k(this);return a},Eg:function(){var a=this._superApply(arguments);this.s1(this.options.disabled);return a},_setOption:function(a,d,c){var f=null;if("value"===a)return d||(d=null),f=this._super(a,d,c),this.LH(d),this.Yn()&&this.Yq(!0),f;if("dayMetaData"===a)this._setOption("dayFormatter",function(a){return e(d,0,[a.fullYear,a.month,a.date])},c);else return f=this._super(a,d,c),"disabled"===a?this.s1(d):"max"===a||"min"===a?(this.gA[b.ce.VALIDATOR_TYPE_DATETIMERANGE]=this.EG("min"),
this.rv()):"readOnly"===a&&d?this.hide():"dayFormatter"===a&&(this.gA[b.ce.VALIDATOR_TYPE_DATERESTRICTION]=this.EG("dayFormatter"),this.rv()),"datePicker"===a&&"currentMonthPos"===c.subkey&&this.LH(this.options.value),c={max:!0,min:!0,dayFormatter:!0,datePicker:!0,translations:!0},this.Yn()&&a in c&&this.Yq(),f},GL:function(){return this.le},_destroy:function(){var a=this._super();this.element.off("focus");this.le&&this.le.remove();this.jf&&(this.element.removeProp("disabled"),this.element.removeProp("readonly"));
this.Pe.remove();return a},Yn:function(){return this.jf||this.tH.ojPopup("isOpen")},YM:function(){var a=this.options.datePicker.showOn,b=f("\x3cspan\x3e").addClass(this.IM);if("focus"===a)this.element.on("focus",f.proxy(this.show,this));a=f("\x3cspan title\x3d'"+this.PO()+"'/\x3e").addClass(this.HM+" oj-clickable-icon-nocontext oj-component-icon");b.append(a);var d=this;a.on("click",function(){d.Yn()?d.hide():d.show();return!1});this.Ez(a);this._hoverable(a);this.cT=a;this.le=b;this.element.after(b)},
Nla:function(a){var b;b=!1;var d=f.ui.keyCode,c=this.vl;if(this.Yn())switch(a.keyCode){case 84:a.altKey&&a.ctrlKey&&(this.Pe.find(".oj-datepicker-current").focus(),b=!0);break;case d.TAB:this.hide();break;case d.ENTER:return b=f("td."+this.tY+":not(."+this.nY+")",this.Pe),b[0]&&this.R7(this.bl,this.zm,b[0],a),a.preventDefault(),a.stopPropagation(),!1;case d.ESCAPE:this.hide();this.element.focus();b=!0;break;case d.PAGE_UP:a.ctrlKey&&a.altKey?this.Mg(-this.options.datePicker.stepBigMonths,"M",!0):
a.altKey?this.Mg(-1,"Y",!0):this.Mg(-this.BA(),"M",!0);b=!0;break;case d.PAGE_DOWN:a.ctrlKey&&a.altKey?this.Mg(+this.options.datePicker.stepBigMonths,"M",!0):a.altKey?this.Mg(1,"Y",!0):this.Mg(+this.BA(),"M",!0);b=!0;break;case d.END:this.ym=this.qA(this.zm,this.bl);this.Yq(!0);b=!0;break;case d.HOME:this.ym=1;this.Yq(!0);b=!0;break;case d.LEFT:this.Mg(c?1:-1,"D",!0);a.originalEvent.altKey&&this.Mg(a.ctrlKey?-this.options.datePicker.stepBigMonths:-this.BA(),"M",!0);b=!0;break;case d.UP:this.Mg(-7,
"D",!0);b=!0;break;case d.RIGHT:this.Mg(c?-1:1,"D",!0);a.originalEvent.altKey&&this.Mg(a.ctrlKey?+this.options.datePicker.stepBigMonths:+this.BA(),"M",!0);b=!0;break;case d.DOWN:this.Mg(7,"D",!0),b=!0}else a.keyCode===d.HOME&&a.ctrlKey&&(this.show(),b=!0);b&&(a.preventDefault(),a.stopPropagation())},Yq:function(a){this.$A=4;var b=this.Jma();this.Pe.empty().append(b.html);var d=f("button",this.Pe);0<d.length&&(1===d.length&&f(d[0]).addClass("oj-datepicker-single-button"),f.each(d,function(a,b){f(b).ojButton()}));
this.cja();b.E$&&this.Pe.find(".oj-datepicker-calendar").attr("aria-activedescendant",b.E$);b=this.tP();d=b[1];this.Pe.removeClass("oj-datepicker-multi-2 oj-datepicker-multi-3 oj-datepicker-multi-4").width("");1<d&&this.Pe.addClass("oj-datepicker-multi-"+d).css("width",17*d+"em");this.Pe[(1!==b[0]||1!==b[1]?"add":"remove")+"Class"]("oj-datepicker-multi");this.Yn()&&this.element.is(":visible")&&!this.element.is(":disabled")&&(a?(a=this.Pe.find(".oj-datepicker-calendar"),a[0]!==document.activeElement&&
a.focus()):this.jf||this.element[0]===document.activeElement||this.element.focus())},Mg:function(a,b,d){this.options.disabled||(this.q_(a+("M"===b?this.options.datePicker.currentMonthPos:0),b),this.Yq(d))},yoa:function(){var a=new Date;this.ym=a.getDate();this.$n=this.bl=a.getMonth();this.sq=this.zm=a.getFullYear();this.Mg()},U7:function(a,d){var c=parseInt(a.options[a.selectedIndex].value,10);"M"===d?this.bl=this.$n=c:this.zm=this.sq=c;f("#"+this.Qp(this.KL)).html(this.hm(this.options.monthWide[this.$n])+
" "+l.format(b.Sb.dateToLocalIso(new Date(this.sq,this.$n,1))));this.Mg(0,0,!0)},R7:function(a,d,c,e){f(c).hasClass(this.b_)||this.options.disabled||(this.ym=f("a",c).html(),this.bl=a,this.zm=d,a=b.Sb,(d=this.options.value?a.isoToLocalDate(this.options.value):null)?(c=new Date(this.zm,this.bl,this.ym),g(d,c),d=c):d=new Date(this.zm,this.bl,this.ym),a=a.dateToLocalIso(d),d=this.Rd().format(a),this.Vj(d),this.Lc(a,e),this.hide())},fO:function(a,d){return a?"string"===typeof a?b.Sb.isoToLocalDate(a):
new Date(a.getTime()):d},LH:function(a){a=this.fO(a,this.J3());this.ym=a.getDate();this.$n=this.bl=a.getMonth();this.sq=this.zm=a.getFullYear();this.q_()},BA:function(){var a=this.options.datePicker.stepMonths;return f.isNumeric(a)?a:this.options.datePicker.numberOfMonths},cja:function(){var a=this.BA(),b=this;this.Pe.find("[data-handler]").map(function(){f(this).bind(this.getAttribute("data-event"),{prev:function(d){b.Mg(-a,"M",!0);d.preventDefault()},next:function(d){b.Mg(+a,"M",!0);d.preventDefault()},
today:function(a){if("keyup"===a.type&&13===a.keyCode||"click"===a.type)b.yoa(),a.preventDefault(),a.stopPropagation()},selectDay:function(a){b.R7(+this.getAttribute("data-month"),+this.getAttribute("data-year"),this,a);return!1},selectMonth:function(){b.U7(this,"M");return!1},selectYear:function(){b.U7(this,"Y");return!1},calendarKey:function(a){b.Nla(a)}}[this.getAttribute("data-handler")])})},ysa:function(a,b,d){b=b?new Date(b.getFullYear(),b.getMonth(),b.getDate()):null;d=d?new Date(d.getFullYear(),
d.getMonth(),d.getDate()):null;return null!==b&&a<b||null!==d&&a>d},Jma:function(){var a,d,c,e,f,g,h=this.options.dayWide,k=this.options.dayNarrow,l=this.options.monthWide,t=this.options.monthAbbreviated,x=this.options.firstDayOfWeek,y,B,C,M,G,E,F,z="",A,H,I,L,D,J,N,K,Q=new Date,Q=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()),O=this.vl;g=this.options.datePicker.footerLayout;var U=this.tP(),P=this.options.datePicker.currentMonthPos,W=this.options.dayFormatter;K=null;var Z=1!==U[0]||1!==U[1],X=
this.qG("min"),R=this.qG("max"),P=this.$n-P,V=this.sq,ha=new Date(this.zm,this.bl,this.ym),Y=new Date(this.fG()),T=Y.getDate(),aa=Y.getMonth(),fa=Y.getFullYear(),ba=this.options.disabled,S=this.hm(this.v("weekText")),ca=b.Sb;Y.setHours(0);Y.setMinutes(0);Y.setSeconds(0);Y.setMilliseconds(0);0>P&&(P+=12,V--);if(X)for(a=new Date(X.getFullYear(),X.getMonth(),X.getDate()),a=R&&R<a?R:a;new Date(V,P,this.qA(V,P))<a;)P++,11<P&&(P=0,V++);if(R)for(a=new Date(R.getFullYear(),R.getMonth()-U[0]*U[1]+1,R.getDate()),
a=X&&a<X?X:a;new Date(V,P,1)>a;)P--,0>P&&(P=11,V--);this.$n=P;this.sq=V;a=this.hm(this.v("prevText"));a=this.$_(-1,V,P)&&!ba?"\x3ca href\x3d'#' class\x3d'oj-datepicker-prev-icon oj-enabled oj-default oj-component-icon oj-clickable-icon-nocontext' data-handler\x3d'prev' data-event\x3d'click' title\x3d'"+a+"'\x3e\x3c/a\x3e":"\x3ca class\x3d'oj-datepicker-prev-icon oj-disabled oj-component-icon oj-clickable-icon-nocontext' title\x3d'"+a+"'\x3e\x3c/a\x3e";d=this.hm(this.v("nextText"));d=this.$_(1,V,P)&&
!ba?"\x3ca href\x3d'#' class\x3d'oj-datepicker-next-icon oj-enabled oj-default oj-component-icon oj-clickable-icon-nocontext' data-handler\x3d'next' data-event\x3d'click' title\x3d'"+d+"'\x3e\x3c/a\x3e":"\x3ca class\x3d'oj-datepicker-next-icon oj-disabled oj-component-icon oj-clickable-icon-nocontext' title\x3d'"+d+"'\x3e\x3c/a\x3e";c=this.hm(this.v("currentText"));f="";e="\x3cbutton type\x3d'button' class\x3d'oj-datepicker-current oj-priority-secondary' data-handler\x3d'today' data-event\x3d'click keyup'\x3e"+
c+"\x3c/button\x3e";if(1<g.length){c=0;g=[{index:g.indexOf("today"),content:this.k5(Q)?e:""}];for(g.sort(function(a,b){return a.index-b.index});c<g.length&&0>g[c].index;)c++;for(;c<g.length;)f+=g[c++].content;0<f.length&&(f="\x3cdiv class\x3d'oj-datepicker-buttonpane'\x3e"+f+"\x3c/div\x3e")}g=this.options.datePicker.weekDisplay;c=this.options.datePicker.daysOutsideMonth;e="";y="all";for(B=0;B<U[0];B++){C="";this.$A=4;for(M=0;M<U[1];M++){y="all";A="";if(Z){A+="\x3cdiv class\x3d'oj-datepicker-group";
if(1<U[1])switch(M){case 0:A+=" oj-datepicker-group-first";y=O?"right":"left";break;case U[1]-1:A+=" oj-datepicker-group-last";y=O?"left":"right";break;default:A+=" oj-datepicker-group-middle",y=""}A+="'\x3e"}A+="\x3cdiv class\x3d'oj-datepicker-header"+(ba?" oj-disabled ":" oj-enabled oj-default ")+"'\x3e"+(/all|left/.test(y)&&0===B?O?d:a:"")+(/all|right/.test(y)&&0===B?O?a:d:"")+this.Kma(P,V,X,R,0<B||0<M,l,t,Z)+"\x3c/div\x3e\x3ctable class\x3d'oj-datepicker-calendar"+(ba?" oj-disabled ":" oj-enabled oj-default ")+
"' tabindex\x3d-1 data-handler\x3d'calendarKey' data-event\x3d'keydown' aria-readonly\x3d'true' role\x3d'grid' aria-labelledby\x3d'"+this.Qp(this.KL)+"'\x3e\x3cthead role\x3d'presentation'\x3e\x3ctr role\x3d'row'\x3e";H="number"===g?"\x3cth class\x3d'oj-datepicker-week-col'\x3e"+this.hm(this.v("weekHeader"))+"\x3c/th\x3e":"";for(y=0;7>y;y++)I=(y+parseInt(x,10))%7,H+="\x3cth role\x3d'columnheader' aria-label\x3d'"+h[I]+"'"+(5<=(y+x+6)%7?" class\x3d'oj-datepicker-week-end'":"")+"\x3e\x3cspan title\x3d'"+
h[I]+"'\x3e"+k[I]+"\x3c/span\x3e\x3c/th\x3e";A+=H+"\x3c/tr\x3e\x3c/thead\x3e\x3ctbody role\x3d'presentation'\x3e";H=this.qA(V,P);V===fa&&P===aa&&(T=Math.min(T,H));y=(this.qna(V,P)-x+7)%7;H=Math.ceil((y+H)/7);this.$A=H=Z?this.$A>H?this.$A:H:H;I=new Date(V,P,1-y);for(L=0;L<H;L++){A+="\x3ctr role\x3d'row'\x3e";y=this.Rd().er(ca.dateToLocalIso(I));D="none"===g?"":"\x3ctd class\x3d'oj-datepicker-week-col' role\x3d'rowheader' aria-label\x3d'"+S+" "+y+"'\x3e"+y+"\x3c/td\x3e";for(y=0;7>y;y++){N=I.getMonth()!==
P;G=I.getTime()===Y.getTime();E="oj-dp-"+this.uuid+"-"+L+"-"+y+"-"+B+"-"+M;(F=I.getTime()===ha.getTime()&&P===this.bl)&&(z=E);J=[!0,""];K=I.getFullYear();var da=I.getMonth(),ga=I.getDate();W&&(K=W({fullYear:K,month:da+1,date:ga}))&&(J=[!K.disabled,K.className||""],K.tooltip&&J.push(K.tooltip));da=I.getTime()===Y.getTime();K=N&&"selectable"!==c||!J[0]||this.ysa(I,X,R);D+="\x3ctd role\x3d'gridcell' aria-disabled\x3d'"+!!K+"' aria-selected\x3d'"+G+"' id\x3d'"+E+"' class\x3d'"+(5<=(y+x+6)%7?" oj-datepicker-week-end":
"")+(N?" oj-datepicker-other-month":"")+(F?" "+this.tY:"")+(K||ba?" "+this.b_+" oj-disabled":" oj-enabled ")+(N&&"hidden"===c?"":" "+J[1]+(G?" "+this.nY:"")+(I.getTime()===Q.getTime()?" oj-datepicker-today":""))+"'"+(N&&"hidden"===c||!J[2]?"":" title\x3d'"+J[2].replace(/'/g,"\x26#39;")+"'")+(K?"":" data-handler\x3d'selectDay' data-event\x3d'click' data-month\x3d'"+I.getMonth()+"' data-year\x3d'"+I.getFullYear()+"'")+"\x3e"+(N&&"hidden"===c?"\x26#xa0;":K||ba?"\x3cspan class\x3d'oj-disabled'\x3e"+I.getDate()+
"\x3c/span\x3e":"\x3ca class\x3d'oj-enabled"+(da?" oj-selected":"")+(N?" oj-priority-secondary":"")+"' "+(da||F?"":"tabindex\x3d'-1' ")+" href\x3d'#'\x3e"+I.getDate()+"\x3c/a\x3e")+"\x3c/td\x3e";I.setDate(I.getDate()+1)}A+=D+"\x3c/tr\x3e"}P++;11<P&&(P=0,V++);A+="\x3c/tbody\x3e\x3c/table\x3e"+(Z?"\x3c/div\x3e"+(0<U[0]&&M===U[1]-1?"\x3cdiv class\x3d'oj-datepicker-row-break'\x3e\x3c/div\x3e":""):"");C+=A}e+=C}return{html:e+f,E$:z}},Kma:function(a,d,c,e,f,g,h,k){var w,t,x,y,B=this.options.datePicker.changeMonth,
C=this.options.datePicker.changeYear,M=b.ab.Oba()?"before":"after",G="\x3cdiv class\x3d'oj-datepicker-title' role\x3d'header'\x3e",E="",F=this.options.disabled,z=b.Sb;if(f||"none"===B)E+="\x3cspan class\x3d'oj-datepicker-month'\x3e"+g[a]+"\x3c/span\x3e";else{w=c&&c.getFullYear()===d;t=e&&e.getFullYear()===d;E+="\x3cselect tabindex\x3d'-1' class\x3d'oj-datepicker-month "+(F?"oj-disabled' disabled":"oj-enabled'")+" data-handler\x3d'selectMonth' data-event\x3d'change' role\x3d'listbox'\x3e";for(x=0;12>
x;x++)(!w||x>=c.getMonth())&&(!t||x<=e.getMonth())&&(E+="\x3coption role\x3d'option' value\x3d'"+x+"' aria-selected\x3d'"+(x===a?"true' selected\x3d'selected'":"false'")+"\x3e"+h[x]+"\x3c/option\x3e");E+="\x3c/select\x3e"}"before"===M&&(G+=E+(f||"select"!==B||"select"!==C?"\x26#xa0;":""));if(!this.Ap)if(this.Ap="",f||"none"===C)G+="\x3cspan class\x3d'oj-datepicker-year'\x3e"+l.format(z.dateToLocalIso(new Date(d,a,1)))+"\x3c/span\x3e";else{w=this.options.datePicker.yearRange.split(":");y=(new Date).getFullYear();
t=function(a){a=a.match(/c[+\-].*/)?d+parseInt(a.substring(1),10):a.match(/[+\-].*/)?y+parseInt(a,10):parseInt(a,10);return isNaN(a)?y:a};h=t(w[0]);w=Math.max(h,t(w[1]||""));h=c?Math.max(h,c.getFullYear()):h;w=e?Math.min(w,e.getFullYear()):w;for(this.Ap+="\x3cselect tabindex\x3d'-1' class\x3d'oj-datepicker-year "+(F?"oj-disabled' disabled":"oj-enabled'")+" data-handler\x3d'selectYear' data-event\x3d'change' role\x3d'listbox'\x3e";h<=w;h++)this.Ap+="\x3coption role\x3d'option' value\x3d'"+h+"' aria-selected\x3d'"+
(h===d?"true' selected\x3d'selected'":"false'")+"\x3e"+l.format(z.dateToLocalIso(new Date(h,a,1)))+"\x3c/option\x3e";this.Ap+="\x3c/select\x3e";G+=this.Ap;this.Ap=null}"after"===M&&(G+=(f||"select"!==B||"select"!==C?"\x26#xa0;":"")+E);k&&f||(G+="\x3cspan class\x3d'oj-helper-hidden-accessible' id\x3d'"+this.Qp(this.KL)+"'\x3e"+g[a]+" "+l.format(z.dateToLocalIso(new Date(d,a,1)))+"\x3c/span\x3e",G+="\x3cspan class\x3d'oj-helper-hidden-accessible' id\x3d'"+this.Qp(this.sY)+"'\x3e"+this.hm(this.v("datePicker"))+
"\x3c/span\x3e");return G+"\x3c/div\x3e"},q_:function(a,b){var d=this.sq+("Y"===b?a:0),c=this.$n+("M"===b?a:0),e=Math.min(this.ym,this.qA(d,c))+("D"===b?a:0),d=new Date(d,c,e);this.ym=d.getDate();this.$n=this.bl=d.getMonth();this.sq=this.zm=d.getFullYear()},tP:function(){var a=this.options.datePicker.numberOfMonths,a="string"===typeof a?parseInt(a,10):a;return null==a?[1,1]:"number"===typeof a?[1,a]:a},qG:function(a){return this.fO(this.options[a],null)},qA:function(a,b){return 32-(new Date(a,b,32)).getDate()},
qna:function(a,b){return(new Date(a,b,1)).getDay()},$_:function(a,b,d){var c=this.tP();b=new Date(b,d+(0>a?a:c[0]*c[1]),1);0>a&&b.setDate(this.qA(b.getFullYear(),b.getMonth()));return this.k5(b)},k5:function(a){var b,d,c=this.qG("min"),e=this.qG("max"),f=null,g=null;if(b=this.options.datePicker.yearRange)b=b.split(":"),d=(new Date).getFullYear(),f=parseInt(b[0],10),g=parseInt(b[1],10),b[0].match(/[+\-].*/)&&(f+=d),b[1].match(/[+\-].*/)&&(g+=d);return(!c||a.getTime()>=c.getTime())&&(!e||a.getTime()<=
e.getTime())&&(!f||a.getFullYear()>=f)&&(!g||a.getFullYear()<=g)},PO:function(){return this.hm(this.v("tooltipCalendar"+(this.options.disabled?"Disabled":"")))},s1:function(a){this.le&&(c(this.le.children(),a),this.le.find("."+this.HM).attr("title",this.PO()));a&&this.hide();this.jf&&this.Yq()},FL:function(){this.jf||this._superApply(arguments)},uR:function(a){this.jf||this._superApply(arguments)},pH:function(a){if(!this.jf){this._superApply(arguments);var b=f.ui.keyCode,d=!1;if(this.Yn())switch(a.keyCode){case b.TAB:this.hide();
break;case b.ESCAPE:this.hide();d=!0;break;case b.UP:case b.DOWN:this.Pe.find(".oj-datepicker-calendar").focus(),d=!0}else switch(a.keyCode){case b.UP:case b.DOWN:this.Lc(this.Eh(),a),this.show(),d=!0}if(d)return a.preventDefault(),a.stopPropagation(),!1}},Vj:function(a){this.jf||this._superApply(arguments);this.LH(this.fG());this.Yn()&&this.Yq(!0)},Rd:function(){return this.options.converter?this._superApply(arguments):f.oj.ojInputDate.prototype.options.converter},Bv:function(){return this.options.value||
""},_GetDefaultStyleClass:function(){return"oj-inputdate"},mz:function(){var a=this._superApply(arguments);if(null!=this.options.min||null!=this.options.max)this.gA[b.ce.VALIDATOR_TYPE_DATETIMERANGE]=this.EG("min");null!=this.options.dayFormatter&&(this.gA[b.ce.VALIDATOR_TYPE_DATERESTRICTION]=this.EG("dayFormatter"));return f.extend(this.gA,a)},Tj:function(){this.hide()},Nn:function(){this.hide()},EG:function(a){var c=null;"min"===a||"max"===a?c=d(this.options,this.Rd()):"dayFormatter"===a&&(a={dayFormatter:this.options.dayFormatter,
converter:this.Rd()},f.extend(a,this.options.translations.dateRestriction||{}),c=b.ya.Xu(b.ce.VALIDATOR_TYPE_DATERESTRICTION).createValidator(a));return c},J3:function(){var a=new Date;a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a},fG:function(){return this.fO(this.options.value,this.J3())},getNodeBySubId:function(a){var b=null,d=a&&a.subId,c=this.Pe;if(d)switch(d){case "oj-datepicker-content":b=c[0];break;case "oj-inputdatetime-calendar-icon":b=f(".oj-inputdatetime-calendar-icon",
this.le)[0];break;case "oj-datepicker-prev-icon":b=f(".oj-datepicker-prev-icon",c)[0];break;case "oj-datepicker-next-icon":b=f(".oj-datepicker-next-icon",c)[0];break;case "oj-datepicker-month":b=f(".oj-datepicker-month",c)[0];break;case "oj-datepicker-year":b=f(".oj-datepicker-year",c)[0];break;case "oj-datepicker-current":b=f(".oj-datepicker-current",c)[0];break;case "oj-inputdatetime-date-input":b=this.jf?null:this.element[0];break;default:b=null}return b||this._superApply(arguments)},getSubIdByNode:function(a){var b=
this.Pe,d=null,c=[{selector:".oj-inputdatetime-calendar-icon",ele:this.le},{selector:".oj-datepicker-prev-icon",ele:b},{selector:".oj-datepicker-next-icon",ele:b},{selector:".oj-datepicker-month",ele:b},{selector:".oj-datepicker-year",ele:b},{selector:".oj-datepicker-current",ele:b}];if(a===b[0])return"oj-datepicker-content";if(!this.jf&&a===this.element[0])return"oj-inputdatetime-date-input";for(var b=0,e=c.length;b<e;b++){var g=c[b],h=f(g.selector,g.ele);if(1===h.length&&h[0]===a){d=g.selector.substr(1);
break}}return d||this._superApply(arguments)},hide:function(){this.Yn()&&!this.jf&&(this.tH.ojPopup("close"),"focus"===this.options.datePicker.showOn&&(this.IQ=!0),this.element.focus());return this},refresh:function(){this.le&&this.le.find("."+this.HM).attr("title",this.PO());return this._superApply(arguments)||this},show:function(){if(!(this.Yn()||this.options.disabled||this.options.readOnly))if(this.IQ)this.IQ=!1;else{var a=this.vl;this.Pe.empty();this.Yq();a=b.ad.$h({my:"start top",at:"start bottom",
of:this.element,collision:"flipfit flipfit"},a);this.tH.ojPopup("open",this.cT,a);return this}}});b.Components.tp({ojInputDate:{firstDayOfWeek:b.Components.Hi(function(){return b.ab.maa()}),dayWide:b.Components.Hi(function(){return b.ab.rC("wide")}),dayNarrow:b.Components.Hi(function(){return b.ab.rC("narrow")}),monthWide:b.Components.Hi(function(){return b.ab.vC("wide")}),monthAbbreviated:b.Components.Hi(function(){return b.ab.vC("abbreviated")}),datePicker:b.Components.Hi(function(){return b.Hf.gn("inputDate").datePicker})}});
b.Ja("oj.ojInputTime",f.oj.inputBase,{version:"1.0.0",widgetEventPrefix:"oj",_CLASS_NAMES:"oj-inputdatetime-input",_WIDGET_CLASS_NAMES:"oj-inputdatetime-time-only oj-component oj-inputdatetime",YL:"oj-inputdatetime-input-container",_ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES:"",_INPUT_HELPER_KEY:"inputHelp",_ATTR_CHECK:[{attr:"type",setMandatory:"text"}],_GET_INIT_OPTIONS_PROPS:[{Z:"disabled",jd:!0},{Z:"pattern"},{Z:"title"},{Z:"placeholder"},{Z:"value",rg:a},{Z:"required",rg:!0,jd:!0},{Z:"readonly",option:"readOnly",
jd:!0},{Z:"min",rg:a},{Z:"max",rg:a}],bia:"ojInputTime",IM:"oj-inputdatetime-input-trigger",JM:"oj-inputdatetime-time-icon",options:{converter:b.ya.Jo(b.Zl.CONVERTER_TYPE_DATETIME).createConverter({hour:"2-digit",hour12:!0,minute:"2-digit"}),max:void 0,min:void 0,datePickerComp:null,pickerAttributes:null,timePicker:{timeIncrement:"00:30:00:00"}},bf:function(a,d){this._super(a,d);null===this.options.datePickerComp&&b.ae.mn(this._GET_INIT_OPTIONS_PROPS,d,this)},mE:function(){this.KS={};this.Xn=this.options.datePickerComp;
this.Ph=f("\x3cdiv id\x3d'"+this.Qp(this.bia)+"' class\x3d'oj-listbox-drop' style\x3d'display:none'\x3e\x3c/div\x3e");f("body").append(this.Ph);var a=this;this.uH=this.Ph.ojPopup({initialFocus:"none",rootAttributes:{"class":"datetimepicker-dropdown"},chrome:"none",modality:"modeless",open:function(){var b=f("[aria-selected]",a.Ph);1===b.length&&a.d0(b.parent(),!0);f("ul",a.Ph).focus()},beforeClose:function(){a.l9=f("ul",a.Ph).scrollTop()}});var d=this.options.pickerAttributes;d&&b.ae.gW(this.uH.ojPopup("widget"),
d);this.Gq()&&(this._ELEMENT_TRIGGER_WRAPPER_CLASS_NAMES+=this.YL)},UB:function(){return this.uH.ojPopup("isOpen")},_ComponentCreate:function(){this.mE();var a=this._superApply(arguments);this.so()&&!this.e5()?this._CLASS_NAMES="":k(this);this.YM();return a},Eg:function(){var a=this._superApply(arguments);c(this.le.children(),this.options.disabled);return a},_setOption:function(a,e,f){var g=null;if("value"===a)return e||(e=null),g=this._super(a,e,f),this.XF(),g;g=this._superApply(arguments);"disabled"===
a?(e&&this.hide(),this.le.find("."+this.JM).attr("title",this.NP()),c(this.le.children(),e)):"max"!==a&&"min"!==a||this.so()?"readOnly"===a&&e&&this.hide():(this.KS[b.ce.VALIDATOR_TYPE_DATETIMERANGE]=d(this.options,this.Rd()),this.rv());a in{max:!0,min:!0,converter:!0,timePicker:!0}&&this.XF();return g},_destroy:function(){var a=this._super();this.le&&this.le.remove();this.Ph.remove();return a},FL:function(){this.Gq()&&this._superApply(arguments)},GL:function(){return this.le},pH:function(a){if(this.Gq()){this._superApply(arguments);
var b=f.ui.keyCode,d=!1;if(this.UB())switch(a.keyCode){case b.TAB:this.hide();break;case b.ESCAPE:this.hide();d=!0;break;case b.UP:case b.DOWN:f("ul",this.Ph).focus(),d=!0}else switch(a.keyCode){case b.UP:case b.DOWN:this.Lc(this.Eh(),a),this.show(),d=!0}if(d||a.keyCode===b.ENTER)return a.preventDefault(),a.stopPropagation(),!1}},NP:function(){return this.hm(this.v("tooltipTime"+(this.options.disabled?"Disabled":"")))},YM:function(){var a=this.Gq(),b=a?f("\x3cspan\x3e").addClass(this.IM):f("+ span",
this.element),d=f("\x3cspan title\x3d'"+this.NP()+"'/\x3e").addClass(this.JM+" oj-clickable-icon-nocontext oj-component-icon");b.append(d);var c=this;d.on("click",function(){c.UB()?c.hide():c.show()});this.Ez(d);this._hoverable(d);this.cT=d;this.le=b;a&&this.element.after(b)},iqa:function(a,b,d){return null!==b&&a<b||null!==d&&a>d},lt:function(){return this.so()?this.Xn.widget.Xaa():this.options.value},XF:function(){var a=this.lt(),d=this.Rd(),c=f("\x3cul class\x3d'oj-listbox-results' tabindex\x3d'-1' role\x3d'listbox'\x3e\x3c/ul\x3e"),
d=a?d.format(a):"",e=[],g,a=a?b.Sb.isoToLocalDate(a):new Date;a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);e=this.poa(a);d=d||e[0].value;this.Ph.empty();a=0;for(g=e.length;a<g;a++){var h=e[a].value,k=e[a].minMaxRange,l=f("\x3cli class\x3d'oj-listbox-result "+(k?"oj-disabled":"")+"' role\x3d'presentation'\x3e"),w=this.uuid+"_sel"+a,k=f("\x3cdiv class\x3d'oj-listbox-result-label' "+(k?"aria-disabled ":"")+"data-value\x3d'"+h+"' role\x3d'option' id\x3d'"+w+"'\x3e"+e[a].label+"\x3c/li\x3e");
d===h&&(k.attr("aria-selected","true"),l.addClass("oj-hover"),c.attr("aria-activedescendant",w));l.append(k);c.append(l)}this.Ph.append(c);f(".oj-listbox-result",c).on("mousemove",function(){var a=f(this);a.hasClass("oj-disabled")||(f(".oj-hover",c).removeClass("oj-hover"),a.addClass("oj-hover"),c.attr("aria-activedescendant",a.children()[0].id))});var t=this;c.on("click",function(a){var b=f(a.target);b.hasClass("oj-disabled")||void 0!==b.attr("aria-disabled")||(t.D6(a),t.hide())}).on("keydown",function(a){t.mwa(a)})},
poa:function(a){var d=[],c=this.Rd();if(a){var e=this.options.timePicker.timeIncrement.split(":"),f=b.Sb,g=this.so(),h=f.dateToLocalIso(a),k=g?this.Xn.widget.options.min:this.options.min,g=g?this.Xn.widget.options.max:this.options.max,k=k?f.isoToLocalDate(f._minMaxIsoString(k,h)):null,g=g?f.isoToLocalDate(f._minMaxIsoString(g,h)):null;if(4===e.length){var h=parseInt(e[0].substring(0),10),l=parseInt(e[1],10),t=parseInt(e[2],10),e=parseInt(e[3],10),x=new Date(a),y="";do y=c.format(f.dateToLocalIso(x)),
d.push({label:y,value:y,minMaxRange:this.iqa(x,k,g)}),x.setHours(x.getHours()+h),x.setMinutes(x.getMinutes()+l),x.setSeconds(x.getSeconds()+t),x.setMilliseconds(x.getMilliseconds()+e);while(x.getDate()===a.getDate())}else throw Error("timeIncrement value should be in the format of hh:mm:ss:SS");}return d},mwa:function(a){if(this.UB()){var b=f.ui.keyCode,d=!1;switch(a.keyCode){case b.TAB:this.hide();break;case b.ESCAPE:this.hide();this.element.focus();d=!0;break;case b.UP:this.y6(a,"prev");d=!0;break;
case b.DOWN:this.y6(a,"next");d=!0;break;case b.ENTER:this.D6(a),d=!0}if(d)return a.preventDefault(),a.stopPropagation(),!1}},y6:function(a,b){var d=f(".oj-hover",this.Ph),c=f("ul",this.Ph),e=null;1===d.length?(e=d[b](),1===e.length&&d.removeClass("oj-hover")):e=f(c.children()[0]);e&&1===e.length&&(e.addClass("oj-hover"),c.attr("aria-activedescendant",e.children()[0].id),this.d0(e))},D6:function(a){var b=this.Ph,d=f("[aria-selected]",b),c=f("ul",b),b=f(".oj-hover div",b);1===b.length&&(1===d.length&&
(d.removeAttr("aria-selected"),d.parent().removeClass("oj-hover")),b.attr("aria-selected","true"),b.parent().addClass("oj-hover"),this.hide(),this.Vj(b.attr("data-value")),this.Lc(b.attr("data-value"),a),c.attr("aria-activedescendant",b[0].id),this.element.focus(),this.so()&&this.Xn.widget.hide())},uR:function(a){this.Gq()&&this._superApply(arguments)},show:function(){if(!this.options.disabled&&!this.options.readOnly){this.so()&&this.Xn.widget.hide();this.XF();var a=this.Ph,d=this.uH;a.width(this.element.parent().width());
a.css({position:"relative"});var c=b.ad.$h({my:"start top",at:"start bottom",of:this.element,collision:"flipfit flipfit"},this.vl);d.ojPopup("open",this.cT,c);a.find("[aria-selected]").parent().addClass("oj-hover")}},hide:function(){this.UB()&&(this.uH.ojPopup("close"),this.element.focus())},refresh:function(){this.le&&this.le.find("."+this.JM).attr("title",this.NP());return this._superApply(arguments)||this},Vj:function(a){this.Gq()&&this._superApply(arguments);this.UB()&&this.XF()},Lc:function(a,
d,c){if(this.so()){this._super(a,null,c);try{var e=this.Rd().parse(a),f=b.Sb,h=this.Xn.widget,k=h.Xaa(),l=k?f.isoToLocalDate(k):new Date,w=g(e?f.isoToLocalDate(e):new Date,new Date(l)),t=f.dateToLocalIso(w);l.getTime()!=w.getTime()&&h.rCa(t,d)}catch(x){}}else this._superApply(arguments)},kz:function(){return this.Gq()},Gq:function(){return!this.so()||this.e5()},_GetDefaultStyleClass:function(){return"oj-inputtime"},Bv:function(){return this.options.value||""},mz:function(){var a=this._superApply(arguments);
null==this.options.min&&null==this.options.max||this.so()||(this.KS[b.ce.VALIDATOR_TYPE_DATETIMERANGE]=d(this.options,this.Rd()));return f.extend(this.KS,a)},Rd:function(){return this.options.converter?this._superApply(arguments):f.oj.ojInputTime.prototype.options.converter},d0:function(a,b){var d=a.parent();b&&this.l9&&f(d).scrollTop(this.l9);var c=f(d).scrollTop(),e=c+f(d).height(),g=a[0].offsetTop,h=g+f(a).height();g<c?f(d).scrollTop(g):h>e&&f(d).scrollTop(h-f(d).height())},so:function(){return null!==
this.Xn},e5:function(){return this.Xn.inline},Tj:function(){this.hide()},Nn:function(){this.hide()},getNodeBySubId:function(a){var b=null,d=a&&a.subId;if(d)switch(d){case "oj-listbox-drop":b=this.Ph[0];break;case "oj-inputdatetime-time-icon":b=f(".oj-inputdatetime-time-icon",this.le)[0];break;case "oj-inputdatetime-time-input":b=this.element[0];break;default:b=null}return b||this._superApply(arguments)},getSubIdByNode:function(a){var b=f(".oj-inputdatetime-time-icon",this.le),d=null;a===this.Ph[0]?
d="oj-listbox-drop":a===b[0]?d="oj-inputdatetime-time-icon":a===this.element[0]&&(d="oj-inputdatetime-time-input");return d||this._superApply(arguments)},widget:function(){return this.Gq()?this._super():this.Xn.widget.widget()}});b.Ja("oj.ojInputDateTime",f.oj.ojInputDate,{version:"1.0.0",widgetEventPrefix:"oj",_WIDGET_CLASS_NAMES:"oj-inputdatetime-date-time oj-component oj-inputdatetime",_INPUT_HELPER_KEY:"inputHelpBoth",options:{converter:b.ya.Jo(b.Zl.CONVERTER_TYPE_DATETIME).createConverter({day:"2-digit",
month:"2-digit",year:"2-digit",hour:"2-digit",hour12:!0,minute:"2-digit"}),pickerAttributes:null,timePicker:{timeIncrement:"00:30:00:00"}},mE:function(){this._super();this.qx=this.element;this.vH=this.dI=this.Oh=null},_ComponentCreate:function(){var a=this._super(),d=this.I3(this.Rd());if(null===d)throw Error("Please use ojInputDate if you do not have time portion");if(this.jf){var c=f("\x3cinput type\x3d'text'\x3e");c.insertAfter(this.element);this.qx=c}for(var c="title placeholder disabled required readOnly pickerAttributes".split(" "),
e={},g=0,h=c.length;g<h;g++)e[c[g]]=this.options[c[g]];this.Oh=this.qx.ojInputTime(f.extend(e,{converter:d,displayOptions:{converterHint:"none",title:"none",messages:this.options.displayOptions.messages},value:b.Sb.dateToLocalIso(this.fG()),timePicker:this.options.timePicker,datePickerComp:{widget:this,inline:this.jf}}));return a},_setOption:function(a,b,d){var c=this._superApply(arguments);"value"===a&&(this.vH=b);this.Oh&&(a in{disabled:!0,readOnly:!0}?this.Oh.ojInputTime("option",a,b):"timePicker"===
a?this.Oh.ojInputTime("option","timePicker.timeIncrement",b.timeIncrement):"converter"===a&&(this.dI=null,this.Oh.ojInputTime("option",a,this.I3(this.Rd()))));return c},_destroy:function(){var a=this._super();this.Oh.ojInputTime("destroy");this.jf&&this.qx.remove();return a},I3:function(a){if(null!==this.dI)return this.dI;a=a.resolvedOptions();var d={},c="hour hour12 minute second millisecond timeFormat".split(" "),e,g;e=0;for(g=c.length;e<g;e++)c[e]in a&&("timeFormat"===c[e]&&(d.formatType="time"),
d[c[e]]=a[c[e]]);if(f.isEmptyObject(d))throw Error("Plase use ojInputDateTime's converter is lacking the time portion");return this.dI=a=b.ya.Jo(b.Zl.CONVERTER_TYPE_DATETIME).createConverter(d)},rCa:function(a,b){this.Vj(this.Rd().format(a));this.Lc(a,b)},Xaa:function(){if(this.isValid())return this.options.value;if(this.vH)try{return this.Rd().parse(this.vH)}catch(a){return this.options.value}else return null},Lc:function(a,b,d){this._superApply(arguments);this.vH=a},pH:function(a){var b=f.ui.keyCode,
d=!1;switch(a.keyCode){case b.UP:case b.DOWN:a.shiftKey&&(this.Lc(this.Eh(),a),this.Oh.ojInputTime("show"),d=!0)}return d?(a.preventDefault(),a.stopPropagation(),!1):this._superApply(arguments)},show:function(){this.Oh.ojInputTime("hide");return this._super()},showTimePicker:function(){this.hide();return this.Oh.ojInputTime("show")},hideTimePicker:function(){return this.Oh.ojInputTime("hide")},refresh:function(){var a=this._superApply(arguments)||this;this.Oh.ojInputTime("refresh");return a},getNodeBySubId:function(a){var b=
a&&a.subId,d=null;b&&("oj-listbox-drop"===b||"oj-inputdatetime-time-icon"===b?d=this.Oh.ojInputTime("getNodeBySubId",a):"oj-inputdatetime-date-input"===b&&(d=this.jf?this.qx[0]:this.element[0]));return d||this._superApply(arguments)},getSubIdByNode:function(a){var b=null;this.jf?a===this.qx[0]&&(b="oj-inputdatetime-date-input"):a===this.element[0]&&(b="oj-inputdatetime-date-input");return b||this.Oh.ojInputTime("getSubIdByNode",a)||this._superApply(arguments)},Rd:function(){return this.options.converter?
this._superApply(arguments):f.oj.ojInputDateTime.prototype.options.converter},Tj:function(){this._superApply(arguments);this.Oh&&this.hideTimePicker()},Nn:function(){this._superApply(arguments);this.Oh&&this.hideTimePicker()},_GetMessagingLauncherElement:function(){return this.jf?this.qx:this._super()},_GetDefaultStyleClass:function(){return"oj-inputdatetime"},iE:function(){return"oj-ojInputDate"}})});