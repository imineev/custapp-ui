/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","hammerjs","promise","ojs/ojjquery-hammer","ojs/ojcomponentcore"],function(b,f,a){b.o={};o_("OffcanvasUtils",b.o,b);b.o.NL="oj-offcanvasEdge";b.o.Ln="oj-offcanvas";b.o.PL="oj-mediaQueryListener";b.o.rY="oj-offcanvasHammer";b.o.Vy="selector";b.o.Fy="start";b.o.Ey="end";b.o.SW="top";b.o.LK="bottom";b.o.Cy="displayMode";b.o.Dy="push";b.o.RW="overlay";b.o.Yea="modality";b.o.LCa="none";b.o.Zea="modal";b.o.DD="_dismissHandler";b.o.jL="_openPromise";b.o.By="_closePromise";b.o.FD=
"_glassPane";b.o.HX="_surrogate";b.o.oL="data-oj-surrogate-id";b.o.ifa="oj-offcanvas-outer-wrapper";b.o.sX="oj-offcanvas-open";b.o.Mp="oj-offcanvas-transition";b.o.Hea="oj-offcanvas-glasspane";b.o.ZW="oj-offcanvas-glasspane-dim";b.o.OCa="oj-offcanvas-generated";b.o.Kva={start:"oj-offcanvas-shift-start",end:"oj-offcanvas-shift-end",top:"oj-offcanvas-shift-down",bottom:"oj-offcanvas-shift-up"};b.o.dma={start:"oj-offcanvas-start",end:"oj-offcanvas-end",top:"oj-offcanvas-top",bottom:"oj-offcanvas-bottom"};
b.o.hna=function(a){a=a[b.o.Cy];a!==b.o.RW&&a!==b.o.Dy&&(a=b.Hf.gn("offcanvas").displayMode);return a};b.o.ij=function(a){return f(a[b.o.Vy])};b.o.WQ=function(a){return a[b.o.Yea]===b.o.Zea};b.o.Hq=function(a){return a.hasClass(b.o.sX)};b.o.vw=function(a){return a.closest("."+b.o.ifa)};b.o.ZF=function(a){var c=b.o.ij(a);return a[b.o.Cy]===b.o.Dy?c.parent():c};b.o.x3=function(a){var c=b.o.Kva[a];if(!c)throw"Invalid edge: "+a;return c};b.o.kf=function(){return"rtl"===b.A.So()};b.o.sS=function(a,b){a.css({"-webkit-transform":b,
"-ms-transform":b,transform:b})};b.o.SH=function(a,c,e){c=c===b.o.Ey;b.o.kf()&&(c=!c);b.o.sS(a,"translate3d("+(c?"-":"")+e+", 0, 0)")};b.o.Bva=function(a,c,e){b.o.sS(a,"translate3d(0, "+(c===b.o.LK?"-":"")+e+", 0)")};b.o.J7=function(a){var c=a.edge;a=b.o.ij(a);c&&c.length||(c=a.hasClass("oj-offcanvas-start")?b.o.Fy:a.hasClass("oj-offcanvas-end")?b.o.Ey:a.hasClass("oj-offcanvas-top")?b.o.SW:a.hasClass("oj-offcanvas-bottom")?b.o.LK:b.o.Fy);f.data(a[0],b.o.NL,c);return c};b.o.ZO=function(a){return f.data(a[0],
b.o.NL)};b.o.eI=function(a,c,e){var f=a[b.o.Cy],h=b.o.ij(a),k=b.o.sX,f=f===b.o.RW?b.o.Mp+" oj-offcanvas-overlay":b.o.Mp;e?(h.addClass(k),c.addClass(f)):(a=a.tabindex,void 0===a?h.removeAttr("tabindex"):h.attr("tabindex",a),h.removeClass(k),c.removeClass(f))};b.o.Mm=function(a){var c=b.o.ij(a),e=c.find(":focusable");0<e.length?a=e[0]:(e=c.attr("tabindex"),void 0!==e&&(a.tabindex=e),c.attr("tabindex","-1"),a=c);b.te.oC(a)};b.o.Qqa=function(a){return"none"!=a.autoDismiss};b.o.k6=function(a,b){function e(){b();
a.off("transitionend webkitTransitionEnd otransitionend oTransitionEnd",e)}a.on("transitionend webkitTransitionEnd otransitionend oTransitionEnd",e)};b.o.Z6=function(a){b.o.jT(a);if(b.o.Qqa(a)){var c=b.o.ij(a),e=a[b.o.DD]=function(e){var g=e.target;b.A.Kba(e)||"focus"===e.type&&!f(g).is(":focusable")||(null==f.data(c[0],b.o.Ln)?b.o.jT(a):b.A.KAa(c[0],g)||b.o.close(a))},g=document.documentElement;b.A.Zd()&&g.addEventListener("touchstart",e,!0);g.addEventListener("mousedown",e,!0);g.addEventListener("focus",
e,!0)}b.o.BH(a)};b.o.jT=function(a){var c=a[b.o.DD];if(c){var e=document.documentElement;b.A.Zd()&&e.removeEventListener("touchstart",c,!0);e.removeEventListener("mousedown",c,!0);e.removeEventListener("focus",c,!0);delete a[b.o.DD];a[b.o.DD]=null}b.o.mI(a)};b.o.BH=function(d){if(b.A.Zd()){var c=d[b.o.Vy],e=f(c),g=b.o.ZO(e),h,k;g===b.o.Fy&&!b.o.kf()||g===b.o.Ey&&b.o.kf()?(k={recognizers:[[a.Swipe,{direction:a.DIRECTION_LEFT}]]},h="swipeleft"):g===b.o.Fy&&b.o.kf()||g===b.o.Ey&&!b.o.kf()?(k={recognizers:[[a.Swipe,
{direction:a.DIRECTION_RIGHT}]]},h="swiperight"):g===b.o.SW?(k={recognizers:[[a.Swipe,{direction:a.DIRECTION_UP}]]},h="swipeup"):g===b.o.LK&&(k={recognizers:[[a.Swipe,{direction:a.DIRECTION_DOWN}]]},h="swipedown");e=e.An(k).on(h,function(a){a.preventDefault();b.o.close(d)});f.data(f(c)[0],b.o.rY,{event:h,hammer:e})}};b.o.mI=function(a){a=b.o.ij(a);0<a.length&&(a=f.data(a[0],b.o.rY))&&a.hammer.off(a.event)};b.o.u_=function(a){var c=b.o.ij(a);if(f.data(c[0],b.o.Ln)===a){b.o.ZO(c);var e=b.o.ZF(a);b.o.eI(a,
e,!1);b.o.Xta(a);b.o.jT(a);c.trigger("ojclose",a);f.removeData(c[0],b.o.Ln)}};b.o.v8=function(a,c,e){var g=f(a);(c=!!c)&&b.o.Hq(g)&&b.o.Vn(a,!1);g.toggleClass(b.o.dma[e],!c)};b.o.aCa=function(a){var c=a.query;if(null!==c){var e=a[b.o.Vy],c=window.matchMedia(c),g=b.o.J7(a);a=function(a){b.o.v8(e,a.matches,g)};c.addListener(a);b.o.v8(e,c.matches,g);f.data(f(e)[0],b.o.PL,{mqList:c,mqListener:a})}};o_("OffcanvasUtils.setupResponsive",b.o.aCa,b);b.o.oCa=function(a){a=b.o.ij(a);var c=f.data(a[0],b.o.PL);
c&&(c.mqList.removeListener(c.mqListener),f.removeData(a[0],b.o.PL))};o_("OffcanvasUtils.tearDownResponsive",b.o.oCa,b);b.o.open=function(a){var c=b.o.ij(a),e=f.data(c[0],b.o.Ln);if(e){if(e[b.o.By])return e[b.o.By];if(e[b.o.jL])return e[b.o.jL]}var e=new Promise(function(e,g){b.l.Ce(c,jQuery);var l=b.o.J7(a),p=f.Event("ojbeforeopen");c.trigger(p,a);if(!1===p.result)g("ojbeforeopen veto");else{var n,p=b.o.hna(a),m=f.extend({},a);m[b.o.Cy]=p;f.data(c[0],b.o.Ln,m);var q;q=b.o.ZF(m);b.l.Ce(q,jQuery);
b.o.eI(m,q,!0);l===b.o.Fy||l===b.o.Ey?(n=void 0===n?c.outerWidth(!0)+"px":n,p===b.o.Dy&&b.o.SH(q,l,n)):(n=void 0===n?c.outerHeight(!0)+"px":n,p===b.o.Dy&&b.o.Bva(q,l,n));var s;window.setTimeout(function(){s=b.o.vw(c);b.l.Ce(s,jQuery);s.addClass(b.o.x3(l))},10);b.o.$ia(m,c);b.o.k6(q,function(){q.removeClass(b.o.Mp);b.o.Mm(m);c.trigger("ojopen",m);b.o.Z6(m);e(!0)})}}),g=f.data(c[0],b.o.Ln);g&&(g[b.o.jL]=e);return e};o_("OffcanvasUtils.open",b.o.open,b);b.o.close=function(a){return b.o.Vn(a[b.o.Vy],
!0)};o_("OffcanvasUtils.close",b.o.close,b);b.o.Vn=function(a,c){var e=f(a);b.l.Ce(e,jQuery);var g=f.data(e[0],b.o.Ln);if(g&&g[b.o.By])return g[b.o.By];var h=new Promise(function(h,l){if(b.o.Hq(e)){a!=g[b.o.Vy]&&h(!0);var p=b.o.ZO(e),n=g[b.o.Cy],p=b.o.x3(p),m=b.o.vw(e);b.l.Ce(m,jQuery);m.hasClass(p)||h(!0);var q=f.Event("ojbeforeclose");e.trigger(q,g);if(!1===q.result)l("beforeClose veto");else{q=b.o.ZF(g);if(c){var s=0,r=function(){b.o.u_(g);0!==s&&window.cancelAnimationFrame(s);h(!0)},u=function(){null==
e[0].offsetParent?r():s=window.requestAnimationFrame(u)};b.o.k6(q,r);s=window.requestAnimationFrame(u)}n===b.o.Dy&&b.o.sS(q,"");m.removeClass(p);b.o.WQ(g)&&g[b.o.FD].removeClass(b.o.ZW);c?q.addClass(b.o.Mp):(b.o.u_(g),h(!0))}}else h(!0)});(g=f.data(e[0],b.o.Ln))&&(g[b.o.By]=h);return h};b.o.toggle=function(a){var c=b.o.ij(a);b.l.Ce(c,jQuery);return b.o.Hq(c)?b.o.close(a):b.o.open(a)};o_("OffcanvasUtils.toggle",b.o.toggle,b);b.o.uia=function(a){var c=f("\x3cdiv\x3e");c.addClass(b.o.Hea);c.attr("role",
"presentation");c.attr("aria-hidden","true");c.appendTo(a.parent());c.on("keydown keyup keypress mousedown mouseup mouseover mouseout click focusin focus",function(a){a.stopPropagation();a.preventDefault()});return c};b.o.UN=function(a){var c=f("\x3cscript\x3e"),e=a.attr("id");e?(e=[e,"surrogate"].join("_"),c.attr("id",e)):e=c.uniqueId();c.insertBefore(a);a.attr(b.o.oL,e);return c};b.o.awa=function(a,c){a[b.o.HX]=b.o.UN(c);c.appendTo(c.parent())};b.o.Aua=function(a){var c=b.o.ij(a);a=a[b.o.HX];c&&
a&&c.attr(b.o.oL)===a.attr("id")&&(c.insertAfter(a),c.removeAttr(b.o.oL),a.remove())};b.o.$ia=function(a,c){b.o.WQ(a)&&(a[b.o.FD]=b.o.uia(c),b.o.awa(a,c),window.setTimeout(function(){a[b.o.FD].addClass(b.o.ZW)},0))};b.o.Xta=function(a){b.o.WQ(a)&&(a[b.o.FD].remove(),b.o.Aua(a))};b.o.Gda=function(d){var c,e,g,h,k,l,p,n,m,q,s,r;null==f(d).attr("oj-data-pansetup")&&(f(d).attr("oj-data-pansetup","true"),d.displayMode="push",c=b.o.ij(d),e=d.size,null==e&&(e=c.outerWidth()),g=b.o.vw(c),h=b.o.ZF(d),k={recognizers:[[a.Pan,
{direction:a.DIRECTION_HORIZONTAL}]]},l=!1,f(g).An(k).on("panstart",function(e){p=null;switch(e.gesture.direction){case a.DIRECTION_LEFT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(p=b.o.kf()?"end":"start");break;case a.DIRECTION_RIGHT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(p=b.o.kf()?"start":"end")}null!=p&&(n={direction:p,distance:Math.abs(e.gesture.deltaX)},m=f.Event("ojpanstart"),c.trigger(m,n),m.isDefaultPrevented()||(d._closePromise=null,b.o.eI(d,h,!0),l=!0,e.stopPropagation()))}).on("panmove",
function(a){l&&(q=Math.abs(a.gesture.deltaX),c.css("width",q),h.removeClass(b.o.Mp),b.o.SH(h,"start",a.gesture.deltaX+"px"),n={direction:p,distance:q},m=f.Event("ojpanmove"),c.trigger(m,n),a.stopPropagation())}).on("panend",function(a){l&&(l=!1,q=Math.abs(a.gesture.deltaX),n={distance:q},m=f.Event("ojpanend"),c.trigger(m,n),a.stopPropagation(),m.isDefaultPrevented()?(r=function(){b.o.eI(d,h,!1);h.removeClass(b.o.Mp);h.off("transitionend webkitTransitionEnd otransitionend oTransitionEnd",r)},h.on("transitionend webkitTransitionEnd otransitionend oTransitionEnd",
r),h.addClass(b.o.Mp),b.o.SH(h,"start","0px")):(h.addClass(b.o.Mp),c.css("width",e+"px"),s=d.edge,null==s&&(s=c.hasClass("oj-offcanvas-start")?"start":"end"),b.o.SH(h,s,e+"px"),f.data(c[0],b.o.Ln,d),f.data(c[0],b.o.NL,s),b.o.Z6(d)))}))};o_("OffcanvasUtils.setupPanToReveal",b.o.Gda,b);b.o.Tda=function(a){a=b.o.ij(a);f(b.o.vw(a)).off("panstart panmove panend")};o_("OffcanvasUtils.tearDownPanToReveal",b.o.Tda,b)});