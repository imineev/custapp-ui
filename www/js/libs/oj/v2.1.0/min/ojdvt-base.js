/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojvalidation","ojs/internal-deps/dvt/DvtToolkit","promise"],function(b,f,a,d,c){function e(a,b){this.Dsa=b;this.Cua=a;this.zla="/"}b.hi=function(a){this.Init(a)};o_("AttributeGroupHandler",b.hi,b);b.b.la(b.hi,b.b,"oj.AttributeGroupHandler");b.hi.prototype.Init=function(a){b.hi.p.Init.call(this);this.ZA=a?a:{};this.Lz={};this.wI=0;this.XD=this.lu();for(var d in this.ZA)a=this.XD.indexOf(this.ZA[d]),-1!==a&&this.XD.splice(a,1)};b.hi.prototype.lu=
function(){return[]};b.b.g("AttributeGroupHandler.prototype.getValueRamp",{lu:b.hi.prototype.lu});b.hi.prototype.Dd=function(a){if(this.ZA[a])return this.ZA[a];this.Lz[a]||(this.Lz[a]=this.XD[this.wI],this.wI==this.XD.length-1?this.wI=0:this.wI++);return this.Lz[a]};b.b.g("AttributeGroupHandler.prototype.getValue",{Dd:b.hi.prototype.Dd});b.hi.prototype.Y$=function(){var a=[],b;for(b in this.Lz)a.push({category:b,value:this.Lz[b]});return a};b.b.g("AttributeGroupHandler.prototype.getCategoryAssignments",
{Y$:b.hi.prototype.Y$});b.hi.prototype.N9=function(a,b){this.ZA[a]=b};b.b.g("AttributeGroupHandler.prototype.addMatchRule",{N9:b.hi.prototype.N9});b.$y=function(a){this.Init(a)};o_("ShapeAttributeGroupHandler",b.$y,b);b.b.la(b.$y,b.hi,"oj.ShapeAttributeGroupHandler");b.$y.Mz="square circle diamond plus triangleDown triangleUp human".split(" ");b.$y.prototype.lu=function(){return b.$y.Mz.slice()};e.prototype.uua=function(a,b,d,c){for(var e={};a&&-1<b.indexOf(d);){var f=b.substring(0,b.indexOf(d));
c&&void 0===a[f]&&(a[f]={});a=a[f];b=b.substring(b.indexOf(d)+1,b.length)}a&&(e.object=a,e.parameter=b);return e};e.prototype.D7=function(a){void 0===this.YA&&(a=this.uua(this.Cua,this.Dsa,this.zla,a),this.YA=a.object,this.xR=a.parameter)};e.prototype.Dd=function(){this.D7(!1);return void 0===this.YA?void 0:this.YA[this.xR]};e.prototype.Fda=function(a,b){this.D7(!0);if(b||!this.YA[this.xR])this.YA[this.xR]=a};var g={CSS_TEXT_PROPERTIES:function(a){var b={};a&&(a.hasClass("oj-gaugeMetricLabel")&&a.hasClass(a.parentNode,
"oj-ledGauge")?(b["font-size"]=!0,b.color=!0):a.hasClass(a,"oj-chartSliceLabel")?b.color=!0:a.hasClass("oj-treemap-node-header")&&(b["font-weight"]=!0));return g.Bja(a,b)},CSS_BACKGROUND_PROPERTIES:function(a){return g.sja(a)},CSS_URL:function(a){return g.Csa(a)},LY:"rgb(254, 0, 254)",uga:"Times",vga:"1px",NY:"1",MY:"normal",nga:4,ZH:{},rya:function(a,b){return a.css(b)},Csa:function(a){return(a=a.css("background-image"))&&-1!==a.indexOf("url(")?a.slice(a.indexOf("url(")+4,a.length-1).replace(/"/g,
""):a},sja:function(a){var b={};a.css("border-top-color")&&(b["border-color"]=a.css("border-top-color"));a.css("border-width")&&a.css("border-style")&&"none"!=a.css("border-style")&&(b["border-width"]=a.css("border-width"));a.css("background-color")&&(b["background-color"]=a.css("background-color"));return b},Bja:function(a,b){var d={},c=a.css("font-family");c&&c!==g.uga&&(d["font-family"]=c.replace(/"/g,"'"));c=a.css("font-size");!c||-1<c.indexOf("px")&&parseFloat(c)<g.nga||b["font-size"]||(d["font-size"]=
c);(c=a.css("font-weight"))&&c!==g.NY&&!b["font-weight"]&&(d["font-weight"]=c);(c=a.css("color"))&&c!==g.LY&&!b.color&&(d.color=c);(c=a.css("font-style"))&&c!==g.MY&&(d["font-style"]=c);return d},qBa:function(a,b,d,c){var e=f(document.createElement("div"));e.attr("style","display:none;");a.append(e);a="";for(var m=0;m<d.length;m++)a=a+d[m]+" ";e.attr("class",a);f(document.body).append(e);d=f(document.createElement("div"));d.css("font-size",g.vga);d.css("color",g.LY);d.css("font-weight",g.NY);d.css("font-style",
g.MY);e.append(d);for(var q in c)a=c[q],a instanceof Array||(a=[a]),g.ata(d,b,q,a);e.remove()},ata:function(a,b,d,c){g.ZH[d]||(g.ZH[d]={});for(var n=null,m=0;m<c.length;m++){var q=c[m],s=q.property;if(s){var r=g.ZH[d][s];"undefined"==typeof r&&(n||(n=f(document.createElement("div")),n.addClass(d),a.append(n)),r=g.vua(n,s),g.ZH[d][s]=r);if(null!=r){var q=new e(b,q.path),u=g[s];if(null!=u){var v=q.Dd();if("CSS_URL"!==s){s="";if(null!=v){for(var w in r)-1===v.indexOf(w)&&(s+=w+":"+r[w]+";");s+=v}else for(w in r)s+=
w+":"+r[w]+";";r=s}}q.Fda(r,null!=u)}}}},vua:function(a,b){var d=g[b],d=d?d(a):g.rya(a,b);return null==d||"string"==typeof d&&""==d.replace(/^\s+/g,"")?null:d}};b.Ja("oj.dvtBaseComponent",f.oj.baseComponent,{_ComponentCreate:function(){this._super();this.jB=this.ZR=0;this.Jm=null;this.NR=f(document.createElement("div"));this.NR.attr("style","visibility:hidden;");this.element.append(this.NR);var a=this.element[0].parentElement;this.Hh=a&&a.sO?a.sO:new c.Context(this.element[0],null,this.NR[0]);this.Hh.setReadingDirection(this.Ic());
this.Hh.setTooltipAttachedCallback(b.Components.nh);this.Hh.setTooltipStyleClass("oj-dvt-tooltip");this.Hh.setDatatipStyleClass("oj-dvt-datatip");f(document.body).hasClass("oj-hicontrast")&&c.Agent.setHighContrast(!0);this.ra=this.Fg(this.Hh,this.jm,this);this.Hh.getStage().addChild(this.ra);!1!==c.requireJS&&(this.nva(),this.E6());this.Fv();this.options._environment="jet";this.options._widgetConstructor=b.Components.gh(this.element)},Eg:function(){this._super();this.element.attr("tabIndex",0);this.Fh();
"off"!=this.options.trackResize&&this.PM()},refresh:function(){this._super();this.Hh.setReadingDirection(this.Ic());this.E6();this.Fh()},getNodeBySubId:function(a){var b=this.ra&&this.ra.getAutomation?this.ra.getAutomation():null;if(b)return a=this.Nj(a),b.getDomElementForSubId(a)},getSubIdByNode:function(a){var b=this.ra&&this.ra.getAutomation?this.ra.getAutomation():null;if(b)return(a=b.getSubIdForDomElement(a))?this.Dh(a):null},Nj:function(){return null},Dh:function(){return null},yE:function(){for(var a=
this.Jf(),b=0;b<a.length;b++)this.element.addClass(a[b]);g.qBa(this.element,this.options,this.Jf(),this.Oj())},Jf:function(){return["oj-dvtbase"]},Oj:function(){return{"oj-dvt-no-data-message":{path:"_statusMessageStyle",property:"CSS_TEXT_PROPERTIES"}}},Qj:function(){return[]},Rj:function(){var a=this.options.translations,a={"DvtUtilBundle.CLEAR_SELECTION":a.labelClearSelection,"DvtUtilBundle.COLON_SEP_LIST":a.labelAndValue,"DvtUtilBundle.INVALID_DATA":a.labelInvalidData,"DvtUtilBundle.NO_DATA":a.labelNoData,
"DvtUtilBundle.DATA_VISUALIZATION":a.labelDataVisualization,"DvtUtilBundle.STATE_SELECTED":a.stateSelected,"DvtUtilBundle.STATE_UNSELECTED":a.stateUnselected,"DvtUtilBundle.STATE_MAXIMIZED":a.stateMaximized,"DvtUtilBundle.STATE_MINIMIZED":a.stateMinimized,"DvtUtilBundle.STATE_EXPANDED":a.stateExpanded,"DvtUtilBundle.STATE_COLLAPSED":a.stateCollapsed,"DvtUtilBundle.STATE_ISOLATED":a.stateIsolated,"DvtUtilBundle.STATE_HIDDEN":a.stateHidden,"DvtUtilBundle.STATE_VISIBLE":a.stateVisible,"DvtUtilBundle.SCALING_SUFFIX_THOUSAND":a.labelScalingSuffixThousand,
"DvtUtilBundle.SCALING_SUFFIX_MILLION":a.labelScalingSuffixMillion,"DvtUtilBundle.SCALING_SUFFIX_BILLION":a.labelScalingSuffixBillion,"DvtUtilBundle.SCALING_SUFFIX_TRILLION":a.labelScalingSuffixTrillion,"DvtUtilBundle.SCALING_SUFFIX_QUADRILLION":a.labelScalingSuffixQuadrillion},d=b.ab.vC("abbreviated");a["DvtUtilBundle.MONTH_SHORT_JANUARY"]=d[0];a["DvtUtilBundle.MONTH_SHORT_FEBRUARY"]=d[1];a["DvtUtilBundle.MONTH_SHORT_MARCH"]=d[2];a["DvtUtilBundle.MONTH_SHORT_APRIL"]=d[3];a["DvtUtilBundle.MONTH_SHORT_MAY"]=
d[4];a["DvtUtilBundle.MONTH_SHORT_JUNE"]=d[5];a["DvtUtilBundle.MONTH_SHORT_JULY"]=d[6];a["DvtUtilBundle.MONTH_SHORT_AUGUST"]=d[7];a["DvtUtilBundle.MONTH_SHORT_SEPTEMBER"]=d[8];a["DvtUtilBundle.MONTH_SHORT_OCTOBER"]=d[9];a["DvtUtilBundle.MONTH_SHORT_NOVEMBER"]=d[10];a["DvtUtilBundle.MONTH_SHORT_DECEMBER"]=d[11];return a},E6:function(){var a=this.Rj();c.Bundle.addLocalizedStrings(a)},nva:function(){var a={};a.numberConverterFactory=b.ya.haa("number");a.dateToIsoConverter=function(a){return a instanceof
Date?b.Sb.dateToLocalIso(a):a};a.isoToDateConverter=function(a){return"string"==typeof a?b.Sb.isoToLocalDate(a):a};this.Hh.setLocaleHelpers(a)},_destroy:function(){this.Hh.hideTooltips();this.ra.destroy&&this.ra.destroy();this.WR();this.element.children().remove();this.element.removeAttr("role").removeAttr("tabIndex");for(var a=this.Jf(),b=0;b<a.length;b++)this.element.removeClass(a[b]);this._super()},_setOptions:function(a,b){this._superApply(arguments);var d=this.options.trackResize;"off"==d&&this.ik?
this.WR():"off"==d||this.ik||this.PM();if(!this.I_){var c=!1,e=this.Qj(),g=["highlightedCategories","selection","dataCursorPosition"];f.each(a,function(a){if(0>e.indexOf(a)&&0>g.indexOf(a))return c=!0,!1});c?this.Fh():(void 0!==a.highlightedCategories&&this.ra.highlight(a.highlightedCategories),void 0!==a.selection&&this.ra.select(a.selection),void 0!==a.dataCursorPosition&&this.ra.positionDataCursor&&this.ra.positionDataCursor(a.dataCursorPosition))}},Fg:function(){return null},jm:function(a){var b=
a.type;"selection"===b?this.we("selection",a.selection):"categoryHide"===b||"categoryShow"===b?this.we("hiddenCategories",a.hiddenCategories):"categoryHighlight"===b?this.we("highlightedCategories",a.categories):"optionChange"===b?this.we(a.key,a.value,a.optionMetadata):"touchHoldRelease"===b&&this.options.contextMenu?this.Jg(f.Event(a.nativeEvent),"touch"):"ready"===b&&0===this.jB&&(this.JR&&this.JR(!0),this.H6=!0,this.IR=this.JR=null)},PM:function(){this.ik||(this.ik=this.kg.bind(this),b.A.uj(this.element[0],
this.ik,250))},WR:function(){this.ik&&(b.A.Gk(this.element[0],this.ik),this.ik=null)},kg:function(){var a=this.element.width(),b=this.element.height();(null==this.yI||null==this.MG||5<=Math.abs(a-this.yI)+Math.abs(b-this.MG))&&this.Fh(!0)},Fv:function(){},Fh:function(a){this.H6=!1;this.Hh.isReadyToRender()?(this.yI=this.nE()?null:this.element.width(),this.MG=this.nE()?null:this.element.height(),this.options._width=this.yI,this.options._height=this.MG,this.options._locale=b.ha.Sh(),this.yE(),this.ZR++,
a?this.Jm||this.YR(null):0===this.tua().length&&this.YR(this.options),this.aS=!1):this.aS=!0},On:function(){this._super();this.aS&&this.Fh()},Vp:function(){this._super();this.aS&&this.Fh()},Tj:function(){this._super();this.Hh.hideTooltips()},Nn:function(){this._super();this.Hh.hideTooltips()},we:function(a,b,d){this.I_=!0;this.option(a,b,{_context:{zd:!0,Ju:d,lb:!0}});this.I_=!1},Hg:function(a,b,d){"touch"!==d&&("keyboard"===d?this.Jg(b,d,{position:{of:this.ra.getKeyboardFocus()}}):this._super(a,
b,d))},lz:function(a){return(a=b.Components.gh(a)("instance"))?a.ra:null},ni:function(a){if(a){var b={},d;for(d in a)this.tia(a,d,b);Object.defineProperties(a,b)}},tia:function(a,b,d){var c=("selected"==b?"is":"get")+b.charAt(0).toUpperCase()+b.slice(1);d[c]={value:function(){return a[b]}}},ts:function(a){for(var b="",d=0;d<a.length;d++)b+="["+a[d]+"]";return b},Mn:function(a){for(var b=[],d=0;0<a.indexOf("[",d);){var c=a.indexOf("[",d)+1,d=a.indexOf("]",d);b.push(Number(a.substring(c,d)));d+=1}return b},
oi:function(a){return Number(this.hE(a))},hE:function(a){var b=a.indexOf("[")+1,d=a.indexOf("]");return a.substring(b,d)},Pj:function(){return{}},tua:function(){this.Jm=null;var a=this.Pj(),b;for(b in a)for(var d=a[b],c=0;c<d.length;c++)if("root"===b){if(this.Qs(this.options,d[c]))break}else{var e=this.options[b];if(e)for(var f=0;f<e.length&&!this.Qs(e[f],d[c]);f++);}var g=[];this.jB=0;if(this.Jm){var s=this;for(b in a)d=a[b],d.forEach(function(a){var d;if("root"===b)(d=s.m3(s.Jm,a))&&g.push(d);else{var c=
s.Jm[b];if(c)for(var e=0;e<c.length;e++)(d=s.m3(c[e],a))&&g.push(d)}})}return g},Qs:function(a,b){if(!this.Jm){var d=(new e(a,b)).Dd();d&&(d instanceof Function||d instanceof Promise)&&(this.Jm=c.JsonUtils.clone(this.options))}return null!==this.Jm},m3:function(a,b){var d=new e(a,b),c=d.Dd();c instanceof Function&&(c=Promise.resolve(c(this.IY(a))));if(c&&c instanceof Promise){this.jB++;var f=this.ZR,g=this;c.then(function(a){g.q7(f,d,a)},function(){g.q7(f,d,[])});return c}return null},q7:function(a,
b,d){a===this.ZR&&(this.jB--,b.Fda(d,!0),0===this.jB&&(this.YR(this.Jm),this.Jm=null))},YR:function(a){var b=this.nE()&&this.ik;b&&this.WR();this.ra.render(a,this.yI,this.MG);b&&this.PM()},IY:function(){return{}},nE:function(){return!1},whenReady:function(){if(this.H6)return Promise.resolve(!0);if(!this.IR){var a=this;this.IR=new Promise(function(b){a.JR=b})}return this.IR}},!0);b.Yf=function(a){this.Mz=[];if(f(document.body).hasClass("oj-hicontrast"))this.Mz=b.Yf.uY.slice();else{if(!b.Yf.Yz){b.Yf.Yz=
[];var d=f(document.createElement("div"));d.attr("style","display:none;");d.attr("id","attrGps");f(document.body).append(d);for(var c=0;c<b.Yf.EZ.length;c++){var e=f(document.createElement("div"));e.addClass(b.Yf.EZ[c]);d.append(e);(e=e.css("color"))&&b.Yf.Yz.push(e)}d.remove()}this.Mz=0<b.Yf.Yz.length?b.Yf.Yz.slice():b.Yf.uY.slice()}this.Init(a)};o_("ColorAttributeGroupHandler",b.Yf,b);b.b.la(b.Yf,b.hi,"oj.ColorAttributeGroupHandler");b.Yf.uY="#267db3 #68c182 #fad55c #ed6647 #8561c8 #6ddbdb #ffb54d #e371b2 #47bdef #a2bf39 #a75dba #f7f37b".split(" ");
b.Yf.EZ="oj-dvt-category1 oj-dvt-category2 oj-dvt-category3 oj-dvt-category4 oj-dvt-category5 oj-dvt-category6 oj-dvt-category7 oj-dvt-category8 oj-dvt-category9 oj-dvt-category10 oj-dvt-category11 oj-dvt-category12".split(" ");b.Yf.Yz=null;b.Yf.prototype.lu=function(){return this.Mz.slice()}});