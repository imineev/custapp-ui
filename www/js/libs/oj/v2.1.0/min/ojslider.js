/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojeditablevalue","jqueryui-amd/draggable","ojs/ojtouchproxy"],function(b,f){(function(){b.Ja("oj.ojSlider",f.oj.editableValue,{defaultElement:"\x3cinput\x3e",version:"1.0.1",widgetEventPrefix:"oj",options:{distance:0,max:100,min:0,orientation:"horizontal",readOnly:!1,disabled:!1,step:1,type:"fromMin",value:0,rawValue:void 0},h6:5,M8:null,kf:function(){return"rtl"===b.A.So()},_ComponentCreate:function(){this._super();this.X4=!1;this.element.is("INPUT")?(this.X4=!0,
this.element[0].style&&(this.Xva=this.element[0].style.cssText),this.V4=this.element.css("display"),this.element.css("display","none"),this.Zj=f(this.element).wrap("\x3cdiv\x3e \x3c/div\x3e").parent()):this.Zj=this.element;this.y0()},y0:function(){this.e6=[];this.Mh=null;var a="oj-slider ",a=this.Pc()?a+"oj-slider-vertical":a+"oj-slider-horizontal",a=a+" oj-component oj-form-control";this.options.hK&&(a+=" oj-read-only");this.options.disabled&&(a+=" oj-disabled");this.Zj.removeClass();this.Zj.addClass(a);
this.Vg="range"===this.options.type?!0:!1;this.W_();this.jla();this.Cka();this.Cja();this.fla();this.mla();this.$B();this.yl()},Eg:function(){this._super();this.Tw();var a=this.pga();if(a){var b=this.Zj.find(".oj-slider-thumb"),c=a.attr("id");c||(c=a.attr("for"));b.attr("aria-labelledby",c);1<a.length&&1<b.length&&b[1].attr("aria-labelledby",String(c))}else if(a=this.element.attr("aria-label"))b=this.Zj.find(".oj-slider-thumb"),b.attr("aria-label",a)},pga:function(){var a=this.Oma();if(null!==a&&
0!==a.length)return a;a=this.Nma();if(null!==a&&0!==a.length)return a},Nma:function(){var a=this.element.prop("id");if(void 0!==a){var b=f("label[for\x3d'"+a+"']");if(0<b.length)return b;a="span[for\x3d'"+a+"']";if(0!==f(a).length)return f(a)}return null},Oma:function(){var a=this.element.attr("aria-labelledby");if(void 0!==a){var b=f("label[id\x3d'"+a+"']");if(0<b.length)return b;a=f("span[id\x3d'"+a+"']");if(0<a.length)return a}else return null},widget:function(){return this.Zj},Vj:function(a){this.M8=
a},Eh:function(){return this.M8},hG:function(){return this.element[0].id},KP:function(a){return this.hG()+"-thumb"+a},l2:function(){return this.hG()+"-barValue"},Qma:function(){return this.hG()+"-barBack"},loa:function(){return this.hG()+"-sliderWrapper"},mla:function(){var a,b,c="",e="class\x3d'oj-slider-thumb ui-state-default' tabindex\x3d'0' role\x3d'slider'"+("aria-valuemin \x3d '"+this.Xd()+"' ")+("aria-valuemax \x3d '"+this.pg()+"' ")+"\x3e\x3c/span\x3e",g=[];b=this.Vg?this.options.value.length:
1;for(a=0;a<b;a++)c="\x3cspan "+("id\x3d'"+this.KP(a)+"' ")+e,g.push(c);this.Nh=f(g.join("")).appendTo(this.jk);this.Wq=this.Nh.eq(0);var h=this;this.Nh.each(function(a){f(this).data("oj-slider-thumb-index",a);h.Pc()&&f(this).attr("aria-orientation","vertical");h.options.disabled?(f(this).attr("aria-disabled","true"),f(this).removeAttr("tabindex")):f(this).removeAttr("aria-disabled");h.options.readOnly?f(this).attr("title","read only"):f(this).removeAttr("title")})},jla:function(){var a=this.loa(),
b=this.Zj.find("#"+a);b.length&&b.remove();this.jk=f("\x3cdiv\x3e\x3c/div\x3e");f(this.jk).attr("id",a);this.jk.addClass("oj-slider-container");this.element.after(this.jk);this.jk[0].style.cssText=this.Xva;this.Pc()&&""==this.jk[0].style.height&&(this.jk[0].style.height="150px")},Cka:function(){var a=this.Qma(),b=this.Zj.find("#"+a);b.length&&b.remove();this.Sd=f("\x3cdiv\x3e\x3c/div\x3e");b="oj-slider-bar";b=this.Pc()?b+" oj-slider-vertical":b+" oj-slider-horizontal";f(this.Sd).attr("id",a);this.Sd.addClass(b);
this.jk.append(this.Sd);var c=this;this.Sd.on("mousedown"+c.eventNamespace,function(a){c.u7(a);c.dB(a);c.YF().focus()})},Cja:function(){this.options.type&&(this.options.value?this.Vg&&2!=this.options.value.length&&(this.options.value=[0<this.options.value.length?this.options.value[0]:this.Xd(),this.pg()],this.option("value",this.options.value,{_context:{zd:!0,lb:!0}})):(this.options.value=this.Vg?[this.Xd(),this.pg()]:this.Xd(),this.option("value",this.options.value,{_context:{zd:!0,lb:!0}})))},fla:function(){var a=
this.options,b="";if(a.type){this.hc=f("\x3cdiv\x3e\x3c/div\x3e");f(this.hc).attr("id",this.l2());this.jk.append(this.hc);var b="oj-slider-range oj-slider-bar-value",c=this;this.hc.on("mousedown"+c.eventNamespace,function(a){c.u7(a);c.dB(a);c.YF().focus()});this.hc=this.jk.find("#"+this.l2());var e="";"fromMin"===a.type?e=" oj-slider-range-min":"fromMax"===a.type&&(e=" oj-slider-range-max");this.hc.addClass(b+e)}else this.hc&&this.hc.remove(),this.hc=null},Iva:function(a){this.NS=b.Kf.P9(a)},fwa:function(a){b.Kf.gda(a)},
yl:function(){this.iz()&&this._hoverable(this.Zj);this._focusable(this.Zj);this.Nh.toArray().forEach(function(a){a=f(a);this.Es(a);this._on(a,this.kwa);this.Iva(a)},this)},af:function(){return this.Zj},o1:function(){this.Nh.toArray().forEach(function(a){a=f(a);this.fwa(a)},this);this.hc&&this.hc.remove();this.jk&&this.jk.remove()},Ewa:function(){b.A.unwrap(this.element,this.Zj);this.element.css("display",this.V4);this.Mv(this.element)},_destroy:function(){this.o1();this.Ewa();return this._super()},
u7:function(a){var b,c,e,g=this,h=this.options;e=0;this.v0=this.Wq;if(h.disabled||h.readOnly)return!1;b=this.Qna({x:a.pageX,y:a.pageY});c=this.pg()-this.Xd()+1;this.Vg&&this.Nh.each(function(a){var l=Math.abs(b-g.et(a));if(c>l||c===l&&(a===g.xra||g.et(a)===h.min))c=l,this.v0=f(this),e=a});this.Mh=e;if(this.v0)return this.Nh.hasClass("ui-state-hover")||this.Pt(a,e,b),this.YF().addClass("oj-active").focus(),this.hc.addClass("oj-active"),!0},sqa:function(a,b){var c=this.options;if(c.disabled||c.readOnly)return!1;
b.addClass("oj-active").focus();this.hc.addClass("oj-active");return!0},dsa:function(a,b){var c=this.g3(b);this.Pt(a,this.Mh,c,!0);c=100*this.H2(b);this.Vg?this.s8(c,this.Mh):this.p8(c);return!1},dB:function(a,b){this.Nh.removeClass("oj-active");this.hc.removeClass("oj-active");var c=this.g3(b);this.Pt(a,this.Mh,c);this.fj(a,this.Mh,!1);this.Mh=null;return!1},Pc:function(){return"vertical"===this.options.orientation},h3:function(a){1<a&&(a=1);0>a&&(a=0);this.Pc()&&(a=1-a);return a},Qna:function(a){var b=
this.rna(a);a=this.pg()-this.Xd();this.kf()&&!this.Pc()&&(b=1-b);return this.tj(this.Xd()+b*a)},rna:function(a){var b;this.Pc()?(b=this.Sd.height(),a=a.y-this.Sd.offset().top):(b=this.Sd.width(),a=a.x-this.Sd.offset().left);return 0==b?1:b=this.h3(a/b)},YF:function(){return this.Vg?f(this.Nh[this.Mh]):this.Wq},H2:function(a){var b;a||(a=this.YF());this.Pc()?(b=a.outerHeight()/2,b=a.offset().top+b,a=this.Sd.height(),b-=this.Sd.offset().top):(b=a.outerWidth()/2,b=a.offset().left+b,a=this.Sd.width(),
b-=this.Sd.offset().left);return 0==a?1:a=this.h3(b/a)},g3:function(a){var b;a=this.H2(a);b=this.pg()-this.Xd();this.kf()&&!this.Pc()&&(a=1-a);return this.tj(this.Xd()+a*b)},Sna:function(a){return this.et(a?0:1)},Mna:function(a,b,c){return 2===this.options.value.length&&(0===a&&b>c||1===a&&b<c)?c:b},Pt:function(a,b,c,e){var f;this.Vg?(f=this.Sna(b),c=this.Mna(b,c,f),c!==this.et(b)&&this.pva(a,b,c,e)):c!==this.y3()&&(this.xva(a,c,e),e||this.X4&&this.element.val(c))},xva:function(a,b,c){this.oH=this.tj(b);
c||(this.Lc(this.oH,a),this.$B());this.bq(this.oH,a)},fj:function(a,b,c){this.Vg?(this.G5=this.Nna(b,this.e6[b]),this.bq(this.G5,a),c||this.Lc(this.G5,a)):(this.bq(this.oH,a),c||this.Lc(this.oH,a));this.xra=b},Nna:function(a,b){var c,e;c=this.options.value.slice();for(e=0;e<c.length;e+=1)c[e]=this.tj(c[e]);a===this.Mh&&(c[a]=b);return c},y3:function(){return this.N3()},et:function(a){return this.toa(a)},pva:function(a,b,c,e){this.e6[b]=this.tj(c);this.fj(a,b,e);e||this.$B()},_setOption:function(a,
b,c){"value"===a&&(Array.isArray(b)?isNaN(b[0])?(this.Vg=!1,this.Km(a,b[0])):this.Vg=!0:(this.Vg=!1,this.Km(a,b)));b="max"===a||"min"===a?this.Km(a,b):"step"===a?this.lB(b):b;"disabled"!=a&&this._super(a,b,c);"readOnly"===a&&(this.options.hK=b);"disabled"===a&&(this.options.disabled=b);switch(a){case "value":this.$B();this.Tw();break;case "min":case "max":this.W_();this.$B();this.Tw();break;case "orientation":case "readonly":case "step":case "type":case "disabled":this.jta()}},jta:function(){this.o1();
this.y0();this.Eg()},N3:function(){var a=this.options.value;return a=this.tj(a)},toa:function(a){return this.tj(this.options.value[a])},tj:function(a){if(a<=this.Xd())return this.Xd();if(a>=this.pg())return this.pg();var b=0<this.options.step?this.options.step:1,c=(a-this.Xd())%b;a-=c;2*Math.abs(c)>=b&&(a+=0<c?b:-b);return parseFloat(a.toFixed(5))},W_:function(){var a=this.Xd();this.max=0!==(this.options.max-a)/this.options.step%1?this.options.max-(this.options.max-a)%this.options.step:this.options.max},
Xd:function(){return this.options.min},pg:function(){return this.max},I2:function(){var a;a=0<this.options.step?(this.pg()-this.Xd())/this.options.step:100;a=(this.Pc()?this.Sd.height():this.Sd.width())/a;1>a&&(a=1);return this.Pc()?[1,a]:[a,1]},LP:function(a){return(this.et(a)-this.Xd())/(this.pg()-this.Xd())},$B:function(){var a,b,c,e;this.Vg?this.Nh.toArray().forEach(function(b,c){var d=f(b);a=100*this.LP(c);this.kf()&&!this.Pc()&&(a=100-a);this.Pc()?f(d).css({top:100-a+"%"}):f(d).css({left:a+
"%"});f(d).attr("aria-valuenow",this.et(c));this.s8(a,c)},this):(b=this.N3(),c=this.Xd(),e=this.pg(),a=e!==c?(b-c)/(e-c)*100:0,this.kf()&&!this.Pc()&&(a=100-a),this.Pc()?this.Wq.css({top:100-a+"%"}):this.Wq.css({left:a+"%"}),f(this.Wq).attr("aria-valuenow",b),this.p8(a))},p8:function(a){var b=this.options.type;this.Pc()?("fromMin"===b&&this.hc.css({height:a+"%"}),"fromMax"===b&&this.hc.css({height:100-a+"%"})):this.kf()?("fromMin"===b&&this.hc.css({width:100-a+"%"}),"fromMax"===b&&this.hc.css({width:a+
"%"})):("fromMin"===b&&this.hc.css({width:a+"%"}),"fromMax"===b&&this.hc.css({width:100-a+"%"}))},s8:function(a,b){var c=this.hc.attr("id");if(0==b)switch(c=100*this.LP(1),this.options.type){case "fromMin":this.Pc()?this.hc.css({height:a+"%"}):this.hc.css({width:a+"%"});break;case "range":this.Pc()?(this.hc.css({top:100-c+"%"}),this.hc.css({height:c-a+"%"})):this.kf()?(this.hc.css({left:100-c+"%"}),this.hc.css({width:c-(100-a)+"%"})):(this.hc.css({left:a+"%"}),this.hc.css({width:c-a+"%"}))}else{var e=
100*this.LP(0);switch(this.options.type){case "fromMax":this.Pc()?this.hc.css({height:100-a+"%"}):this.hc.css({width:100-a+"%"});break;case "range":this.Pc()?document.getElementById(c)&&(this.hc.css({top:100-a+"%"}),this.hc.css({height:a-e+"%"})):this.kf()?document.getElementById(c)&&(this.hc.css({left:a+"%"}),this.hc.css({width:-a+100-e+"%"})):document.getElementById(c)&&this.hc.css({width:a-parseInt(document.getElementById(c).style.left,10)+"%"})}}},kwa:{keydown:function(a){var b,c,e,g=f(a.target).data("oj-slider-thumb-index");
this.Mh=g;switch(a.keyCode){case f.ui.keyCode.HOME:case f.ui.keyCode.END:case f.ui.keyCode.PAGE_UP:case f.ui.keyCode.PAGE_DOWN:case f.ui.keyCode.UP:case f.ui.keyCode.RIGHT:case f.ui.keyCode.DOWN:case f.ui.keyCode.LEFT:a.preventDefault(),f(a.target).addClass("oj-active")}e=this.options.step;b=this.Vg?c=this.et(g):c=this.y3();switch(a.keyCode){case f.ui.keyCode.HOME:c=this.Xd();break;case f.ui.keyCode.END:c=this.pg();break;case f.ui.keyCode.PAGE_UP:c=this.tj(b+(this.pg()-this.Xd())/this.h6);break;case f.ui.keyCode.PAGE_DOWN:c=
this.tj(b-(this.pg()-this.Xd())/this.h6);break;case f.ui.keyCode.UP:if(b===this.pg())return;c=this.tj(b+e);break;case f.ui.keyCode.RIGHT:if(!this.kf()||this.Pc()){if(b===this.pg())return;b+=e}else{if(b===this.Xd())return;b-=e}c=this.tj(b);break;case f.ui.keyCode.DOWN:if(b===this.Xd())return;c=this.tj(b-e);break;case f.ui.keyCode.LEFT:if(!this.kf()||this.Pc()){if(b===this.Xd())return;b-=e}else{if(b===this.pg())return;b+=e}c=this.tj(b)}this.Pt(a,g,c)},keyup:function(a){var b=f(a.target).data("oj-slider-thumb-index");
this.Mh=b;this.fj(a,b,!1);f(a.target).removeClass("oj-active");this.Mh=null}},bf:function(a,d){var c=this.options,e=this;this._superApply(arguments);b.ae.mn([{Z:"disabled",jd:!0},{Z:"value"},{Z:"title"},{Z:"min"},{Z:"max"},{Z:"step"}],d,this,function(a){for(var b=["value","step","min","max"],d=0;d<b.length;d++){var f=b[d],p=f in a?a[f]:c[f];null!=p&&("step"===f?a[f]=e.lB(p):"min"===f||"max"===f?a[f]=e.Km(f,p):"value"===f&&(Array.isArray(p)?a[f]=p:a[f]=e.Km(f,p)))}});if(void 0===c.value)throw Error(this.v("noValue"));
if(null!=c.min&&null!=c.max){if(c.max<c.min)throw Error(this.v("maxMin"));if(c.value<c.min||c.value>c.max)throw Error(this.v("valueRange"));}},getNodeBySubId:function(a){if(null==a)return this.element?this.element[0]:null;a=a.subId;return"oj-slider-thumb-0"===a?this.widget().find(".oj-slider-thumb")[0]:"oj-slider-thumb-1"===a?this.widget().find(".oj-slider-thumb")[1]:"oj-slider-bar"===a?this.widget().find("."+a)[0]:"oj-slider-bar-value"===a?this.widget().find("."+a)[0]:null},getSubIdByNode:function(a){if(null!=
a){if(a.id===this.KP(0)&&f(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-0"};if(a.id===this.KP(1)&&f(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-1"};if(f(a).hasClass("oj-slider-bar"))return{subId:"oj-slider-bar"};if(f(a).hasClass("oj-slider-bar-value"))return{subId:"oj-slider-bar-value"}}return null},_GetDefaultStyleClass:function(){return"oj-slider"},Km:function(a,b){var c;c=null!==b?+b:b;if(isNaN(c))throw Error(this.v("optionNum",{option:a}));return c},lB:function(a){if(null===
a)return 1;a=this.Km("step",a);if(0>=a)throw Error(this.v("invalidStep"));if(null===a||0>=a)a=1;return a},pDa:function(){return this.Sd.offset().left+this.Sd.width()},yDa:function(){return this.Sd.offset().left},X_:function(a){var b=this.I2(),c=a[0].style,e=this;a.draggable({axis:this.Pc()?"y":"x",grid:b,disabled:!1,start:function(b){a[0]==f(e.Nh)[0]?e.Mh=0:a[0]==f(e.Nh)[1]&&(e.Mh=1);e.sqa(b,a)},drag:function(b,d){var k=d.position;e.Pc()?(c.left="",k.left=""):(c.top="",k.top="");e.dsa(b,a);e.Pc()?
(0>k.top&&(k.top=0),k.top>e.Sd.height()&&(k.top=e.Sd.height())):(0>k.left&&(k.left=0),k.left>e.Sd.width()&&(k.left=e.Sd.width()));if(e.Vg){var l;l=0==e.Mh?f(e.Nh[1]):f(e.Nh[0]);if(e.Pc()){var p=a.outerHeight()/2,n=e.Sd.offsetParent().offset().top;a.offset();l=l.offset().top+p-n}else p=a.outerWidth()/2,n=e.Sd.offsetParent().offset().left,a.offset(),l=l.offset().left+p-n;0==e.Mh?e.Pc()?k.top<l&&(k.top=l):e.kf()?k.left<l&&(k.left=l):k.left>l&&(k.left=l):e.Pc()?k.top>l&&(k.top=l):e.kf()?k.left>l&&(k.left=
l):k.left<l&&(k.left=l)}},stop:function(b){this.style.width="";this.style.height="";e.dB(b,a)}})},Tw:function(){this.options.disabled||(this.Vg?this.Nh.toArray().forEach(function(a){a=f(a);this.X_(a)},this):this.X_(this.Wq))},lDa:function(){this.Vg?this.Nh.toArray().forEach(function(a){a=f(a);a.is(".ui-draggable")&&a.draggable("disable")},this):this.Wq.is(".ui-draggable")&&this.Wq.draggable("disable")}})})()});