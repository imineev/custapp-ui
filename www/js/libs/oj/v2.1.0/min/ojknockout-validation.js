/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","knockout","ojs/ojknockout","ojs/ojmessaging"],function(b,f,a){b.dc=function(){};b.dc.ez="invalidComponentTracker";b.dc.FY="ojoptionchange";b.dc.Pn="messagesShown";b.dc.Zp="messagesHidden";b.dc.Yp="disabled";b.dc.oz="readOnly";b.dc.Xq=function(d,c,e,g,h){e={};h=h.call()[b.dc.ez];var f;if(d===b.dc.Yp||d===b.dc.oz)return f=h&&h.peek()||null,null!==f&&a.isWriteableObservable(h)&&f.Xq.call(f,g,d,c)&&h.valueHasMutated(),e[d]=c,e};b.dc._init=function(a,b){var e={};e[a]=b;return e};
b.dc.Oia=function(a,c,e,g){g=g.call();var h;a===b.dc.ez&&(h=g[a]?!0:!1)&&b.dc.Cta(a,g,c,e);return{}};b.dc.nja=function(d,c,e,g){c=f(c);g=g.call()[d];d===b.dc.ez&&c&&(c.off(b.dc.FY,b.dc.B9),g&&a.isWriteableObservable(g)&&(d=g.peek(),d.Cd.call(d,e)&&g.valueHasMutated()))};b.dc.B9=function(d,c){var e=d.data.vW,g,h=d.data.T,f=c.option,l=c.value;(f===b.dc.Pn||f===b.dc.Zp)&&e&&a.isWriteableObservable(e)&&(g=e.peek())&&g.Xq.call(g,h,f,l)&&e.valueHasMutated()};b.dc.Cta=function(d,c,e,g){d=c[d];var h,k;e=
f(e);if(a.isObservable(d))k=d.peek(),null==k&&(k=new b.lc,d(k));else throw Error("Binding attribute "+b.dc.ez+" should be bound to a ko observable.");null!==k&&(a.isWriteableObservable(d)&&(c=g.call(g,"option",b.dc.Pn),h=g.call(g,"option",b.dc.Zp),k.Xq.call(k,g,b.dc.Pn,c),k.Xq.call(k,g,b.dc.Zp,h),d.valueHasMutated()),g={vW:d,T:g},e.on(b.dc.FY,g,b.dc.B9))};b.pa.Ji().Ti({"for":"editableValue",attributes:[b.dc.ez,b.dc.Yp,b.dc.oz],init:b.dc._init,update:b.dc.Xq,afterCreate:b.dc.Oia,beforeDestroy:b.dc.nja});
b.lc=function(){this.Init()};o_("InvalidComponentTracker",b.lc,b);b.b.la(b.lc,b.b,"oj.InvalidComponentTracker");b.lc.Pn="messagesShown";b.lc.Zp="messagesHidden";b.lc.Yp="disabled";b.lc.oz="readOnly";b.lc.prototype.Init=function(){b.lc.p.Init.call(this);this.rx=[];this.Fq=[];this.Jw=[];this.invalidHidden=this.invalidShown=!1};b.lc.prototype.Q$=function(){var a=null,b=this,e=this.oI;this.invalidShown&&(a=this.cP());setTimeout(function(){(a=e===b.oI?a||b.cP():b.cP())&&a.call(a,"Focus")},1);return a?
!0:!1};b.b.g("InvalidComponentTracker.prototype.focusOnFirstInvalid",{Q$:b.lc.prototype.Q$});b.lc.prototype.showMessages=function(){var a,b,e;if(this.invalidHidden)for(b=this.Jw.length,e=0;e<b;e++)this.Jw[e]&&(a=this.rx[e].call(a,"showMessages"))};b.b.g("InvalidComponentTracker.prototype.showMessages",{showMessages:b.lc.prototype.showMessages});b.lc.prototype.cP=function(){for(var a,b=0,e=this.Fq.length,b=0;b<e;b++)if(a=this.Fq[b])return this.rx[b];return null};b.lc.prototype.Cd=function(a){var b=
-1,e=!1;f.each(this.rx,function(g,e){0>b&&e===a&&(b=g)});0<=b&&(this.rx.splice(b,1),this.Fq.splice(b,1),this.Jw.splice(b,1),this.qT(),e=!0);return e};b.lc.prototype.Xq=function(a,c,e){var g=a.call(a,"isValid"),h=-1,k=!0,l;f.each(this.rx,function(b,c){0>h&&c===a&&(h=b)});switch(c){case b.lc.Pn:case b.lc.Zp:l=!1;e&&(0>h&&(h=this.rx.push(a)-1,this.Gqa(h,l)),!g&&b.lc.yQ(e)&&(l=!0,c===b.lc.Pn&&(e=a.call(a,"option",b.lc.Yp),g=a.call(a,"option",b.lc.oz),l=e||g?!1:!0)),k=this.ZB(c,h||0,l),this.qT(),k&&(void 0===
this.oI&&(this.oI=0),this.oI++));break;case b.lc.Yp:case b.lc.oz:k=!1,e&&(k=this.ZB(b.lc.Pn,h||0,!1),k=this.ZB(b.lc.Zp,h||0,!1)||k,this.qT())}return k};b.lc.prototype.Gqa=function(a,c){void 0===this.Fq[a]&&this.ZB(b.lc.Pn,a,c);void 0===this.Jw[a]&&this.ZB(b.lc.Zp,a,c)};b.lc.prototype.qT=function(){this.invalidShown=0<=this.Fq.indexOf(!0);this.invalidHidden=0<=this.Jw.indexOf(!0)};b.lc.prototype.ZB=function(a,c,e){var g=!1;a=a===b.lc.Pn?this.Fq:a===b.lc.Zp?this.Jw:[];0<=c&&void 0!==a[c]?(g=a[c]!==
e?!0:!1)&&a.splice(c,1,e):(a.push(e),g=!0);return g};b.lc.yQ=function(a){return!b.aa.isValid(a)}});