/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit', './DvtPanZoomCanvas'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

var l=void 0,n=!0,s=null,t=!1;function aa(){return function(a){return a}}function y(){return function(){}}function z(a){return function(b){this[a]=b}}function D(a){return function(){return this[a]}}function F(a){return function(){return a}}var J;function ba(a,b){0==a.indexOf("dvt.")&&(a=a.substring(4));var c=a.split("."),d=eval("dvt");!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==l?d[e]=b:d=d[e]?d[e]:d[e]={}}Math.floor(2147483648*Math.random()).toString(36);
function Bl(a){this.Init(a)}ba("DvtDiagramLayoutContext",Bl);dvt.j.u(Bl,dvt.j,"DvtDiagramLayoutContext");
Bl.prototype.Init=function(a){this.wh=a?a.wh:s;this.Aq=a?a.Aq:s;this.uw=a?a.uw:0;this.dY=a?a.dY:0;this.Wv=a?a.Wv:t;this.wga=a?a.wga:s;this.Ag=a?a.Ag:s;this.Vz=a?a.Vz:s;this.$i=a?a.$i:s;this.nc={};this.ae={};this.CE=[];this.tW=[];if(a){for(var b=0;b<this.uw;b++){var c=new Cl(a.CE[b]);this.CE.push(c);this.nc[c.getId()]=c}for(var d in a.nc)this.nc[d]||(this.nc[d]=new Cl(a.nc[d]));for(b=0;b<this.dY;b++)c=new Dl(a.tW[b]),this.tW.push(c),this.ae[c.getId()]=c;for(var e in a.ae)this.ae[e]||(this.ae[e]=new Dl(a.ae[e]))}};
Bl.prototype.zo=z("wh");Bl.prototype.Yf=D("wh");Bl.prototype.getLayout=Bl.prototype.Yf;Bl.prototype.Zq=z("Aq");Bl.prototype.dm=D("Aq");Bl.prototype.getLayoutAttributes=Bl.prototype.dm;Bl.prototype.IN=function(a){this.fa(a.getId())||(this.uw++,this.CE.push(a));this.nc[a.getId()]=a};Bl.prototype.fa=function(a){return this.nc[a]};Bl.prototype.getNodeById=Bl.prototype.fa;Bl.prototype.lG=function(a){return this.CE[a]};Bl.prototype.getNodeByIndex=Bl.prototype.lG;Bl.prototype.tg=D("uw");
Bl.prototype.getNodeCount=Bl.prototype.tg;function mb(a,b){a.dd(b.getId())||(a.dY++,a.tW.push(b));a.ae[b.getId()]=b}Bl.prototype.dd=function(a){return this.ae[a]};Bl.prototype.getLinkById=Bl.prototype.dd;Bl.prototype.IJ=function(a){return this.tW[a]};Bl.prototype.getLinkByIndex=Bl.prototype.IJ;Bl.prototype.zt=D("dY");Bl.prototype.getLinkCount=Bl.prototype.zt;
Bl.prototype.O$a=function(a,b){for(var c=b,d=new td(0,0);c;)if(d.x+=c.iba.x+c.qi().x,d.y+=c.iba.y+c.qi().y,c=c.Vz){if((c=this.fa(c))&&c.Pb()){var e=c.ut();e&&(d.x+=e.left,d.y+=e.top)}}else c=s;return new td(a.x+d.x,a.y+d.y)};Bl.prototype.localToGlobal=Bl.prototype.O$a;Bl.prototype.l$a=D("Wv");Bl.prototype.isLocaleR2L=Bl.prototype.l$a;Bl.prototype.W6a=D("wga");Bl.prototype.getComponentSize=Bl.prototype.W6a;Bl.prototype.lcb=z("Ag");Bl.prototype.setViewport=Bl.prototype.lcb;Bl.prototype.UJ=D("Ag");
Bl.prototype.getViewport=Bl.prototype.UJ;Bl.prototype.maa=z("Vz");Bl.prototype.vna=D("Vz");Bl.prototype.getContainerId=Bl.prototype.vna;Bl.prototype.LG=function(a,b,c,d){this.Vz&&(this.$i={},"number"===typeof a||"string"===typeof a||(d=a.left,b=a.right,c=a.bottom,a=a.top),this.$i.top=a,this.$i.right=b,this.$i.bottom=c,this.$i.left=d)};Bl.prototype.setContainerPadding=Bl.prototype.LG;Bl.prototype.ut=D("$i");Bl.prototype.getContainerPadding=Bl.prototype.ut;Bl.prototype.Y6a=D("QQ");
Bl.prototype.getCurrentViewport=Bl.prototype.Y6a;function Dl(a){this.Init(a)}ba("DvtDiagramLayoutContextLink",Dl);dvt.j.u(Dl,dvt.j,"DvtDiagramLayoutContextLink");Dl.prototype.Init=function(a){this.mc=a?a.mc:s;this.ES=a?a.ES:s;this.cR=a?a.cR:s;this.Qk=a?a.Qk:s;this.vM=a?a.vM:s;this.uM=a?a.uM:s;this.Aq=a?a.Aq:s;this.Tla=a?a.Tla:0;this.xha=a?a.xha:0;this.DM=a?a.DM:1;this.Og=a?a.Og:t;this.pm=a?a.pm:s;this.ll=a?a.ll:s;this.Nx=a?a.Nx:t};Dl.prototype.setId=z("mc");Dl.prototype.getId=D("mc");
Dl.prototype.getId=Dl.prototype.getId;Dl.prototype.IU=z("ES");Dl.prototype.Ve=D("ES");Dl.prototype.getStartId=Dl.prototype.Ve;Dl.prototype.sU=z("cR");Dl.prototype.Id=D("cR");Dl.prototype.getEndId=Dl.prototype.Id;Dl.prototype.ce=function(a){this.Qk="string"==typeof a?dvt.M.VZ(a):a};Dl.prototype.setPoints=Dl.prototype.ce;Dl.prototype.Bc=D("Qk");Dl.prototype.getPoints=Dl.prototype.Bc;Dl.prototype.Kf=z("vM");Dl.prototype.setLabelPosition=Dl.prototype.Kf;Dl.prototype.mf=D("vM");
Dl.prototype.getLabelPosition=Dl.prototype.mf;Dl.prototype.Yq=z("uM");Dl.prototype.Ff=D("uM");Dl.prototype.getLabelBounds=Dl.prototype.Ff;Dl.prototype.W_=D("Tla");Dl.prototype.getStartConnectorOffset=Dl.prototype.W_;Dl.prototype.v_=D("xha");Dl.prototype.getEndConnectorOffset=Dl.prototype.v_;Dl.prototype.nK=z("DM");Dl.prototype.PA=D("DM");Dl.prototype.getLinkWidth=Dl.prototype.PA;Dl.prototype.Zq=z("Aq");Dl.prototype.dm=D("Aq");Dl.prototype.getLayoutAttributes=Dl.prototype.dm;Dl.prototype.pc=z("Og");
Dl.prototype.noa=D("Og");Dl.prototype.getSelected=Dl.prototype.noa;Dl.prototype.lB=z("pm");Dl.prototype.setLabelRotationAngle=Dl.prototype.lB;Dl.prototype.NA=D("pm");Dl.prototype.getLabelRotationAngle=Dl.prototype.NA;Dl.prototype.Yw=z("ll");Dl.prototype.setLabelRotationPoint=Dl.prototype.Yw;Dl.prototype.OA=D("ll");Dl.prototype.getLabelRotationPoint=Dl.prototype.OA;Dl.prototype.sK=z("Nx");Dl.prototype.xD=D("Nx");function Cl(a){this.Init(a)}ba("DvtDiagramLayoutContextNode",Cl);dvt.j.u(Cl,dvt.j,"DvtDiagramLayoutContextNode");
Cl.prototype.Init=function(a){this.mc=a?a.mc:s;this.ue=a?a.ue:s;this.aX=a?a.aX:s;this.bJ=a?a.bJ:s;this.vM=a?a.vM:s;this.uM=a?a.uM:s;this.Aq=a?a.Aq:s;this.Vfa=a?a.Vfa:t;this.Vz=a?a.Vz:s;this.Og=a?a.Og:t;this.pm=a?a.pm:s;this.ll=a?a.ll:s;this.$i=a?a.$i:s;this.vw=a?a.vw:s;this.Ru=a?a.Ru:s;this.lm=a?a.lm:t;this.$U=a?a.Oa():s;this.ZD=n;this.iba=new td(0,0)};Cl.prototype.setId=z("mc");Cl.prototype.getId=D("mc");Cl.prototype.getId=Cl.prototype.getId;Cl.prototype.haa=function(a){this.vw=this.ue=a};
Cl.prototype.tf=function(){!this.ZD&&this.$U&&this.$U.lU(this);return this.ue};Cl.prototype.getBounds=Cl.prototype.tf;Cl.prototype.Xh=function(){!this.ZD&&this.$U&&this.$U.lU(this);return this.aX};Cl.prototype.getContentBounds=Cl.prototype.Xh;Cl.prototype.Gm=function(a){this.bJ=a;El(this,this)};Cl.prototype.setPosition=Cl.prototype.Gm;Cl.prototype.qi=D("bJ");Cl.prototype.getPosition=Cl.prototype.qi;Cl.prototype.Kf=z("vM");Cl.prototype.setLabelPosition=Cl.prototype.Kf;Cl.prototype.mf=D("vM");
Cl.prototype.getLabelPosition=Cl.prototype.mf;Cl.prototype.Yq=z("uM");Cl.prototype.Ff=D("uM");Cl.prototype.getLabelBounds=Cl.prototype.Ff;Cl.prototype.Zq=z("Aq");Cl.prototype.dm=D("Aq");Cl.prototype.getLayoutAttributes=Cl.prototype.dm;Cl.prototype.GD=z("Vfa");Cl.prototype.$T=D("Vfa");Cl.prototype.isReadOnly=Cl.prototype.$T;Cl.prototype.maa=z("Vz");Cl.prototype.vna=D("Vz");Cl.prototype.getContainerId=Cl.prototype.vna;Cl.prototype.pc=z("Og");Cl.prototype.noa=D("Og");Cl.prototype.getSelected=Cl.prototype.noa;
Cl.prototype.lB=z("pm");Cl.prototype.setLabelRotationAngle=Cl.prototype.lB;Cl.prototype.NA=D("pm");Cl.prototype.getLabelRotationAngle=Cl.prototype.NA;Cl.prototype.Yw=z("ll");Cl.prototype.setLabelRotationPoint=Cl.prototype.Yw;Cl.prototype.OA=D("ll");Cl.prototype.getLabelRotationPoint=Cl.prototype.OA;
Cl.prototype.LG=function(a,b,c,d){this.Pb()&&(this.$i={},"number"===typeof a||"string"===typeof a||(d=a.left,b=a.right,c=a.bottom,a=a.top),this.$i.top=a,this.$i.right=b,this.$i.bottom=c,this.$i.left=d,this.vw&&(this.ue=new vb(this.vw.x,this.vw.y,this.vw.w+d+b,this.vw.h+a+c)),this.Ru&&(this.aX=new vb(this.Ru.x,this.Ru.y,this.Ru.w+d+b,this.Ru.h+a+c)))};Cl.prototype.setContainerPadding=Cl.prototype.LG;Cl.prototype.ut=D("$i");Cl.prototype.getContainerPadding=Cl.prototype.ut;Cl.prototype.Oh=z("lm");
Cl.prototype.Pb=D("lm");Cl.prototype.isDisclosed=Cl.prototype.Pb;Cl.prototype.kaa=z("rXa");Cl.prototype.ee=D("rXa");Cl.prototype.getChildNodes=Cl.prototype.ee;Cl.prototype.GU=z("QC");Cl.prototype.ip=D("QC");Cl.prototype.getParentNode=Cl.prototype.ip;function El(a,b){var c=b.ip();c&&c.ZD&&(c.ZD=t,El(a,c))}function td(a,b){this.Init(a,b)}ba("DvtDiagramPoint",td);dvt.j.u(td,dvt.j,"DvtDiagramPoint");td.prototype.Init=function(a,b){this.x=a===s||isNaN(a)?0:a;this.y=b===s||isNaN(b)?0:b};
function vb(a,b,c,d){this.Init(a,b,c,d)}ba("DvtDiagramRectangle",vb);dvt.j.u(vb,dvt.j,"DvtDiagramRectangle");vb.prototype.Init=function(a,b,c,d){this.x=a===s||isNaN(a)?0:a;this.y=b===s||isNaN(b)?0:b;this.w=c===s||isNaN(c)?0:c;this.h=d===s||isNaN(d)?0:d};dvt.Ub={};dvt.j.u(dvt.Ub,dvt.j);dvt.Ub.ohb=function(a,b,c){a&&b&&a instanceof sa&&b instanceof sa?dvt.Ub.eSa(a,b,c):a&&b&&a instanceof dvt.de&&b instanceof dvt.de?dvt.Ub.dSa(a,b,c):a&&b&&dvt.Ub.gwa(a,b,c)};
dvt.Ub.eSa=function(a,b,c){dvt.Ub.N3a(a,b,c);var d=a.qd?a.qd():s,e=b.qd?b.qd():s;c&&(a.Sa()!=b.Sa()&&c.J(dvt.B.Q,a,a.Sa,a.Ia,b.Sa()),a.Za()!=b.Za()&&c.J(dvt.B.Q,a,a.Za,a.ib,b.Za()),d&&e&&d instanceof dvt.Vb&&e instanceof dvt.Vb&&d.xc()!=e.xc()&&c.J(dvt.B.pq,a,a.qd,a.ga,e))};
dvt.Ub.gwa=function(a,b,c){var d=a.V(a.g().we),e=b.V(b.g().we),f=a.qd?a.qd():s,h=b.qd?b.qd():s,k=a.yd?a.yd():s,m=b.yd?b.yd():s;if(c){var p=b=1;d.a!=e.a&&(b=e.a/d.a);d.b!=e.b&&(p=e.b/d.b);var q=0,r=0;d.x!=e.x&&(q=e.x-d.x);d.y!=e.y&&(r=e.y-d.y);f&&h&&f instanceof dvt.Vb&&h instanceof dvt.Vb&&f.xc()!=h.xc()&&c.J(dvt.B.pq,a,a.qd,a.ga,h);k&&m&&k instanceof dvt.ta&&m instanceof dvt.ta&&k.xc()!=m.xc()&&c.J(dvt.B.qL,a,a.yd,a.xa,m);if(0!=q||0!=r||1!=b||1!=p)e=new dvt.Mb,e.translate(-d.x,-d.y),e.scale(b,p),
e.translate(d.x,d.y),e.translate(q,r),d=a.kb().Ca(),d.concat(e),c.J(dvt.B.Ji,a,a.kb,a.ob,d)}};dvt.Ub.N3a=function(a,b,c){if(c){var d=dvt.Ub.CX(a);b=dvt.Ub.CX(b);d.Te(b)||(d=dvt.Ub.CX(a.getParent()),d.tD(),b.concat(d),c.J(dvt.B.Ji,a,a.kb,a.ob,b))}};dvt.Ub.CX=function(a){var b=[a];for(a=a.getParent();a;)b.push(a),a=a.getParent();a=new dvt.Mb;for(var c=0;c<b.length;c++)a.concat(b[c].kb());return a};
dvt.Ub.dSa=function(a,b,c){var d=dvt.Ub.kza(a),e=dvt.Ub.kza(b);if(!d||!e)dvt.Ub.gwa(a,b,c);else{a!=d&&(dvt.Ub.P2a(a,d),a=d);var d=a.qd?a.qd():s,f=b.qd?b.qd():s;c&&(d&&f&&d instanceof dvt.Vb&&f instanceof dvt.Vb&&d.xc()!=f.xc()&&c.J(dvt.B.pq,a,a.qd,a.ga,f),b=dvt.Ub.CX(b),dvt.Ub.HWa(a,e,c,b))}};dvt.Ub.kza=function(a){if(a instanceof dvt.nb)return a;if(!(a instanceof dvt.La||a instanceof dvt.vb)){var b=dvt.Ub.NZa(a);if(b)return new dvt.nb(a.g(),b)}return s};
dvt.Ub.P2a=function(a,b){var c=a.qd(),d=a.yd(),e=a.kb(),f=a.getParent().oi(a);a.getParent().Fb(b,f);a.ga(s);a.xa(s);a.ob(s);b.ga(c);b.xa(d);b.ob(e);c=a.Eb();for(d=0;d<c;d++)b.k(a.Ya(0));a.getParent().removeChild(a);a.ra&&a.ra()};
dvt.Ub.NZa=function(a){var b;if(a instanceof dvt.ka){var c=a.Zr(),d=a.Et(),e=a.Sa(),f=a.Za(),h=a.getWidth(),k=a.getHeight();if(c&&d){a=0.5*Math.PI;var m=Math.cos(0.5*a),p=Math.sin(0.5*a),q=m,r=-p,u=(4-m)/3,v=(1-m)*(3-m)/(3*p);b=u;var w=-v,m=new dvt.N(m,p),q=new dvt.N(q,r),u=new dvt.N(u,v),w=new dvt.N(b,w),v=new dvt.Mb;v.rotate(0.5*a);v.scale(c,d);a=v.Oe(u);var m=v.Oe(w),x=e+h-c,B=f+d;b=["M",e+c,f,"L",e+h-c,f,"C",x+a.x,B-a.y,x+m.x,B-m.y,e+h,f+d];B=f+k-d;b.push("L",e+h,f+k-d,"C",x+m.x,B+m.y,x+a.x,B+
a.y,e+h-c,f+k);x=e+c;b.push("L",e+c,f+k,"C",x-a.x,B+a.y,x-m.x,B+m.y,e,f+k-d);B=f+d;b.push("L",e,f+d,"C",x-m.x,B-m.y,x-a.x,B-a.y,e+c,f,"Z")}else b=["M",e,f,"L",e+h,f,"L",e+h,f+k,"L",e,f+k,"Z"]}else if(a instanceof dvt.ou||a instanceof dvt.Rh){if(c=a.Bc()){b=[];for(f=0;f<c.length;f+=2)0==f?b.push("M",c[f],c[f+1]):b.push("L",c[f],c[f+1]);a instanceof dvt.Rh&&b.push("Z")}}else if(a instanceof dvt.Uc)b=["M",a.es(),a.Ft(),"L",a.ov(),a.Pw()];else if(a instanceof dvt.al){x=a.kj();B=a.lj();a instanceof dvt.lu?
(c=a.Zr(),d=a.Et()):d=c=a.zm();e=-0.5*Math.PI;a=2*Math.PI/4;m=Math.cos(0.5*a);p=Math.sin(0.5*a);q=m;r=-p;u=(4-m)/3;v=(1-m)*(3-m)/(3*p);b=u;w=-v;m=new dvt.N(m,p);q=new dvt.N(q,r);u=new dvt.N(u,v);w=new dvt.N(b,w);b=[];for(f=0;4>f;f++)v=new dvt.Mb,v.rotate(e+f*a),v.scale(c,d),0==f&&(h=v.Oe(q),b.push("M",x+h.x,B+h.y)),h=v.Oe(w),k=v.Oe(u),v=v.Oe(m),b.push("C",x+h.x,B+h.y,x+k.x,B+k.y,x+v.x,B+v.y);b.push("Z")}else a instanceof dvt.Lf&&(c=a.Gw()*dvt.Cc.jE,d=a.Up()*dvt.Cc.jE,b=["M",a.kj()+a.Zr()*Math.cos(c),
a.lj()-a.Et()*Math.sin(c),"A",a.Zr(),a.Et(),"0",180<Math.abs(a.Up())?"1":"0",0<a.Up()?"0":"1",a.kj()+a.Zr()*Math.cos(c+d),a.lj()-a.Et()*Math.sin(c+d)],a.TL===dvt.Lf.gP?b.push("Z"):a.TL===dvt.Lf.eda&&b.push("L",a.kj(),a.lj(),"Z"));return b};dvt.Ub.jF=function(a,b){for(;b<a.length&&!isNaN(a[b]);)b++;return b};dvt.Ub.oR=function(a,b){for(;-1<b&&!isNaN(a[b]);)b--;return b};dvt.Ub.nza=function(a){for(var b=0,c=0;c<a.length;c++)isNaN(a[c])&&b++;return b};
dvt.Ub.A0a=function(a,b){var c=dvt.Ub.nza(a),d=dvt.Ub.nza(b);if(c!=d){var e=0,f=0;c>d?(e=c-d,f=d,c=b):(e=d-c,f=c,c=a);d=Math.floor(f/e);1>d&&(d=1);f=Math.floor(e/f);1>f&&(f=1);for(var h=-1,k=0;k<c.length;k++)if(isNaN(c[k])){if(h==d)for(var m=h=0;m<f;m++)c.splice(k++,0,"tmp"),e--;h++}for(k=0;k<e;k++)"Z"==c[c.length-1]?c.splice(c.length-1,0,"tmp"):c.push("tmp")}};dvt.Ub.nDa=function(a){return 2<a.length&&"Z"==a[a.length-1]?(a.splice(a.length-1,1),a.push("L",a[1],a[2]),n):t};
dvt.Ub.HWa=function(a,b,c,d){b=dvt.Ub.XHa(a.TN(),b.TN());var e=dvt.Ub.CX(a);e&&dvt.Ub.tGa(b.Gqa,e);a.ob(s);d&&dvt.Ub.tGa(b.Fqa,d);a.ls(b.Gqa);c.J(dvt.B.Gl,a,a.TN,a.ls,b.Fqa)};
dvt.Ub.XHa=function(a,b){var c=dvt.ea.copy(a),d=dvt.ea.copy(b),e=[],f=[];dvt.Ub.VCa(c);dvt.Ub.VCa(d);dvt.Ub.YCa(c);dvt.Ub.YCa(d);dvt.Ub.ZCa(c);dvt.Ub.ZCa(d);dvt.Ub.$Ca(c);dvt.Ub.$Ca(d);var h=dvt.Ub.Hya(c),k=dvt.Ub.Hya(d);dvt.Ub.OFa(h);dvt.Ub.OFa(k);for(var m=0;m<Math.max(h.length,k.length);m++){var p=[],q=[],r=s,u=s;m<h.length?r=h[m]:(r=["M",c[1],c[2]],"Z"==k[m][k[m].length-1]&&r.push("Z"));m<k.length?u=k[m]:(u=["M",d[1],d[2]],"Z"==h[m][h[m].length-1]&&u.push("Z"));dvt.Ub.IWa(r,u,p,q);f=f.concat(p);
e=e.concat(q)}return{Gqa:f,Fqa:e}};dvt.Ub.Hya=function(a){for(var b=[],c=0,d=1;d<a.length;d++)if("M"==a[d]||"m"==a[d])b.push(a.slice(c,d)),c=d;1>b.length?b.push(a):c<a.length&&b.push(a.slice(c));return b};dvt.Ub.OFa=function(a){a.sort(dvt.Ub.xXa)};dvt.Ub.xXa=function(a,b){var c=dvt.Ub.Oya(a),d=dvt.Ub.Oya(b);return c>d?-1:d>c?1:0};
dvt.Ub.Oya=function(a){for(var b=0,c=0,d=0,e=0,f=0,h=0,k=0,m=0;m<a.length;){switch(a[m]){case "M":f=a[m+1];h=a[m+2];break;case "L":b=a[m+1];c=a[m+2];break;case "C":b=a[m+5];c=a[m+6];break;case "Q":b=a[m+3];c=a[m+4];break;case "A":b=a[m+6];c=a[m+7];break;case "Z":b=f,c=h}k+=Math.sqrt((b-d)*(b-d)+(c-e)*(c-e));m=dvt.Ub.jF(a,m+1);d=b;e=c}return k};
dvt.Ub.IWa=function(a,b,c,d){var e=dvt.Ub.nDa(a),f=dvt.Ub.nDa(b);if(e||a[a.length-2]==a[1]&&a[a.length-1]==a[2])a=dvt.Ub.XCa(a),a=dvt.Ub.WCa(a);if(f||b[b.length-2]==b[1]&&b[b.length-1]==b[2])b=dvt.Ub.XCa(b),b=dvt.Ub.WCa(b);dvt.Ub.A0a(a,b);dvt.Ub.GWa(a,b,c,d);e&&a.push("Z");f&&b.push("Z")};
dvt.Ub.GWa=function(a,b,c,d){for(var e=0,f=0,h=0,k=0,m=0,p=0,q=t,r=t;-1<e||-1<f;){var u=-1<e?a[e]:s,v=-1<f?b[f]:s,w=-1<e?dvt.Ub.jF(a,e+1):-1,x=-1<f?dvt.Ub.jF(b,f+1):-1;if(u==v){for(;f<x;f++)d.push(b[f]);for(f=e;f<w;f++)c.push(a[f])}else!u||"tmp"==u?"L"==v?(d.push("L",b[f+1],b[f+2]),c.push("L",h,k)):"Q"==v?(d.push("Q",b[f+1],b[f+2],b[f+3],b[f+4]),c.push("Q",h,k,h,k)):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6]),c.push("C",h,k,h,k,h,k)):"A"==v?(d.push("A",b[f+1],b[f+2],b[f+3],b[f+4],
b[f+5],b[f+6],b[f+7]),c.push("A",0,0,b[f+3],b[f+4],b[f+5],h,k)):"Z"==v&&(d.push("Z"),c.push("Z")):!v||"tmp"==v?"L"==u?(d.push("L",m,p),c.push("L",a[e+1],a[e+2])):"Q"==u?(d.push("Q",m,p,m,p),c.push("Q",a[e+1],a[e+2],a[e+3],a[e+4])):"C"==u?(d.push("C",m,p,m,p,m,p),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])):"A"==u?(d.push("A",0,0,a[e+3],a[e+4],a[e+5],m,p),c.push("A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"Z"==u&&(d.push("Z"),c.push("Z")):"L"==u?"Q"==v?(d.push("Q",b[f+1],b[f+2],
b[f+3],b[f+4]),c.push("Q",h+0.5*(a[e+1]-h),k+0.5*(a[e+2]-k),a[e+1],a[e+2])):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6]),c.push("C",h+0.5*(a[e+1]-h),k+0.5*(a[e+2]-k),h+0.5*(a[e+1]-h),k+0.5*(a[e+2]-k),a[e+1],a[e+2])):"A"==v?(d.push("L",m,p,"A",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],b[f+7]),c.push("L",a[e+1],a[e+2],"A",0,0,b[f+3],b[f+4],b[f+5],a[e+1],a[e+2])):"Z"==v&&(q=n,d.push("L",m,p),c.push("L",a[e+1],a[e+2])):"Q"==u?"L"==v?(d.push("Q",m+0.5*(b[f+1]-m),p+0.5*(b[f+2]-p),b[f+1],
b[f+2]),c.push("Q",a[e+1],a[e+2],a[e+3],a[e+4])):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6]),c.push("C",a[e+1],a[e+2],a[e+1],a[e+2],a[e+3],a[e+4])):"A"==v?(d.push("Q",m,p,m,p,"A",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],b[f+7]),c.push("Q",a[e+1],a[e+2],a[e+3],a[e+4],"A",0,0,b[f+3],b[f+4],b[f+5],a[e+3],a[e+4])):"Z"==v&&(q=n,d.push("Q",m,p,m,p),c.push("Q",a[e+1],a[e+2],a[e+3],a[e+4])):"C"==u?"L"==v?(d.push("C",m+0.5*(b[f+1]-m),p+0.5*(b[f+2]-p),m+0.5*(b[f+1]-m),p+0.5*(b[f+2]-p),b[f+
1],b[f+2]),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])):"Q"==v?(d.push("C",b[f+1],b[f+2],b[f+1],b[f+2],b[f+3],b[f+4]),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])):"A"==v?(d.push("C",m,p,m,p,m,p,"A",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],b[f+7]),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],"A",0,0,b[f+3],b[f+4],b[f+5],a[e+5],a[e+6])):"Z"==v&&(q=n,d.push("C",m,p,m,p,m,p),c.push("C",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6])):"A"==u?"L"==v?(d.push("L",b[f+1],b[f+2],"A",
0,0,a[e+3],a[e+4],a[e+5],b[f+1],b[f+2]),c.push("L",h,k,"A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"Q"==v?(d.push("Q",b[f+1],b[f+2],b[f+3],b[f+4],"A",0,0,a[e+3],a[e+4],a[e+5],b[f+3],b[f+4]),c.push("Q",h,k,h,k,"A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],"A",0,0,a[e+3],a[e+4],a[e+5],b[f+5],b[f+6]),c.push("C",h,k,h,k,h,k,"A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"Z"==v&&(q=n,d.push("A",0,0,a[e+3],a[e+4],a[e+
5],m,p),c.push("A",a[e+1],a[e+2],a[e+3],a[e+4],a[e+5],a[e+6],a[e+7])):"Z"==u&&(r=n,"L"==v?(d.push("L",b[f+1],b[f+2]),c.push("L",h,k)):"Q"==v?(d.push("Q",b[f+1],b[f+2],b[f+3],b[f+4]),c.push("Q",h,k,h,k)):"C"==v?(d.push("C",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6]),c.push("C",h,k,h,k,h,k)):"A"==v&&(d.push("A",b[f+1],b[f+2],b[f+3],b[f+4],b[f+5],b[f+6],b[f+7]),c.push("A",0,0,b[f+3],b[f+4],b[f+5],h,k)));-1<w&&("Z"!=u&&"tmp"!=u)&&(h=a[w-2],k=a[w-1]);-1<x&&("Z"!=v&&"tmp"!=v)&&(m=b[x-2],p=b[x-1]);e=w;f=
x;if(e>=a.length||0>e)e=-1;if(f>=b.length||0>f)f=-1}if(r||q)d.push("Z"),c.push("Z")};
dvt.Ub.WCa=function(a){if(!dvt.Ub.$_a(a)){for(var b=["M"],c=dvt.Ub.oR(a,a.length-1);-1<c;){var d=a[c];switch(d){case "M":b.push(a[c+1],a[c+2]);break;case "L":b.push(a[c+1],a[c+2]);b.push(d);break;case "Q":b.push(a[c+3],a[c+4]);b.push(d);b.push(a[c+1],a[c+2]);break;case "C":b.push(a[c+5],a[c+6]);b.push(d);b.push(a[c+3],a[c+4]);b.push(a[c+1],a[c+2]);break;case "A":b.push(a[c+6],a[c+7]),b.push(d),b.push(a[c+1],a[c+2],a[c+3],a[c+4]),b.push(0==a[c+5]?1:0)}c=dvt.Ub.oR(a,c-1)}return b}return a};
dvt.Ub.$_a=function(a){for(var b=[],c=0,d=Number.MAX_VALUE,e=Number.MAX_VALUE,f=dvt.Ub.oR(a,a.length-1),h=1;h<f;){h=dvt.Ub.jF(a,h);if(0<h-2&&"Z"!=a[h-1]){var k=a[h-2],m=a[h-1];b.push(k,m);if(m<e||m==e&&k<d)d=k,e=m,c=b.length-2}h+=1}k=h=f=a=0;0<c?(a=b[c-2],f=b[c-1]):(a=b[b.length-2],f=b[b.length-1]);c<b.length-2?(h=b[c+2],k=b[c+3]):(h=b[0],k=b[1]);return 0>d*k+a*e+f*h-(f*d+e*h+a*k)?t:n};
dvt.Ub.XCa=function(a){for(var b=0,c=Number.MAX_VALUE,d=Number.MAX_VALUE,e=0,f=dvt.Ub.oR(a,a.length-1),h=1;h<f;){var k=dvt.Ub.jF(a,h);if(0<k-2&&"Z"!=a[k-1]){var h=a[k-2],m=a[k-1];if(m<d||m==d&&h<c)c=h,d=m,b=e}h=k+1;e=k}return 0<b?(k=dvt.Ub.jF(a,b+1),b=["M"],c=a.slice(k-2,a.length),b=b.concat(c),c=a.slice(3,k),b=b.concat(c)):a};
dvt.Ub.JZa=function(a){switch(a){case "H":case "h":case "V":case "v":return 1;case "M":case "m":case "L":case "l":case "T":case "t":return 2;case "Q":case "q":case "S":case "s":return 4;case "C":case "c":return 6;case "A":case "a":return 7}return 0};
dvt.Ub.VCa=function(a){for(var b=0;b<a.length;){var c=a[b],d=dvt.Ub.JZa(c);switch(c){case "M":b+d+1<a.length&&!isNaN(a[b+d+1])&&a.splice(b+d+1,0,"L");break;case "m":b+d+1<a.length&&!isNaN(a[b+d+1])&&a.splice(b+d+1,0,"l");break;case "Z":case "z":break;default:b+d+1<a.length&&!isNaN(a[b+d+1])&&a.splice(b+d+1,0,c)}b+=d+1}};
dvt.Ub.YCa=function(a){for(var b=0,c=0,d=0,e=0,f=0;f<a.length;){switch(a[f]){case "m":a[f]="M";0<f&&(a[f+1]=b+a[f+1],a[f+2]=c+a[f+2]);b=a[f+1];c=a[f+2];d=b;e=c;break;case "l":a[f]="L";a[f+1]=b+a[f+1];a[f+2]=c+a[f+2];b=a[f+1];c=a[f+2];break;case "h":a[f]="H";a[f+1]=b+a[f+1];b=a[f+1];break;case "v":a[f]="V";a[f+1]=c+a[f+1];c=a[f+1];break;case "c":a[f]="C";a[f+1]=b+a[f+1];a[f+2]=c+a[f+2];a[f+3]=b+a[f+3];a[f+4]=c+a[f+4];a[f+5]=b+a[f+5];a[f+6]=c+a[f+6];b=a[f+5];c=a[f+6];break;case "s":a[f]="S";a[f+1]=
b+a[f+1];a[f+2]=c+a[f+2];a[f+3]=b+a[f+3];a[f+4]=c+a[f+4];b=a[f+3];c=a[f+4];break;case "q":a[f]="Q";a[f+1]=b+a[f+1];a[f+2]=c+a[f+2];a[f+3]=b+a[f+3];a[f+4]=c+a[f+4];b=a[f+3];c=a[f+4];break;case "t":a[f]="T";a[f+1]=b+a[f+1];a[f+2]=c+a[f+2];b=a[f+1];c=a[f+2];break;case "a":a[f]="A";a[f+6]=b+a[f+6];a[f+7]=c+a[f+7];b=a[f+6];c=a[f+7];break;case "z":a[f]="Z";b=d;c=e;break;case "M":b=a[f+1];c=a[f+2];d=b;e=c;break;case "L":b=a[f+1];c=a[f+2];break;case "H":b=a[f+1];break;case "V":c=a[f+1];break;case "C":b=a[f+
5];c=a[f+6];break;case "S":b=a[f+3];c=a[f+4];break;case "Q":b=a[f+3];c=a[f+4];break;case "T":b=a[f+1];c=a[f+2];break;case "A":b=a[f+6];c=a[f+7];break;case "Z":b=d,c=e}f=dvt.Ub.jF(a,f+1)}};
dvt.Ub.ZCa=function(a){for(var b=0,c=0,d=0,e=0,f=0;f<a.length;){switch(a[f]){case "M":b=a[f+1];c=a[f+2];d=b;e=c;break;case "L":b=a[f+1];c=a[f+2];break;case "H":b=a[f+1];a[f]="L";a.splice(f+2,0,c);break;case "V":c=a[f+1];a[f]="L";a.splice(f+1,0,b);break;case "C":b=a[f+5];c=a[f+6];break;case "S":var h=dvt.Ub.oR(a,f-1),k=b,m=c;"C"==a[h]&&(m=a[h+4],k=b+(b-a[h+3]),m=c+(c-m));a[f]="C";a.splice(f+1,0,k,m);b=a[f+5];c=a[f+6];break;case "Q":b=a[f+3];c=a[f+4];break;case "T":h=dvt.Ub.oR(a,f-1);k=b;m=c;"Q"==a[h]&&
(m=a[h+2],k=b+(b-a[h+1]),m=c+(c-m));a[f]="Q";a.splice(f+1,0,k,m);b=a[f+3];c=a[f+4];break;case "A":b=a[f+6];c=a[f+7];break;case "Z":b=d,c=e}f=dvt.Ub.jF(a,f+1)}};dvt.Ub.$Ca=function(a){for(var b=0,c=0,d=0;d<a.length;d++)"Z"==a[d]?d+1<a.length&&"M"!=a[d+1]&&"m"!=a[d+1]&&a.splice(d+1,0,"M",b,c):"M"==a[d]&&(b=a[d+1],c=a[d+2])};
dvt.Ub.tGa=function(a,b){for(var c=s,d=0;d<a.length;){switch(a[d]){case "M":case "L":c=b.Oe(new dvt.N(a[d+1],a[d+2]));a[d+1]=c.x;a[d+2]=c.y;break;case "Q":c=b.Oe(new dvt.N(a[d+1],a[d+2]));a[d+1]=c.x;a[d+2]=c.y;c=b.Oe(new dvt.N(a[d+3],a[d+4]));a[d+3]=c.x;a[d+4]=c.y;break;case "C":c=b.Oe(new dvt.N(a[d+1],a[d+2]));a[d+1]=c.x;a[d+2]=c.y;c=b.Oe(new dvt.N(a[d+3],a[d+4]));a[d+3]=c.x;a[d+4]=c.y;c=b.Oe(new dvt.N(a[d+5],a[d+6]));a[d+5]=c.x;a[d+6]=c.y;break;case "A":var c=b.Oe(new dvt.N(0,0)),e=b.Oe(new dvt.N(a[d+
1],0)),f=b.Oe(new dvt.N(0,a[d+2])),f=Math.sqrt((f.x-c.x)*(f.x-c.x)+(f.y-c.y)*(f.y-c.y));a[d+1]=Math.sqrt((e.x-c.x)*(e.x-c.x)+(e.y-c.y)*(e.y-c.y));a[d+2]=f;c=b.Oe(new dvt.N(a[d+6],a[d+7]));a[d+6]=c.x;a[d+7]=c.y}d=dvt.Ub.jF(a,d+1)}};function ea(a,b,c){this.Init(a,b,c)}ba("DvtBaseDiagram",ea);dvt.j.u(ea,dvt.ac,"DvtBaseDiagram");J=ea.prototype;
J.Init=function(a,b,c){ea.q.Init.call(this,a,b,c);this.g().we.hb().setAttributeNS(s,"text-rendering","geometricPrecision");this.mja;this.JR=this.Dr=s;this.Z5;this.Rfa=n;this.Vo=new dvt.ca(a);this.Ok=new dvt.ca(a);this.Cy=new dvt.ca(a);this.BE=dvt.gd.Gra;this.Uta()};J.CV=function(){var a=this.Ma;a.mB(this.KJ());a.iz(this.oD());a.kB(this.lb());a.Ja.k(this.Vo);a.Ja.k(this.Ok);a.Ja.k(this.Cy)};J.kB=function(a){this.BE=a;this.Ma&&this.Ma.kB(a)};J.lb=D("BE");J.iz=function(a){this.jA=a;this.Ma&&this.Ma.iz(a)};
J.oD=D("jA");J.mB=function(a){this.oy=a;this.Ma&&this.Ma.mB(a)};J.KJ=D("oy");J.Uta=function(){this.iz(2);this.mB(0)};J.Om=function(){this.rR||(ea.q.Om.call(this),this.CV(),this.pu());this.rR=t};J.pu=y();J.fa=F(s);J.dd=F(s);J.xP=function(){return[]};J.cH=function(){return[]};J.tg=function(){return this.cH().length};ea.prototype.getNodeCount=ea.prototype.tg;ea.prototype.zt=function(){return this.xP().length};ea.prototype.getLinkCount=ea.prototype.zt;
function rb(a,b){if(b&&a.Lp)a.oI?(a.oI.Ia(a.yb/2),a.oI.ib(a.Lb/2),dvt.Aa.pd(a.oI,a.getWidth()-2*dvt.Aa.Lba,Infinity,a)):a.oI=a.Ara(a.Lp);else if(a.oI){var c=a.oI.getParent();c&&c.removeChild(a.oI);a.oI=s}}J=ea.prototype;J.Ara=function(a){var b=this.v();return dvt.Aa.fq(this,a,new dvt.U(0,0,this.getWidth(),this.getHeight()),this.Ua(),b._statusMessageStyle)};J.B_=D("Z5");J.Wj=D("Xc");J.oB=function(a){this.Xc="single"==a?new dvt.Sc(dvt.Sc.Az):"multiple"==a?new dvt.Sc(dvt.Sc.xz):s;this.Ua().nB(this.Xc)};
function Ca(a){return a.Xc?a.Xc.Td():s}J.Ht=function(){return this.Xc?n:t};J.Ua=D("kc");function Fl(a){return a.Ok}function Gl(a){return a.Vo}function tb(a){var b=new Bl,c=dvt.o.$(a.g());b.Wv=c;a=new vb(0,0,a.getWidth(),a.getHeight());b.wga=a;return b}
J.mx=function(a,b,c){var d=new Cl;d.setId(a.getId?a.getId():a.getData().getId());d.haa(Jd.LN(a.Zf()));var e=Jd.LN(a.Xh());d.aX=e;d.Ru=e;d.Zq(a.dm(b));d.Yq(Jd.LN(a.Ff()));d.Kf(Jd.hHa(a.mf()));d.pc(n==a.sb());if(a.Pb()&&(d.Oh(n),b=ub(a.ut()),d.Pb()&&(d.$i=b)))d.vw&&(d.vw=new vb(d.vw.x,d.vw.y,d.vw.w-(b.left+b.right),d.vw.h-(b.top+b.bottom))),d.Ru&&(d.Ru=new vb(d.Ru.x,d.Ru.y,d.Ru.w-(b.left+b.right),d.Ru.h-(b.top+b.bottom)));d.maa(a.getData().z_?a.getData().bf:s);d.$U=this;d.ZD=!c;return d};
J.XG=function(a,b,c,d){var e=new Dl;e.setId(a.getId?a.getId():a.getData().getId());e.IU(b?b:a.getData().Ve());e.sU(c?c:a.getData().Id());e.Zq(a.dm(d));e.Yq(Jd.LN(a.Ff()));e.Kf(Jd.hHa(a.mf()));b=a.W_();e.Tla=b;b=a.v_();e.xha=b;e.nK(a.PA());e.pc(n==a.sb());e.sK(n==a.xD());return e};
J.SG=function(a,b,c){var d=a.ut();if(d){var e=a.Vz;e&&(e=this.fa(e))&&e.LG(rd(d),b)}for(var e=d=Number.MAX_VALUE,f=0;f<a.tg();f++){var h=a.lG(f),k=this.fa(h.getId()),m=h.qi();m&&(d=Math.min(d,m.x),e=Math.min(e,m.y));k=h.Ff();m=h.mf();k&&m&&(d=Math.min(d,m.x+k.x),e=Math.min(e,m.y+k.y))}for(f=0;f<a.zt();f++){var h=a.IJ(f),p=this.dd(h.getId());if(m=h.Bc()){m=ff.Yba(m);for(k=0;k<m.length;k++)var q=m[k],d=Math.min(d,q.x),e=Math.min(e,q.y)}k=h.Ff();m=h.mf();k&&m&&(d=Math.min(d,m.x+k.x),e=Math.min(e,m.y+
k.y))}e=this.vra(-d,-e);d=e.x;e=e.y;for(f=0;f<a.tg();f++){h=a.lG(f);k=this.fa(h.getId());(m=h.qi())&&k.KB(m.x+d,m.y+e,b);var r=h.Ff(),q=h.mf();if(r&&q){var m=new dvt.N(q.x-m.x,q.y-m.y),q=h.pm,u=Jd.gHa(h.ll);b?(b.J(dvt.B.zz,k,k.Ff,k.Yq,r),k.mf()?b.J(dvt.B.yz,k,k.mf,k.Kf,m):k.Kf(m),q!=s&&b.J(dvt.B.Q,k,k.NA,k.lB,q),u&&(k.ll?b.J(dvt.B.yz,k,k.OA,k.Yw,u):k.Yw(u))):(k.Yq(r),k.Kf(m),q!=s&&k.lB(q),u&&k.Yw(u))}k.Pb()&&(h=h.ut())&&k.LG(rd(h),b)}if(!this.JE)for(f=0;f<a.zt();f++){h=a.IJ(f);p=this.dd(h.getId());
if(m=h.Bc()){0<m.length&&!isNaN(m[0])&&(m=ff.B1(m));for(var v=[],k=0;k<m.length;)isNaN(m[k])?(v.push(m[k]),k++):(v.push(m[k]+d),v.push(m[k+1]+e),k+=2);b&&p.Bc()?0<v.length&&isNaN(v[0])?(k=dvt.Ub.XHa(p.Bc(),v),p.ce(k.Gqa),b.J(dvt.B.Gl,p,p.Bc,p.ce,k.Fqa),dvt.$a.Ib(b,function(){p.ce(v)})):b.J(dvt.B.Is,p,p.Bc,p.ce,v):p.ce(v)}k=Jd.b5a(h.Ff());m=h.mf();q=h.pm;u=Jd.gHa(h.ll);k&&m&&(h=new dvt.N(m.x+d,m.y+e),b?(b.J(dvt.B.zz,p,p.Ff,p.Yq,k),p.mf()?b.J(dvt.B.yz,p,p.mf,p.Kf,h):p.Kf(h),q!=s&&b.J(dvt.B.Q,p,p.NA,
p.lB,q),u&&(p.ll?b.J(dvt.B.yz,p,p.OA,p.Yw,u):p.Yw(u))):(p.Yq(k),p.Kf(h),q!=s&&p.lB(q),u&&p.Yw(u)))}if(b=a.UJ())this.Dr=new dvt.U(b.x+d,b.y+e,b.w,b.h),this.JR=a.Vz;c&&(this.mja=new dvt.N(d,e))};function Ma(a,b){var c;if(a.Dr&&(c=new dvt.U(a.Dr.x,a.Dr.y,a.Dr.a,a.Dr.b),a.JR))for(var d=a.fa(a.JR);d;){var e=d.la(),f=d.ia();if(b){var h=b.Xf(d,d.la),k=b.Xf(d,d.ia);if(h||0==h)e=h;if(k||0==k)f=k}c.x+=e;c.y+=f;d=(d=d.getData().z_?d.getData().bf:s)?a.fa(d):s}return c}J.vra=function(a,b){return new dvt.N(a,b)};
J.sB=function(a,b){if(0==this.oy){var c=this.Ma,d=b?b:La(this,a,l,l),e=Hl(this,d);c.mB(0.5*Math.min(e,c.oD()));return d}return s};function Hl(a,b){if(!b)return 0;var c=a.Ma;return Math.min((a.yb-2*c.Dw)/b.a,(a.Lb-2*c.Dw)/b.b)}
function La(a,b,c,d){var e=s,f,h,k,m,p=a.Ma.Ja;c||(c=a.cH());for(var q=0;q<c.length;q++)if(f=c[q],(m=a.fa(f))&&m.dc&&!m.cg){var r=m,u=b;f=r.Zf();h=new dvt.U(f.x,f.y,f.a,f.b);k=s;u&&(k=u.Xf(r,r.mf));k||(k=r.mf());var v=s,w=s;u&&(v=u.Xf(r,r.NA),w=u.Xf(r,r.OA));v==s&&(v=r.pm);w||(w=r.ll);r=r.Ff();k&&r&&(v!=s&&(r=Il(r,v,w)),h.x=Math.min(f.x,r.x+k.x),h.y=Math.min(f.y,r.y+k.y),h.a=Math.max(f.x+f.a,r.x+k.x+r.a)-h.x,h.b=Math.max(f.y+f.b,r.y+k.y+r.b)-h.y);f=h;k=h=s;b&&(h=b.Xf(m,m.la),k=b.Xf(m,m.ia));h==s&&
(h=m.la());k==s&&(k=m.ia());f.x+=h;f.y+=k;if(h=m.getData().z_?m.getData().bf:s)h=m.getParent(),m=md(new dvt.N(f.x,f.y),h,b),m=nd(m,p,b),h=md(new dvt.N(f.x+f.a,f.y+f.b),h,b),h=nd(h,p,b),f.x=m.x,f.y=m.y,f.a=h.x-m.x,f.b=h.y-m.y;e?(m=e.x,h=e.y,e.x=Math.min(e.x,f.x),e.y=Math.min(e.y,f.y),e.a=Math.max(m+e.a,f.x+f.a)-e.x,e.b=Math.max(h+e.b,f.y+f.b)-e.y):e=f}d||(d=a.xP());for(q=0;q<d.length;q++)if(c=d[q],(c=a.dd(c))&&c.dc){m=c;h=b;f=new dvt.U(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);
k=s;h&&(k=h.Xf(m,m.Bc));k||(k=m.Bc());if(k){k=ff.Yba(k);for(var x=l,x=r=w=v=l,u=0;u<k.length;u++)x=k[u],v=Math.max(f.x+f.a,x.x),w=Math.max(f.y+f.b,x.y),r=Math.min(f.x,x.x),x=Math.min(f.y,x.y),f.x=r,f.y=x,f.a=v-r,f.b=w-x}k=new dvt.U(f.x,f.y,f.a,f.b);v=s;h&&(v=h.Xf(m,m.mf));v==s&&(v=m.mf());r=w=s;h&&(w=h.Xf(m,m.NA),r=h.Xf(m,m.OA));w==s&&(w=m.pm);r||(r=m.ll);m=m.Ff();v&&m&&(w!=s&&(m=Il(m,w,r)),k.x=Math.min(f.x,m.x+v.x),k.y=Math.min(f.y,m.y+v.y),k.a=Math.max(f.x+f.a,m.x+v.x+m.a)-k.x,k.b=Math.max(f.y+
f.b,m.y+v.y+m.b)-k.y);f=k;if(h=c.getData().z_?c.getData().bf:s)c=c.getParent(),m=md(new dvt.N(f.x,f.y),c,b),m=nd(m,p,b),h=md(new dvt.N(f.x+f.a,f.y+f.b),c,b),h=nd(h,p,b),f.x=m.x,f.y=m.y,f.a=h.x-m.x,f.b=h.y-m.y;e?(m=e.x,h=e.y,e.x=Math.min(e.x,f.x),e.y=Math.min(e.y,f.y),e.a=Math.max(m+e.a,f.x+f.a)-e.x,e.b=Math.max(h+e.b,f.y+f.b)-e.y):e=f}return e}
function Il(a,b,c){if(b==s&&!c)return a;var d=new dvt.N(a.x,a.y),e=new dvt.N(a.x+a.a,a.y),f=new dvt.N(a.x,a.y+a.b);a=new dvt.N(a.x+a.a,a.y+a.b);var h=new dvt.Mb;b!=s&&(c&&h.translate(-c.x,-c.y),h.rotate(b),c&&h.translate(c.x,c.y));b=h.Oe(d);e=h.Oe(e);f=h.Oe(f);d=h.Oe(a);a=Math.min(Math.min(b.x,e.x),Math.min(f.x,d.x));h=Math.max(Math.max(b.x,e.x),Math.max(f.x,d.x));c=Math.min(Math.min(b.y,e.y),Math.min(f.y,d.y));b=Math.max(Math.max(b.y,e.y),Math.max(f.y,d.y));return new dvt.U(a,c,h-a,b-c)}
function nd(a,b,c){for(var d=b.Q_(),e=a,f=d.length-1;0<=f;f--){b=d[f];a=b.kb().Ca();var h=s,k=s;c&&(h=c.Xf(b,b.la),k=c.Xf(b,b.ia));h!=s&&(a.Wd=h);k!=s&&(a.Sd=k);a.tD();e=a.Oe(e)}return e}function md(a,b,c){for(var d=b.Q_(),e=a,f=0;f<d.length;f++){b=d[f];a=b.kb().Ca();var h=s,k=s;c&&(h=c.Xf(b,b.la),k=c.Xf(b,b.ia));h!=s&&(a.Wd=h);k!=s&&(a.Sd=k);e=a.Oe(e)}return e}
J.aV=function(a,b,c,d,e){var f=this.Ma,h=f.Ze().a/2,k=f.Ze().b/2;c=h-(c+a)*e;d=k-(d+b)*e;a=h-a*e;b=k-b*e;this.Dr&&(k=Ma(this),-k.x*e<c?(h=c+k.x*e,c-=h,a+=h):-k.x*e>a&&(h=-k.x*e-a,c-=h,a+=h),-k.y*e<d?(e=d+k.y*e,d-=e,b+=e):-k.y*e>b&&(e=-k.y*e-b,d-=e,b+=e));f.CU(c);f.DU(d);f.AU(a);f.BU(b)};function rd(a){var b={};b.top=a.top;b.right=a.right;b.bottom=a.bottom;b.left=a.left;return b}function ub(a){var b={};b.top=a.top;b.right=a.right;b.bottom=a.bottom;b.left=a.left;return b}J.lU=y();
function sd(a,b){a.haa(Jd.LN(b.Zf()));var c=Jd.LN(b.Xh());a.aX=c;a.Ru=c;a.Yq(Jd.LN(b.Ff()));a.ZD=n}function Lg(a,b){this.Init(a,b)}dvt.j.u(Lg,dvt.bL,"DvtBaseDiagramKeyboardHandler");J=Lg.prototype;J.Init=function(a,b){Lg.q.Init.call(this,a,b);this.C=a};J.Oa=D("C");J.yD=function(a){return a.keyCode==dvt.G.Sh?t:this.Xi(a)&&!a.ctrlKey};J.qv=function(a){return a.keyCode==dvt.G.wi&&a.ctrlKey};
J.o9=function(a,b,c){b=b.keyCode;if(!c||1>c.length||!a)return s;var d=c[0];a=a.Dg();a=a.x+a.a/2;for(var e=0;e<c.length;e++){var f=c[e],h=f.Dg(),h=h.x+h.a/2;if(b==dvt.G.ZK&&h<=a||b==dvt.G.DK&&h>=a){d=f;break}}return d};
J.H9=function(a,b,c,d){if(!d)return s;if(!b)return d[0];if(!a)return b;for(var e=0;e<d.length;e++){var f=d[e],h=f,k=a,m=f,p=this.PK(m.Ve?m.Ve():m.getData().Ve()),m=this.PK(m.Id?m.Id():m.getData().Id()),p=k==p?m:p,k=Jl(k),p=Jl(p),k=Math.atan2(p.y-k.y,p.x-k.x),k=0>k?k+2*Math.PI:k;h.ifa=k;p=h=f;k=this.PK(p.Ve?p.Ve():p.getData().Ve());p=this.PK(p.Id?p.Id():p.getData().Id());k=Jl(k);p=Jl(p);h.vL=Math.sqrt(Math.pow(p.x-k.x,2)+Math.pow(p.y-k.y,2));f.oW=a==this.PK(f.Id?f.Id():f.getData().Id())?1:0}d.sort(Kl());
for(a=0;a<d.length;a++)e=d[a],e.ifa=l,e.vL=l,e.oW=l;c=c.keyCode==dvt.G.xg?n:t;for(e=a=0;e<d.length;e++)if(d[e]===b){a=c?e==d.length-1?0:e+1:0==e?d.length-1:e-1;break}return d[a]};J.PK=F(s);function Jl(a){a=a.Dg();return new dvt.N(a.x+a.a/2,a.y+a.b/2)}function Kl(){return function(a,b){var c=a.ifa,d=b.ifa,e=-1;!Ll(c,d)&&c>d?e=1:Ll(c,d)&&(a.vL>b.vL?e=1:b.vL==a.vL&&a.oW>b.oW?e=1:b.vL==a.vL&&a.oW==b.oW&&(e=0));return e}}
function Ll(a,b){var c=1E-7>=Math.abs(a-b);c||(c=1E-7>=Math.abs(2*Math.PI+Math.min(a,b)-Math.max(a,b)));return c}function ne(a,b,c){this.Init(a,b,c)}dvt.j.u(ne,dvt.ca,"DvtBaseDiagramNode");J=ne.prototype;J.Init=function(a,b,c){ne.q.Init.call(this,a,s,b);this.C=c;this.Og=this.lm=t;this.tN=n;this.Jb;this.XX;this.pm;this.ll;this.Eq;this.Xm};J.Oa=D("C");J.getData=F(s);J.Zf=function(){return this.Xh()};J.Xh=function(){return new dvt.U(0,0,this.getWidth(),this.getHeight())};J.dm=function(){return{}};
J.Kf=function(a){if(a){this.XX=a;var b=this.Jb;this.Ff();b&&(a=hf(a,this.pm,this.ll),b.ob(a))}};J.mf=D("XX");J.Ff=F(s);J.Yq=y();J.ut=F(s);J.LG=y();J.Pb=D("lm");J.Oh=z("lm");J.sb=D("Og");ba("DvtBaseDiagramNode.prototype.isSelected",ne.prototype.sb);J=ne.prototype;J.pc=z("Og");J.bi=z("tN");J.mb=function(){return this.Oa().Ht()&&this.tN};J.M0=z("cg");J.d$a=D("cg");J.lB=function(a){this.pm=a;var b=this.Jb;this.Ff();b&&(a=hf(this.mf(),a,this.ll),b.ob(a))};J.NA=D("pm");
J.Yw=function(a){this.ll=a;var b=this.Jb;this.Ff();b&&(a=hf(this.mf(),this.pm,a),b.ob(a))};J.OA=D("ll");function hf(a,b,c){var d=new dvt.Mb;b!=s&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d}J.KB=function(a,b,c){c?(c.J(dvt.B.Q,this,this.la,this.Z,a),c.J(dvt.B.Q,this,this.ia,this.ma,b)):this.Fa(a,b)};J.pe=F(s);
J.Dg=function(a){var b=this.Xh(a);a=this.vd(new dvt.N(b.x,b.y));b=this.vd(new dvt.N(b.x+b.a,b.y+b.b));return new dvt.U(a.x,a.y,b.x-a.x,b.y-a.y)};J.Bm=function(){return this.hb()};J.Rf=y();J.Md=y();J.Od=y();J.ze=F(s);function Db(a,b){a.Eq||(a.Eq=[]);a.Eq.push(b)}function Eb(a,b){a.Xm||(a.Xm=[]);a.Xm.push(b)}function Ld(a,b,c){this.Init(a,b,c)}dvt.j.u(Ld,dvt.ca,"DvtBaseDiagramLink");J=Ld.prototype;
J.Init=function(a,b,c){Ld.q.Init.call(this,a,s,b);this.C=c;this.DE;this.Qk;this.RC;this.Jb;this.XX;this.pm;this.ll;this.Og=t;this.tN=n;this.W;this.cj;this.ij};J.Oa=D("C");J.K0=y();J.xt=F(s);J.T0=y();J.a9a=D("ij");ba("DvtBaseDiagramLink.prototype.getStartConnector",Ld.prototype.a9a);Ld.prototype.v7a=D("cj");ba("DvtBaseDiagramLink.prototype.getEndConnector",Ld.prototype.v7a);J=Ld.prototype;J.pB=z("W");J.yc=D("W");J.lB=function(a){this.pm=a;var b=this.Jb;this.Ff();b&&(a=Ml(this.mf(),a,this.ll),b.ob(a))};
J.NA=D("pm");J.Yw=function(a){this.ll=a;var b=this.Jb;this.Ff();b&&(a=Ml(this.mf(),this.pm,a),b.ob(a))};J.OA=D("ll");J.mf=D("XX");J.Kf=function(a){if(a){this.XX=a;var b=this.Jb;this.Ff();b&&(a=Ml(a,this.pm,this.ll),b.ob(a))}};J.Ff=F(s);J.Yq=y();J.W_=F(0);J.v_=F(0);J.bi=z("tN");J.mb=function(){return this.Oa().Ht()&&this.tN};J.sb=D("Og");ba("DvtBaseDiagramLink.prototype.isSelected",Ld.prototype.sb);J=Ld.prototype;J.pc=z("Og");J.sK=y();J.xD=F(t);J.nK=y();J.PA=F(1);
ba("DvtBaseDiagramLink.prototype.getLinkWidth",Ld.prototype.PA);J=Ld.prototype;J.yU=y();J.eO=F("solid");J.xU=y();J.jG=F(s);J.tt=F(s);J.Esa=function(){return this.eO()};J.LK=function(){return this.PA()};J.Dsa=function(){return this.jG()};function Sd(a,b,c,d,e){if(c||e){var f;e||(f=a.W.yd().Ca(),f.On(dvt.Pc.mr),f.Ge(t));if(c=Td.zra(a.g(),c,e,f,a))a.W.k(c),Td.YP(c,0,e,b,d);return c}}
J.ce=function(a){this.DE=a;ff.r2(a)?(this.RC=a,this.Qk=ff.yra(a)):(this.Qk=a,this.RC=ff.B1(a));this.W&&this.W instanceof dvt.nb&&(this.W.ls(this.RC),this.cj?Td.YP(this.cj,this.xt(),this.tt(Td.tP),this.Qk,1):this.cj=Sd(this,this.Qk,this.xt(),1,this.tt(Td.tP)),this.ij?Td.YP(this.ij,this.mv(),this.tt(Td.RP),this.Qk,0):this.ij=Sd(this,this.Qk,this.mv(),0,this.tt(Td.RP)));var b=a=s;this.pg&&this.pg.pJ instanceof dvt.nb&&this.pg.pJ.ls(this.RC);this.pg&&(a=this.pg.Ey)&&Td.YP(a,this.mv(),this.tt(Td.RP),this.Qk,
0);this.pg&&(b=this.pg.Dy)&&Td.YP(b,this.xt(),this.tt(Td.tP),this.Qk,1);this.lw&&this.lw.pJ instanceof dvt.nb&&this.lw.pJ.ls(this.RC);this.DS&&this.DS.Gm(Wd(this));this.bR&&this.bR.Gm(Xd(this))};J.Bc=D("DE");function Wd(a){return!a.Qk?s:new dvt.N(a.Qk[0],a.Qk[1])}function Xd(a){if(!a.Qk)return s;var b=a.Qk.length;return new dvt.N(a.Qk[b-2],a.Qk[b-1])}function Ml(a,b,c){var d=new dvt.Mb;b!=s&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d}
J.hV=function(a,b,c){!b&&0!=b&&(b=1);!c&&0!=c&&(c=0);c=this.LK()+c;a=new dvt.ta(a,b,c);return new Nl(this.g(),this.RC,a)};function Pd(a,b,c,d){b=a.hV(b,c,d);a.ij&&a.mv()&&(c=a.mv(),d=Ol(b,a.Qk,c,a.tt(Td.RP),a,0),b.Ey&&b.removeChild(b.Ey),b.Ey=d,b.lma=c,b.k(b.Ey));a.cj&&a.xt()&&(c=a.xt(),a=Ol(b,a.Qk,c,a.tt(Td.tP),a,1),b.Dy&&b.removeChild(b.Dy),b.Dy=a,b.kma=c,b.k(b.Dy));return b}function Qd(a,b,c){a=a.Esa();a=ff.xra(a);b.On(a,ff.Usa(a,c),ff.Vsa(a,c))}
function Od(a,b){if(a){var c=s;b.xc&&(c=b.xc());if(c){var d=a.yd()?a.yd().Ca():s,e=a.qd()?a.qd().Ca():s;d&&d.uv&&(d.uv(c),a.xa(d));e&&e.uv&&(e.uv(c),a.ga(e))}}}J.pe=F(s);J.Dg=function(a){return this.V(a)};J.Bm=function(){return this.hb()};J.Rf=y();J.Md=y();J.Od=y();J.ze=F(s);var Jd={};dvt.j.u(Jd,dvt.j,"DvtDiagramLayoutUtils");
Jd.A9a=function(a){for(var b=Jd.i8a(a),c=Math.max(b.w,b.h),b=a.tg(),d=a.zt(),e=Math.floor(Math.sqrt(b)),f=0,f=(f=a.dm())&&f.padding?f.padding:0<d?c:0.25*c,c=c+f,d=-(Math.ceil(b/e)-1)*c/2,f=-(e-1)*c/2,h=0;h<b;h++)Jd.S4a(a.lG(h),d+c*Math.floor(h/e),f+c*(h%e))};Jd.i8a=function(a){for(var b=a.tg(),c=0,d=0,e=0;e<b;e++){var f=a.lG(e),h=f.tf(),c=Math.max(h.w,c),d=Math.max(h.h,d);if(f=f.Ff())c=Math.max(f.w,c),d=Math.max(h.h+f.h,d)}return new vb(0,0,c,d)};
Jd.S4a=function(a,b,c){var d=a.Xh();a.Gm(new td(b-d.x-0.5*d.w,c-d.y-0.5*d.h));Jd.Bab(a)};Jd.Bab=function(a){var b=a.tf(),c=a.qi(),d=a.Ff();d&&a.Kf(new td(b.x+c.x+0.5*(b.w-d.w),b.y+c.y+b.h))};Jd.LN=function(a){return a===l||a==s?s:new vb(a.x,a.y,a.a,a.b)};Jd.hHa=function(a){return a===l||a==s?s:new td(a.x,a.y)};Jd.b5a=function(a){return a?new dvt.U(a.x,a.y,a.w,a.h):s};Jd.gHa=function(a){return a?new dvt.N(a.x,a.y):s};function Nl(a,b,c){Nl.q.Init.call(this,a);this.Init(a,b,c)}dvt.j.u(Nl,dvt.ca,"DvtDiagramLinkUnderlay");
Nl.prototype.Init=function(a,b,c){b||(b=["M",0,0,"L",1,0]);this.Kr=c;this.Kr||(this.Kr=new dvt.ta("#ffffff",1,1));this.pJ=new dvt.nb(a,b);this.pJ.xa(c);this.pJ.ga(s);this.k(this.pJ);this.kma=this.Dy=this.lma=this.Ey=s};function Ol(a,b,c,d,e,f){a=Td.zra(a.g(),c,d,a.Kr,e);Td.YP(a,0,d,b,f);return a}
Nl.prototype.xa=function(a,b){this.Kr=a;dvt.o.Ta()&&(dvt.o.bq()&&1==dvt.o.UN())&&a.Ge(n);this.pJ.xa(a);if(this.Ey){var c=a.Ca();c.On(dvt.Pc.mr);c.Ge(t);if(this.lma==Td.q1||this.lma==Td.r1)c.Xa(b),this.Ey.eb(a.xc());this.Ey.xa(c)}if(this.Dy){c=a.Ca();c.On(dvt.Pc.mr);c.Ge(t);if(this.kma==Td.q1||this.kma==Td.r1)c.Xa(b),this.Dy.eb(a.xc());this.Dy.xa(c)}};Nl.prototype.yd=D("Kr");var ff={};dvt.j.u(ff,dvt.j,"DvtDiagramLinkUtils");
ff.xra=function(a){var b=dvt.Pc.mr;switch(a){case "dash":b=dvt.Pc.YG;break;case "dot":b=dvt.Pc.jV;break;case "dashDot":b=dvt.Pc.xba}return b};ff.Usa=function(a,b){if(dvt.Pc.mr==a)return s;if(dvt.Pc.YG==a)return b?"8,2":"6,4";if(dvt.Pc.jV==a)return b?"4,1":"2,3";if(dvt.Pc.xba==a)return b?"10,1,4,1":"8,3,2,3"};ff.Vsa=function(a,b){return b&&dvt.Pc.mr!=a?1:s};ff.B1=function(a){var b=[];if(a)for(var c=0;c<a.length;c+=2)0==c?b.push("M"):b.push("L"),b.push(a[c]),b.push(a[c+1]);return b};
ff.yra=function(a){var b=[];if(a)for(var c=0;c<a.length;c++)isNaN(a[c])||b.push(a[c]);return b};ff.r2=function(a){return a&&0<a.length?isNaN(a[0]):t};ff.Yba=function(a){var b=[];a=ff.r2(a)?ff.yra(a):a;for(var c=0;c<a.length;c+=2)b.push(new dvt.N(a[c],a[c+1]));return b};var Td={};dvt.j.u(Td,dvt.j,"DvtDiagramLinkConnectorUtils");Td.tP="endConnector";Td.RP="startConnector";Td.nra="arrowOpen";Td.q1="arrow";Td.r1="arrowConcave";Td.pra="rectangle";Td.qra="rectangleRounded";Td.ora="circle";
Td.zra=function(a,b,c,d,e){if(c)return Td.oNa(c,e);c=e.LK();switch(b){case Td.q1:return Td.pNa(a,c,e.jG());case Td.r1:return Td.qNa(a,c,e.jG());case Td.nra:return Td.vNa(a,c,d);case Td.ora:return Td.nNa(a,c,d);case Td.pra:return Td.Era(a,c,d);case Td.qra:return Td.BNa(a,c,d)}return s};Td.YP=function(a,b,c,d,e){b=Td.cNa(a,c,d,e);a.ob(b)};
Td.cNa=function(a,b,c,d){var e=-1,f=0,h=0,k=0;c&&(f=c.length,1===d?(2<=f&&(h=c[f-2],k=c[f-1]),4<=f?(e=c[f-4],f=c[f-3]):(e=h-1E-4,f=k)):(2<=f&&(h=c[0],k=c[1]),4<=f?(e=c[2],f=c[3]):(e=h+1E-4,f=k)));c=h;d=k;e=Td.bNa(e,f,h,k);h=a.AXa;h||(h=a.kb().Ca(),a.AXa=h);k=new dvt.Mb;b&&(b=Td.LAa(a),f=a.Xd(),a=a.fe(),k.translate(-0.5*b.a*f,-0.5*b.b*a));k.rotate(e);k.translate(c,d);k.concat(h);return k};Td.LAa=function(a){var b=a.dXa;b||(b=a.V(),a.dXa=b);return b};
Td.bNa=function(a,b,c,d){return Math.atan2(d-b,c-a)};Td.qNa=function(a,b,c){b=6*Td.I5(b);var d=0.8*b;a=new dvt.Rh(a,[-0.22*b,-0.5*d,0.78*b,0,-0.22*b,0.5*d,0,0]);a.eb(c);return a};Td.pNa=function(a,b,c){b=5*Td.I5(b);var d=0.8*b;a=new dvt.Rh(a,[0,-0.5*d,b,0,0,0.5*d]);a.eb(c);return a};Td.I5=function(a){if(1>=a)return a;a=0.5*(a-1);return 1+a};Td.vNa=function(a,b,c){b*=3;var d=c.getWidth();a=new dvt.ou(a,[-b+d*Math.sqrt(2)/2,-b,d*Math.sqrt(2)/2,0,-b+d*Math.sqrt(2)/2,b]);a.xa(c);a.ga(s);return a};
Td.kIa=function(a){return 2*a};Td.wJa=function(a){return 3*a};Td.nNa=function(a,b,c){b=Td.kIa(b);a=new dvt.al(a,b,0,b);a.xa(c);a.ga(s);return a};Td.Era=function(a,b,c){b=Td.wJa(b);a=new dvt.ka(a,0,-b/2,b,b);a.xa(c);a.ga(s);return a};Td.BNa=function(a,b,c){a=Td.Era(a,b,c);a.vv(b);return a};Td.oNa=function(a,b){var c=ua(b.Oa()),d=b.getData().Qo;c.ew=d;c.MG(b,b.b_);d=b.kO();c.Bw=d;return L.FO(c,a,b)};
Td.S1=function(a,b,c,d,e){if(c)return b=Td.LAa(a),a=a.Xd(),0.5*b.a*a;a=e.LK();d=d.getWidth();switch(b){case Td.nra:return d*Math.sqrt(2);case Td.q1:return b=Td.I5(a),5*b;case Td.r1:return b=Td.I5(a),0.78*6*b;case Td.ora:return 2*Td.kIa(d)+d/2;case Td.pra:case Td.qra:return Td.wJa(d)+d/2;default:return 0}};
dvt.ui=function(a,b,c){this.Init(a,b,c)};ba("dvt.Diagram",dvt.ui);dvt.j.u(dvt.ui,ea);dvt.ui.prototype.Init=function(a,b,c){dvt.ui.q.Init.call(this,a,b,c);this.Dh=new no;this.kc=new oo(a,this.If,this);this.kc.Bg(this);dvt.o.Ta()||this.kc.ns(new po(this,this.kc));this.nc={};this.Ko=[];this.ae={};this.Iz=[];this.Rp=0};dvt.ui.newInstance=function(a,b,c){return new dvt.ui(a,b,c)};dvt.ui.newInstance=dvt.ui.newInstance;J=dvt.ui.prototype;
J.OP=function(){!this.Ku&&this.yg&&("none"!=this.RQ&&(this.Dq={id:this.getId(),getId:D("id"),options:this.v(),getOptions:D("options"),panZoomMatrix:this.Ma.Ja.kb(),getPanZoomMatrix:D("panZoomMatrix"),nodes:this.nc?qo(this):[],links:this.ae?ro(this):[],getNodes:D("nodes"),getLinks:D("links")},this.Dq.v=this.Dq.getOptions,this.Dq.B8a=this.Dq.getPanZoomMatrix,this.Dq.getId=this.Dq.getId,this.Dq.mJa=this.Dq.getNodes,this.Dq.YIa=this.Dq.getLinks),this.yg=t,this.YR=this.Ma);this.Ku||this.Hda()};
J.Hda=function(){this.Vo=new dvt.ca(this.g());this.Ok=new dvt.ca(this.g());this.Cy=new dvt.ca(this.g());this.nc={};this.Ko=[];this.ae={};this.Iz=[];this.yC=s};J.Qu=function(){this.vh&&(this.removeChild(this.vh),this.vh.ra());this.vh=s;this.Ob&&(this.Ob=s,this.Ua().Bg(this))};
J.oh=function(a,b){var c=new dvt.Nd(this.g(),s,a.lb()),d=b.B8a(),e=this.Ma.Ja.kb();d.Te(e)||(this.Ma.Ja.ob(d),c.da.J(dvt.B.Ji,this.Ma.Ja,this.Ma.Ja.kb,this.Ma.Ja.ob,e));a.Tp(b.mJa(),this.nc?qo(this):[]);a.Tp(b.YIa(),this.ae?ro(this):[]);a.add(c,1)};
J.pu=function(a){var b=t;if(!this.yg&&!this.Ku){so(this);to(this);var c=[],d;for(d in this.nc)c.push(d);b=0===c.length;this.g().mK([this]);this.Rp++}if(b)this.Rp=this.yg?this.Rp:this.Rp-1,0===this.Rp&&uo(this,a,b);else{this.contains(this.YR)||this.k(this.YR);var e=this;this.rv(a).then(function(){e.Rp=e.yg?e.Rp:e.Rp-1;0===e.Rp&&uo(e,a,b)},function(){e.Rp=e.yg?e.Rp:e.Rp-1;0===e.Rp&&(e.removeChild(e.YR),e.YR=s,e.yg=n)})}};
function uo(a,b,c){var d;if(!c){a.removeChild(a.YR);a.EF();a.FF();if(d=a.Ml==s)a.Ml=La(a,b,l,l);var e=a.Ma;if(a.yg){if(a.Ku){var f=a.sB(b,a.Ml),f=h?Ma(a):f?f:a.Ml;e.Jaa(n);e.qs(s,f);e.Jaa(a.YF)}}else{a.sB(b,a.Ml);if(!a.Ku){var h=a.Dr?n:t,f=h?Ma(a):a.Ml;h&&e.ILa();e.qs(s,f)}e.jz(a.sy);e.KU(a.YF);e.Jaa(a.YF)}}a.YR=s;a.yg||(a.Ob&&a.Ob.stop(n),dvt.o.Wi()&&a.B_()&&!a.Dq?a.Ob=dvt.cc.mD(a.g(),a.B_(),a,s,a.lb()):"none"!=a.RQ&&a.Dq&&(a.vh=new dvt.ca(a.g(),"Delete Container"),a.k(a.vh),e=new vo(a.g(),a.vh,
a.Dq,a),e.Tp([a.Dq],[a]),a.Ob=e.dv()),a.Ob?(a.Ua().he(),a.Ua().$k(a),a.Ob.Qf(a.Qu,a),a.Ob.play()):a.Qu());a.yg=n;rb(a,c);a.sy&&(c=a.Ml,c!=s&&(b=a.Ma.Gf(b),a.aV(c.x,c.y,c.a,c.b,b)));a.Dr=s;a.JR=s;d&&(a.Ml=s)}
J.Nf=function(a){dvt.ui.q.Nf.call(this,a);this.zpa(this.T);this.sy="none"!=this.T.panning;this.YF="none"!=this.T.zooming;this.paa("hidden");this.RQ=this.T.animationOnDataChange;this.Z5="auto"==this.T.animationOnDisplay?dvt.cc.rB:s;this.oB(this.T.selectionMode);this.Lp=this.T.emptyText?this.T.emptyText:dvt.D.bh(this.T,"labelNoData",dvt.D.Ka,"NO_DATA")};dvt.ui.Vp=function(a){return(new no).Vp(a)};J=dvt.ui.prototype;J.oD=function(){var a=this.v().maxZoom,a=parseFloat(a);return 0<a?a:1};
J.KJ=function(){var a=this.v().minZoom;if(a){var b=parseFloat(a);0<b&&(a=Math.min(b,this.oD()));return a}return s};J.lb=function(){return dvt.Qa.cs(this.v().styleDefaults.animationDuration)/1E3};J.If=function(a){"categoryHighlight"==a.type&&this.EF();a&&this.dispatchEvent(a)};function so(a){var b=a.v().nodes;if(b)for(var c=0;c<b.length;c++){var d=b[c],d=dvt.Ac.We(d,a.v().styleDefaults.nodeDefaults),d=new wo(a.g(),a,d),e=d.getId();d.Voa()?a.Ko.push(e):(d.ua(a.Ok),a.Ko.push(e),a.nc[e]=d)}}
function to(a){var b=a.v().links;if(b)for(var c=0;c<b.length;c++){var d=b[c],d=dvt.Ac.We(d,a.v().styleDefaults.linkDefaults),e=new xo(a.g(),a,d),d=e.getId();if(e.Voa())a.Iz.push(d);else{e.ua(a.Vo);a.Iz.push(d);a.ae[d]=e;var f=a.fa(e.Ve()),e=a.fa(e.Id());Db(f,d);Eb(e,d)}}}
J.rv=function(a){for(var b=this.v().layout,c=tb(this),d={},e=0;e<this.Ko.length;e++){var f=this.Ko[e];this.fa(f)&&(d[f]=n,c.IN(this.mx(this.fa(f))))}for(var h in this.ae)if(e=this.dd(h)){var f=e.getData().startNode,k=e.getData().endNode;d[f]&&d[k]&&mb(c,this.XG(e,f,k))}if(b&&"function"==typeof b){var m=this;(b=b(c))||(b={then:function(a){a()}});this.faa(0);b.then(function(){1===m.Rp&&(m.faa(1),m.SG(c,a,n))},y());return b}this.XK("dvt.Diagram: Layout function is not defined",1)};
J.faa=function(a){this.yg||(this.Vo.P(a),this.Ok.P(a))};J.fa=function(a){return this.nc[a]};J.dd=function(a){return this.ae[a]};J.xP=D("Iz");function ro(a){var b=[],c;for(c in a.ae)b.push(a.ae[c]);return b}J.cH=D("Ko");function qo(a){var b=[],c;for(c in a.nc)b.push(a.nc[c]);return b}
J.ak=function(a){dvt.ui.q.ak.call(this,a);switch(a.dn()){case dvt.jd.O2:if(this.sy){var b=a.kA,c=this.Ml?this.Ml:La(this,a.da,l,l);this.aV(c.x,c.y,c.a,c.b,b)}break;case dvt.jd.R2:this.Dr||(c=this.Ml?this.Ml:La(this,a.da,l,l),a.HLa(c));break;case dvt.jd.CH:if(this.v().zoomRenderer&&a.VI!==a.kA)for(b in this.nc){var c=this.fa(b),d=a;if(c.C.v().zoomRenderer){var e=c.Pl(d.VI),d=c.Pl(d.kA);yo(c,c.C.v().zoomRenderer,d,e)}}}};J.bLa=y();
J.FT=function(a){var b=[],c;for(c in this.ae){var d=this.dd(c),e=d.Ve(),f=d.Id();(e==a||f==a)&&d.dc&&b.push(d)}return b};J.Km=function(){return dvt.D.na(dvt.D.Ka,"DIAGRAM")};J.FF=function(){if(this.T.selection&&this.Ht()){var a=[],b;for(b in this.nc)a.push(this.fa(b));for(var c in this.ae)a.push(this.dd(c));this.Wj().Lt(this.T.selection,a)}};
J.EF=function(){this.yC&&(this.LZ(t,this.yC),this.yC=s);var a=this.T.highlightedCategories;if(a){var b="any"==this.T.highlightMatch;this.yC={};var c=[],d;for(d in this.nc){var e=this.fa(d),f=b?dvt.ea.Yy(e.ze(),a):dvt.ea.d0(e.ze(),a);f&&(this.yC[e.getId()]=e,c.push(e))}d=this.T.nodeHighlightMode;if("node"!=d){f="nodeAndIncomingLinks"==d||"nodeAndLinks"==d;d="nodeAndOutgoingLinks"==d||"nodeAndLinks"==d;for(var e=[],h=0;h<c.length;h++)for(var k=c[h],m=f&&k.Xm?k.Xm:[],m=d&&k.Eq?m.concat(k.Eq):m,k=0;k<
m.length;k++){var p=m[k];this.yC[p]=this.dd(p);e.push(this.dd(p))}zo(this,e)}var c=[],q;for(q in this.ae)if(d=this.dd(q),f=b?dvt.ea.Yy(d.ze(),a):dvt.ea.d0(d.ze(),a))this.yC[d.getId()]=d,c.push(d);"linkAndNodes"==this.T.linkHighlightMode&&zo(this,c);this.LZ(n,this.yC)}};function zo(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.Ve(),d=d.Id();a.yC[e]=a.fa(e);a.yC[d]=a.fa(d)}}
J.LZ=function(a,b){var c=a?this.T.styleDefaults._highlightAlpha:1;this.Vo.P(c);this.Ok.P(c);for(var d in b)a?this.Cy.k(b[d]):b[d]instanceof xo?this.Vo.k(b[d]):b[d]instanceof wo&&this.Ok.k(b[d])};J.Me=function(a){this.T.highlightedCategories=dvt.Ac.Ca(a);this.EF()};dvt.ui.prototype.highlight=dvt.ui.prototype.Me;dvt.ui.prototype.select=function(a){this.T.selection=dvt.Ac.Ca(a);this.FF()};dvt.ui.prototype.select=dvt.ui.prototype.select;dvt.ui.prototype.ni=function(){this.Ud||(this.Ud=new Ao(this));return this.Ud};
dvt.ui.prototype.getAutomation=dvt.ui.prototype.ni;dvt.ui.prototype.XK=function(a,b){var c=this.v()._logger;if(c)switch(b){case 1:c.error&&c.error(a);break;case 2:c.warn&&c.warn(a);break;case 3:c.info&&c.info(a);break;default:c.log&&c.log(a)}};dvt.ui.prototype.Tw=function(a,b){var c=this.fa(a);c&&c.Tw(b)};dvt.ui.prototype.processDefaultHoverEffect=dvt.ui.prototype.Tw;dvt.ui.prototype.GG=function(a,b){var c=this.fa(a);c&&c.GG(b)};dvt.ui.prototype.processDefaultSelectionEffect=dvt.ui.prototype.GG;
dvt.ui.prototype.gB=function(a,b){var c=this.fa(a);c&&c.gB(b)};dvt.ui.prototype.processDefaultFocusEffect=dvt.ui.prototype.gB;dvt.ui.prototype.lU=function(a){var b=this.fa(a.getId());b.ZD()||(b.ua(this.Ok),sd(a,b))};function Bo(a,b){Bo.q.constructor.call(this,a,b);this.Pbb();this.C=b}dvt.j.u(Bo,dvt.Sg,"DvtDiagramCategoryRolloverHandler");Bo.prototype.gca=function(a){return dvt.j.Nh(this,function(){this.eea(n);this.C.If(a)})};
Bo.prototype.fca=function(a){return dvt.j.Nh(this,function(){this.fea();this.C.If(a)})};function no(){this.Init({skyros:Co,alta:Do})}dvt.j.u(no,dvt.fm,"DvtDiagramDefaults");
var Co={skin:dvt.e.Hh,emptyText:s,selectionMode:"none",animationOnDataChange:"none",animationOnDisplay:"none",maxZoom:1,highlightMatch:"all",nodeHighlightMode:"node",linkHighlightMode:"link",panning:"none",touchResponse:"auto",zooming:"none",_statusMessageStyle:new dvt.e("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"),styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_highlightAlpha:0.1,nodeDefaults:{labelStyle:'font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold;font-size:12px;color:#383A47',
hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",icon:{width:10,height:10,fillPattern:"none",shape:"circle"}},linkDefaults:{startConnectorType:"none",endConnectorType:"none",width:1,style:"solid",hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",labelStyle:'font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold;font-size:12px;color:#383A47',_hitDetectionOffset:4}}},Do={};
function vo(a,b,c,d){this.Init(a,b,c,d)}dvt.j.u(vo,dvt.up,"DvtDiagramDataAnimationHandler");vo.prototype.Init=function(a,b,c,d){vo.q.Init.call(this,a,b);this.P0a=c;this.Cfb=d};vo.prototype.lb=function(){return dvt.Qa.cs(this.P0a.v().styleDefaults.animationDuration)/1E3};function oo(a,b,c){this.Init(a,b,c);this.C=c}dvt.j.u(oo,dvt.K,"DvtDiagramEventManager");J=oo.prototype;
J.yp=function(a,b,c){a=this.C.v();"dim"==a.hoverBehavior&&(b=b.ze?b.ze():[],a.highlightedCategories=c?b.slice():s,c=dvt.Wa.EG(a.highlightedCategories,c),b=dvt.Qa.cs(a.styleDefaults.hoverBehaviorDelay),this.wH.If(c,qo(this.C),b,"any"==a.highlightMatch))};J.mba=function(a,b){return new Bo(a,b)};
J.Ek=function(a){var b=n,c=a.keyCode,d=this.Ye(),e=d instanceof wo?d.Yz:s;c!=dvt.G.Sh&&this.bC?(e.oT(a),a.preventDefault()):c==dvt.G.Sh&&e instanceof dvt.af?!a.shiftKey&&d.Od()?(d.Md(),e.oT(a),a.preventDefault(),this.bC=n):(a.shiftKey&&this.bC?(this.UP(a,d),a.preventDefault()):(this.bC&&d.Rf(),b=oo.q.Ek.call(this,a)),this.bC=t):b=oo.q.Ek.call(this,a);return b};J.sz=function(){var a=this.C.v();return"none"!==a.panning||"none"!==a.zooming?dvt.K.rE:a.touchResponse===dvt.K.Hx?dvt.K.Hx:dvt.K.fW};
J.Hv=function(a){return this.Sn(a,dvt.Bd.JK)};J.LB=function(a){return a==dvt.Bd.JK?t:oo.q.LB.call(this,a)};function po(a,b){this.Init(a,b)}dvt.j.u(po,Lg,"DvtDiagramKeyboardHandler");po.prototype.Xi=function(a){var b=t;switch(a.keyCode){case dvt.G.ZK:case dvt.G.DK:b=a.altKey?n:t;break;default:b=po.q.Xi.call(this,a)}return b};
po.prototype.yk=function(a){if(a.keyCode==dvt.G.Sh){var b=this.Ra.Ye();if(b)return dvt.K.oc(a),b;b=qo(this.Oa());if(0<b.length)return dvt.K.oc(a),this.AJ(b)}return po.q.yk.call(this,a)};po.prototype.PK=function(a){return this.Oa().fa(a)};function xo(a,b,c){this.Init(a,b,c)}dvt.j.u(xo,Ld,"DvtDiagramLink");J=xo.prototype;J.Init=function(a,b,c){xo.q.Init.call(this,a,c.id,b);this.Sb=c;this.C.Ht()&&this.setCursor("pointer")};J.getData=D("Sb");J.getId=function(){return this.getData().id};J.Ve=function(){return this.getData().startNode};
J.Id=function(){return this.getData().endNode};J.Ff=function(){var a=s;this.Jb&&(a=this.Jb.V());return a};J.eO=function(){return this.getData().style};J.PA=function(){return this.getData().width};J.jG=function(){return this.getData().color};J.mv=function(){return this.getData().startConnectorType};J.xt=function(){return this.getData().endConnectorType};J.W_=function(){if(this.mv()){var a=this.yc().yd().Ca();a.On(dvt.Pc.mr);return Td.S1(s,this.mv(),s,a,this)}return 0};
J.v_=function(){if(this.xt()){var a=this.yc().yd().Ca();a.On(dvt.Pc.mr);return Td.S1(s,this.xt(),s,a,this)}return 0};
J.ua=function(a){var b=this.getData(),c=this.RC;c||(c=["M",0,0,"L",0,0]);var d=b.id,e=b.color,f=b.width,h=b.style;this.lw=this.hV("#000000",0,b._hitDetectionOffset);this.k(this.lw);b=new dvt.ta(e,1,f);dvt.o.Ta()&&(dvt.o.bq()&&1==dvt.o.UN())&&b.Ge(n);h=ff.xra(h);b.On(h,ff.Usa(h),ff.Vsa(h));c=new dvt.nb(this.g(),c,d);c.ga(s);c.xa(b);this.pB(c);this.k(c);e=this.C;c=this.getData();d=dvt.o.$(e.g())?dvt.ba.Lm:dvt.ba.iq;c.label&&(h=c.labelStyle,b=dvt.ba.Bz,e=new dvt.ba(e.g(),c.label,0,0),e.zb(new dvt.e(h)),
e.fz(d),e.JD(b),c=dvt.e.qp((new dvt.e(c.labelStyle)).getWidth()),0<c&&dvt.Aa.pd(e,c,Infinity,this)||this.k(e),this.Jb=e);a.k(this);this.Pf("img");this.qq();this.C.Ua().qb(this,this)};J.pc=function(a){xo.q.pc.call(this,a);a?this.xA(this.So,n):this.kF();this.qq()};J.mb=function(){return this.Oa().Ht()&&"off"!=this.getData().selectable};
J.xA=function(a,b){if(a){this.Sk||(this.Sk=this.yc().yd());var c=this.yc().yd().Ca();c.uv&&c.uv(this.getData().hoverInnerColor);this.yc().xa(c);Od(this.ij,c);Od(this.cj,c)}else this.Sk&&(this.yc().xa(this.Sk),Od(this.ij,this.Sk),Od(this.cj,this.Sk),this.Sk=s);this.pg||(this.pg=Pd(this,"#000000",1,0),this.Fb(this.pg,0));var c=b?this.getData().selectionColor:this.getData().hoverOuterColor,d=this.pg.yd().Ca();d.uv(c);d.Xa(2+this.LK());Qd(this,d,n);this.pg.xa(d,2)};
J.kF=function(){this.Sk&&(this.yc().xa(this.Sk),Od(this.ij,this.Sk),Od(this.cj,this.Sk),this.Sk=s);this.pg&&(this.removeChild(this.pg),this.pg.ra&&this.pg.ra(),this.pg=s)};J.rd=function(){this.So||(this.So=n,this.xA(n,this.sb()))};J.Qc=function(){this.sb()?this.xA(t,n):this.kF();this.So=t};J.Pg=function(){var a=this.Oa().v().tooltip;return a?this.Oa().g().fg().JA(a,this.Ur()):this.ge()};J.ge=function(){return this.getData().shortDesc};J.Ur=function(){return{id:this.getId(),type:"link",label:this.getData().label}};
J.Gd=function(){var a=[];this.mb()&&a.push(dvt.D.na(dvt.D.Ka,this.sb()?"STATE_SELECTED":"STATE_UNSELECTED"));return dvt.ja.sk(this.ge(),a)};J.qq=function(){if(!dvt.o.Fi()){var a=this.Gd();a&&this.zd("label",a)}};
J.pe=function(a){if(a.keyCode==dvt.G.wi&&a.ctrlKey)return this;if(a.keyCode==dvt.G.hi||a.keyCode==dvt.G.xg){var b=this.ER;b||(b=this.Oa().fa(ld(this.Oa(),this)));var c=this,d=this.Oa().FT(b.getId()),e=this.Oa().Ua().Ab;e&&e.H9&&(c=e.H9(b,this,a,d));c.ER=b;return c}return a.keyCode==dvt.G.mg||a.keyCode==dvt.G.kg?(a=this.J6(a.keyCode)?this.Ve():this.Id(),this.Oa().fa(a)):a.type==dvt.pa.He?this:s};J.J6=function(a){var b=Wd(this),c=Xd(this),b=b.x<c.x?n:t;return a==dvt.G.mg&&b||a==dvt.G.kg&&!b?t:n};
J.Rf=function(){this.$c=n;this.rd()};J.Md=function(){this.$c=t;this.Qc()};J.Od=D("$c");J.ze=function(){return this.getData().categories?this.getData().categories:[this.getId()]};J.Voa=function(){var a=this.Oa().v().hiddenCategories;return a&&dvt.ea.Yy(a,this.ze())||!this.Oa().fa(this.Ve())||!this.Oa().fa(this.Id())?n:t};
J.oh=function(a,b){var c=b.Bc(),d=this.Bc(),e=new dvt.Nd(this.g(),s,a.lb());dvt.ea.Te(c,d)||(this.ce(c),c=dvt.B.Is,0<d.length&&isNaN(d[0])&&(c=dvt.B.Gl),e.da.J(c,this,this.Bc,this.ce,d));b.Jb&&this.Jb&&(d=b.Jb.kb(),c=this.Jb.kb(),d.Te(c)||(this.Jb.ob(d),e.da.J(dvt.B.Ji,this.Jb,this.Jb.kb,this.Jb.ob,c)));if(b.yc()&&this.yc()&&(d=b.yc().yd(),c=this.yc().yd(),d&&c&&d instanceof dvt.ta&&c instanceof dvt.ta&&(d.xc()!=c.xc()||d.getWidth()!=c.getWidth())))this.yc().xa(d),e.da.J(dvt.B.qL,this.yc(),this.yc().yd,
this.yc().xa,c);a.add(e,1)};J.Vj=function(a){Gl(this.Oa()).k(this);var b=this,c=new dvt.Ij(this.g(),this,a.lb());dvt.$a.Ib(c,function(){b.getParent().removeChild(b);b.ra()});a.add(c,0)};J.Si=function(a){this.P(0);a.add(new dvt.Ch(this.g(),this,a.lb()),2)};J.dm=function(){return this.getData()};function wo(a,b,c){this.Init(a,b,c)}dvt.j.u(wo,ne,"DvtDiagramNode");J=wo.prototype;J.Init=function(a,b,c){wo.q.Init.call(this,a,c.id,b);this.Sb=c;this.C.Ht()&&this.setCursor("pointer")};J.getData=D("Sb");
J.getId=function(){return this.Sb.id};J.Xh=D("KQ");J.Ff=function(){var a=s;this.Jb&&(a=this.BC?this.BC:this.Jb.V());return a};J.pc=function(a){var b=this.Pl();wo.q.pc.call(this,a);this.C.v().selectionRenderer?yo(this,this.C.v().selectionRenderer,this.Pl(),b):this.GG(a);this.qq()};J.GG=function(a){this.as()&&this.as().pc(a)};J.mb=function(){return this.Oa().Ht()&&"off"!=this.getData().selectable};J.rV=D("W");
J.ua=function(a){if(this.C.v().renderer)yo(this,this.C.v().renderer,this.Pl(),s);else{var b=this.getData(),c=this.C,d=new dvt.e(b.backgroundStyle);if(!d.fKa()){var e=dvt.e.qp(d.I(dvt.e.ao)),f=dvt.e.qp(d.I(dvt.e.ys)),h=d.I(dvt.e.Gb),k=d.I(dvt.e.pb),m=dvt.e.qp(d.I(dvt.e.Zj)),d=dvt.e.qp(d.I(dvt.e.Gg)),c=new dvt.ka(c.g(),0,0,e,f);c.eb(h);d&&(c.Ph(d),c.ai(d));k&&c.xa(new dvt.ta(k,1,m));this.k(c);this.RO(c);this.Hb=c}h=this.C;if(k=b.icon){c=k.width;e=k.height;m=k.color;h=k.source?new dvt.Jg(h.g(),c/2,e/
2,c,e,k.source,k.sourceSelected,k.sourceHover,k.sourceHoverSelected):new dvt.va(h.g(),k.shape,dvt.e.Hh,c/2,e/2,c,e);"none"!=k.fillPattern?h.ga(new dvt.jc(k.fillPattern,m,m)):h.eb(m);k.borderColor&&h.xa(new dvt.ta(k.borderColor,k.borderWidth));this.k(h);this.W=h;if(this.Hb){var k=b.icon,m=this.Hb.getWidth(),c=this.Hb.getHeight(),e=k.width,f=k.height,d=0.5*(m-e),p=0.5*(c-f);if(k.positionX!==l)d=parseFloat(k.positionX),dvt.o.$(this.g())&&(d=m-d-e);else{var q=k.halign;"start"==q?q=dvt.o.$(this.g())?"right":
"left":"end"==q&&(q=dvt.o.$(this.g())?"left":"right");d="left"==q?0:"right"==q?m-e:d}k.positionY!==l?p=parseFloat(k.positionY):"top"==k.valign?p=0:"bottom"==k.valign&&(p=c-f);this.W.Fa(d,p)}this.Hb||this.RO(h)}c=this.C;h=dvt.o.$(c.g())?dvt.ba.Lm:dvt.ba.iq;b.label&&(k=b.labelStyle,m=dvt.ba.Bz,c=new dvt.ba(c.g(),b.label,0,0),c.zb(new dvt.e(k)),c.fz(h),c.JD(m),h=dvt.e.qp((new dvt.e(b.labelStyle)).getWidth()),0<h&&dvt.Aa.pd(c,h,Infinity,this)||this.k(c),this.Jb=c);Eo(this.as(),b)}a.k(this);a=s;this.Yz?
(b=this.V())&&(a=new dvt.U(b.x,b.y,b.a-b.x,b.b-b.y)):(a=this.Hb?this.Hb.MK(this):s)&&this.W?a=a.Fj(this.W.MK(this)):!a&&this.W&&(a=this.W.MK(this));this.KQ=a;this.Pf("img");this.qq();this.C.Ua().qb(this,this)};
function yo(a,b,c,d){var e=a.C.v()._contextHandler;if(e){var f=a.getData();c=e(a.hb(),a.Yz,f,c,d);b=b(c);a.Yz&&b!=a.Yz&&(a.Yz.namespaceURI===dvt.F.ZV?a.p_().removeChild(a.Yz):a.removeChild(b),a.Yz=s);b&&b.namespaceURI===dvt.F.ZV?a.Yz||(dvt.F.Se(a.p_(),b),a.Yz=b):b instanceof dvt.af?a.Yz||(a.k(b),a.Yz=b):b&&a.C.XK("dvt.Diagram: could not add custom node content for the node "+a.getId()+b,1)}else a.C.XK("dvt.Diagram: could not add custom node content - context handler is undefined",1)}
function Eo(a,b){var c=b.hoverInnerColor,d=b.hoverOuterColor,e=b.selectionColor,f=new dvt.ta(c,1,4);f.Ge(n);d=new dvt.ta(d,1,8);d.Ge(n);var h=new dvt.ta(e,1,2);h.Ge(n);var k=new dvt.ta(e,1,4);k.Ge(n);c=new dvt.ta(c,1,4);c.Ge(n);e=new dvt.ta(e,1,8);e.Ge(n);a.Pt(f,d).Rt(h,k).wv(c,e)}J.RO=z("uN");J.as=function(){if(!this.uN&&this.KQ){var a=new dvt.ka(this.C.g(),this.KQ.x,this.KQ.y,this.KQ.a,this.KQ.b);a.gc();this.RO(a);this.Fb(a,0);Eo(a,this.getData());this.uN=a}return this.uN};
J.rd=function(){var a=this.Pl();this.So=n;this.C.v().hoverRenderer?yo(this,this.C.v().hoverRenderer,this.Pl(),a):this.Tw(n)};J.Qc=function(){var a=this.Pl();this.So=t;this.C.v().hoverRenderer?yo(this,this.C.v().hoverRenderer,this.Pl(),a):this.Tw(t)};J.Tw=function(a){this.as()&&(a?this.as().rd():this.as().Qc())};J.Pg=function(){var a=this.Oa().v().tooltip;return a?this.Oa().g().fg().JA(a,this.Ur()):this.ge()};J.ge=function(){return this.getData().shortDesc};
J.Ur=function(){return{id:this.getId(),type:"node",label:this.getData().label}};J.Gd=function(){var a=[];this.mb()&&a.push(dvt.D.na(dvt.D.Ka,this.sb()?"STATE_SELECTED":"STATE_UNSELECTED"));return dvt.ja.sk(this.ge(),a)};J.qq=function(){if(!dvt.o.Fi()){var a=this.Gd();a&&this.zd("label",a)}};
J.pe=function(a){var b=s;if(a.keyCode==dvt.G.wi&&a.ctrlKey)b=this;else if((a.keyCode==dvt.G.ZK||dvt.G.DK)&&a.altKey){var c=this.Oa().FT(this.getId()),d=this.Oa().Ua().Ab;d&&d.o9&&(b=d.o9(this,a,c));b?b.ER=this:b=this}else a.type==dvt.pa.He?b=this:(b=qo(this.Oa()),b=dvt.Ab.kG(this,a,b));return b};J.Rf=function(){var a=this.Pl();this.$c=n;this.C.v().focusRenderer?yo(this,this.C.v().focusRenderer,this.Pl(),a):this.gB(n)};
J.Md=function(){this.Od()&&(this.Pl(),this.$c=t,this.C.v().focusRenderer?yo(this,this.C.v().focusRenderer,this.getData(),this.Pl()):this.gB(t))};J.gB=function(a){this.Tw(a)};J.Od=D("$c");J.ze=function(){return this.getData().categories?this.getData().categories:[this.getId()]};J.Voa=function(){var a=this.Oa().v().hiddenCategories;return a&&dvt.ea.Yy(a,this.ze())?n:t};
J.oh=function(a,b){var c=new dvt.Nd(this.g(),s,a.lb()),d=b.la(),e=b.ia(),f=this.la(),h=this.ia();d!=f&&(this.Z(d),c.da.J(dvt.B.Q,this,this.la,this.Z,f));e!=h&&(this.ma(e),c.da.J(dvt.B.Q,this,this.ia,this.ma,h));b.W&&this.W&&(c.da.J(dvt.B.zz,this.W,this.W.My,this.W.KG,this.W.My()),this.W.KG(b.W.My()));b.Jb&&this.Jb&&(d=b.Jb.kb(),e=this.Jb.kb(),d.Te(e)||(this.Jb.ob(d),c.da.J(dvt.B.Ji,this.Jb,this.Jb.kb,this.Jb.ob,e)));Fo(c,b.Hb,this.Hb);Fo(c,b.W,this.W);a.add(c,1)};
function Fo(a,b,c){b&&c&&(a.da.J(dvt.B.pq,c,c.qd,c.ga,c.qd()),c.ga(b.qd()))}J.Vj=function(a){Fl(this.Oa()).k(this);var b=this,c=new dvt.Ij(this.g(),this,a.lb());dvt.$a.Ib(c,function(){b.getParent().removeChild(b);b.ra()});a.add(c,0)};J.Si=function(a){this.P(0);a.add(new dvt.Ch(this.g(),this,a.lb()),2)};J.dm=function(){return this.getData()};J.Pl=function(a){return{hovered:this.So,selected:this.sb(),focused:this.$c,zoom:a?a:this.Oa().Ma.Gf()}};function Ao(a){this.Init(a)}
ba("DvtDiagramAutomation",Ao);dvt.j.u(Ao,dvt.Ud,"DvtDiagramAutomation");Ao.prototype.Init=z("C");Ao.prototype.Ho=function(a){return(a=this.C.Ua().bb(a))&&a instanceof wo?"node["+this.C.cH().indexOf(a.getId())+"]":a&&a instanceof xo?"link["+this.C.xP().indexOf(a.getId())+"]":s};Ao.prototype.pi=function(a){if(a==dvt.Ud.OB)return this.XD(this.C);var b=this.iN(a);a=b.component;var b=b.index,c=s;"node"==a?c=this.kk(b):"link"==a&&(c=Go(this,b));return c?c.hb():s};Ao.prototype.getDomElementForSubId=Ao.prototype.pi;
Ao.prototype.iN=function(a){var b=a,c=-1,d=a.substring(0,a.indexOf("["));d&&(b="node"==d||"link"==d?d:s,c=parseInt(a.substring(a.indexOf("[")+1,a.indexOf("]"))));return{component:b,index:c}};Ao.prototype.tg=function(){return this.C.tg()};Ao.prototype.getNodeCount=Ao.prototype.tg;Ao.prototype.zt=function(){return this.C.zt()};Ao.prototype.getLinkCount=Ao.prototype.zt;
Ao.prototype.ed=function(a){if(a=this.kk(a)){var b={};b.id=a.getId();b.selected=a.sb();b.tooltip=a.ge();b.label=a.getData().label;b.background=a.getData().backgroundStyle;b.icon=this.GX(a.rV());return b}return s};Ao.prototype.getNode=Ao.prototype.ed;
Ao.prototype.yT=function(a){if(a=Go(this,a)){var b={};b.id=a.getId();b.selected=a.sb();b.tooltip=a.ge();b.label=a.getData().label;b.color=a.jG();b.width=a.PA();b.style=a.eO();b.startNode=a.Ve();b.endNode=a.Id();b.startConnectorType=a.mv();b.endConnectorType=a.xt();return b}return s};Ao.prototype.getLink=Ao.prototype.yT;Ao.prototype.GX=function(a){if(a){var b={};b.shape=a instanceof dvt.va?a.Td():"none";a.qd()&&(b.color=a.qd().xc());return b}return s};
Ao.prototype.kk=function(a){var b=this.C.cH();return 0<=a&&a<b.length?this.C.fa(b[a]):s};function Go(a,b){var c=a.C.xP();return 0<=b&&b<c.length?a.C.dd(c[b]):s};
  return dvt;
});
